{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { toast } from 'react-toastify';\nconst initialState = {\n  formData: {\n    title: '',\n    description: '',\n    selectedCategories: [],\n    coverImage: null\n  },\n  previewImage: null,\n  errors: {},\n  isSubmitting: false,\n  showPreview: false\n};\nexport const createForum = createAsyncThunk('forum/create', async (formData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await fetch('http://localhost:8080/api/v1/forums', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to create forum');\n    }\n    return await response.json();\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst forumSlice = createSlice({\n  name: 'forum',\n  initialState,\n  reducers: {\n    updateFormField: (state, action) => {\n      const {\n        field,\n        value\n      } = action.payload;\n      state.formData[field] = value;\n    },\n    setPreviewImage: (state, action) => {\n      state.previewImage = action.payload;\n    },\n    setCoverImage: (state, action) => {\n      state.formData.coverImage = action.payload;\n    },\n    setErrors: (state, action) => {\n      state.errors = action.payload;\n    },\n    setShowPreview: (state, action) => {\n      state.showPreview = action.payload;\n    },\n    resetForm: state => {\n      return initialState;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(createForum.pending, state => {\n      state.isSubmitting = true;\n    }).addCase(createForum.fulfilled, state => {\n      state.isSubmitting = false;\n    }).addCase(createForum.rejected, state => {\n      state.isSubmitting = false;\n    });\n  }\n});\nexport const {\n  updateFormField,\n  setPreviewImage,\n  setCoverImage,\n  setErrors,\n  setShowPreview,\n  resetForm\n} = forumSlice.actions;\nexport default forumSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","toast","initialState","formData","title","description","selectedCategories","coverImage","previewImage","errors","isSubmitting","showPreview","createForum","rejectWithValue","response","fetch","method","headers","localStorage","getItem","body","ok","errorData","json","Error","message","error","forumSlice","name","reducers","updateFormField","state","action","field","value","payload","setPreviewImage","setCoverImage","setErrors","setShowPreview","resetForm","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/redux/slices/forumSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst initialState = {\r\n  formData: {\r\n    title: '',\r\n    description: '',\r\n    selectedCategories: [],\r\n    coverImage: null,\r\n  },\r\n  previewImage: null,\r\n  errors: {},\r\n  isSubmitting: false,\r\n  showPreview: false,\r\n};\r\n\r\nexport const createForum = createAsyncThunk(\r\n  'forum/create',\r\n  async (formData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await fetch('http://localhost:8080/api/v1/forums', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to create forum');\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst forumSlice = createSlice({\r\n  name: 'forum',\r\n  initialState,\r\n  reducers: {\r\n    updateFormField: (state, action) => {\r\n      const { field, value } = action.payload;\r\n      state.formData[field] = value;\r\n    },\r\n    setPreviewImage: (state, action) => {\r\n      state.previewImage = action.payload;\r\n    },\r\n    setCoverImage: (state, action) => {\r\n      state.formData.coverImage = action.payload;\r\n    },\r\n    setErrors: (state, action) => {\r\n      state.errors = action.payload;\r\n    },\r\n    setShowPreview: (state, action) => {\r\n      state.showPreview = action.payload;\r\n    },\r\n    resetForm: (state) => {\r\n      return initialState;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(createForum.pending, (state) => {\r\n        state.isSubmitting = true;\r\n      })\r\n      .addCase(createForum.fulfilled, (state) => {\r\n        state.isSubmitting = false;\r\n      })\r\n      .addCase(createForum.rejected, (state) => {\r\n        state.isSubmitting = false;\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  updateFormField,\r\n  setPreviewImage,\r\n  setCoverImage,\r\n  setErrors,\r\n  setShowPreview,\r\n  resetForm,\r\n} = forumSlice.actions;\r\n\r\nexport default forumSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}