{"ast":null,"code":"import React,{useEffect,useState,useCallback,useRef}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListBook=_ref=>{let{searchTerm,windowSize}=_ref;const[books,setBooks]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const[initialLoad,setInitialLoad]=useState(true);const abortControllerRef=useRef(null);const navigate=useNavigate();const searchTimeoutRef=useRef(null);const observerRef=useRef(null);const prevSearchTermRef=useRef(searchTerm);// Last element observer for infinite scroll\nconst lastBookElementRef=useCallback(node=>{if(loading)return;if(observerRef.current)observerRef.current.disconnect();observerRef.current=new IntersectionObserver(entries=>{if(entries[0].isIntersecting&&hasMore&&!initialLoad){setPage(prevPage=>prevPage+1);}});if(node)observerRef.current.observe(node);},[loading,hasMore,initialLoad]);const fetchBooks=useCallback(async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let isNewSearch=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!searchTerm.trim())return;if(abortControllerRef.current){abortControllerRef.current.abort();}abortControllerRef.current=new AbortController();setLoading(true);setError(null);try{const formattedSearchTerm=searchTerm.replace(/ /g,'&');const response=await fetch(`https://gutendex.com/books/?search=${formattedSearchTerm}&page=${pageNum}`,{signal:abortControllerRef.current.signal});if(!response.ok)throw new Error('Failed to fetch books');const data=await response.json();const validBooks=data.results.filter(book=>{var _book$authors;return book.formats['image/jpeg']&&book.title&&!book.title.includes('[')&&((_book$authors=book.authors)===null||_book$authors===void 0?void 0:_book$authors.length);});setBooks(prev=>isNewSearch?validBooks:[...prev,...validBooks]);setHasMore(data.next!==null&&validBooks.length>0);setInitialLoad(false);}catch(err){if(err.name==='AbortError')return;setError('Failed to load books. Please try again.');}finally{setLoading(false);}},[searchTerm]);useEffect(()=>{// Chỉ thực hiện search khi searchTerm thực sự thay đổi\nif(searchTerm!==prevSearchTermRef.current){prevSearchTermRef.current=searchTerm;if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}setPage(1);setBooks([]);setHasMore(true);setInitialLoad(true);// Chỉ search khi có searchTerm\nif(searchTerm.trim()){searchTimeoutRef.current=setTimeout(()=>{fetchBooks(1,true);},300);}}return()=>{if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}if(abortControllerRef.current){abortControllerRef.current.abort();}};},[searchTerm]);useEffect(()=>{if(page>1&&searchTerm.trim()){fetchBooks(page,false);}},[page]);const handleBookClick=useCallback((bookId,bookTitle)=>{navigate('/description-book',{state:{bookId,bookTitle}});},[navigate]);if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center p-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500/10 border border-red-500/20 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 to-white px-6 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8\",children:[books.map((book,index)=>{var _book$authors$;return/*#__PURE__*/_jsxs(\"div\",{ref:index===books.length-1?lastBookElementRef:null,onClick:()=>handleBookClick(book.id,book.title),className:\"group relative transition-all duration-300 hover:scale-105\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative aspect-[2/3] rounded-2xl overflow-hidden bg-white/50 backdrop-blur-sm ring-1 ring-black/5 shadow-xl group-hover:shadow-2xl transition-all duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cover bg-center transition-all duration-300 group-hover:scale-110\",style:{backgroundImage:`url('${book.formats['image/jpeg']}')`}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 right-0 p-4 transform translate-y-full group-hover:translate-y-0 transition-all duration-300\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full px-4 py-2 rounded-lg bg-white font-medium text-gray-900 hover:bg-blue-50 transition-colors duration-300 shadow-lg\",children:\"View Details\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center text-sm font-bold text-gray-900 line-clamp-2 group-hover:text-indigo-600 transition-colors duration-300\",children:book.title}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-xs font-medium text-gray-600 group-hover:text-indigo-500 transition-colors duration-300\",children:((_book$authors$=book.authors[0])===null||_book$authors$===void 0?void 0:_book$authors$.name)||'Unknown Author'})]})]},`${book.id}-${index}`);}),loading&&books.length===0&&[...Array(10)].map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative aspect-[2/3] rounded-2xl overflow-hidden bg-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded-full w-3/4 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-200 rounded-full w-1/2 mx-auto\"})]})]},`skeleton-${i}`))]}),!loading&&searchTerm&&books.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"No books found for this search!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"Try adjusting your search terms\"})]}),loading&&books.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mt-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-4 border-indigo-500 border-t-transparent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-gray-600\",children:\"Loading more books...\"})]}),!loading&&!hasMore&&books.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 mt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500\",children:[\"No more books found for \\\"\",searchTerm,\"\\\"\"]})})]})});};export default/*#__PURE__*/React.memo(ListBook);","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","useNavigate","jsx","_jsx","jsxs","_jsxs","ListBook","_ref","searchTerm","windowSize","books","setBooks","loading","setLoading","error","setError","page","setPage","hasMore","setHasMore","initialLoad","setInitialLoad","abortControllerRef","navigate","searchTimeoutRef","observerRef","prevSearchTermRef","lastBookElementRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","fetchBooks","pageNum","arguments","length","undefined","isNewSearch","trim","abort","AbortController","formattedSearchTerm","replace","response","fetch","signal","ok","Error","data","json","validBooks","results","filter","book","_book$authors","formats","title","includes","authors","prev","next","err","name","clearTimeout","setTimeout","handleBookClick","bookId","bookTitle","state","className","children","map","index","_book$authors$","ref","onClick","id","style","width","backgroundImage","Array","_","i","memo"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/list_book/views/ListBook.js"],"sourcesContent":["import React, {useEffect, useState, useCallback, useRef} from 'react'\r\nimport {useNavigate} from 'react-router-dom'\r\n\r\nconst ListBook = ({searchTerm, windowSize}) => {\r\n  const [books, setBooks] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [page, setPage] = useState(1)\r\n  const [hasMore, setHasMore] = useState(true)\r\n  const [initialLoad, setInitialLoad] = useState(true)\r\n  const abortControllerRef = useRef(null)\r\n  const navigate = useNavigate()\r\n  const searchTimeoutRef = useRef(null)\r\n  const observerRef = useRef(null)\r\n  const prevSearchTermRef = useRef(searchTerm)\r\n\r\n  // Last element observer for infinite scroll\r\n  const lastBookElementRef = useCallback(\r\n    node => {\r\n      if (loading) return\r\n      if (observerRef.current) observerRef.current.disconnect()\r\n      observerRef.current = new IntersectionObserver(entries => {\r\n        if (entries[0].isIntersecting && hasMore && !initialLoad) {\r\n          setPage(prevPage => prevPage + 1)\r\n        }\r\n      })\r\n      if (node) observerRef.current.observe(node)\r\n    },\r\n    [loading, hasMore, initialLoad],\r\n  )\r\n\r\n  const fetchBooks = useCallback(\r\n    async (pageNum = 1, isNewSearch = false) => {\r\n      if (!searchTerm.trim()) return\r\n\r\n      if (abortControllerRef.current) {\r\n        abortControllerRef.current.abort()\r\n      }\r\n\r\n      abortControllerRef.current = new AbortController()\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        const formattedSearchTerm = searchTerm.replace(/ /g, '&')\r\n        const response = await fetch(\r\n          `https://gutendex.com/books/?search=${formattedSearchTerm}&page=${pageNum}`,\r\n          {signal: abortControllerRef.current.signal},\r\n        )\r\n\r\n        if (!response.ok) throw new Error('Failed to fetch books')\r\n        const data = await response.json()\r\n\r\n        const validBooks = data.results.filter(\r\n          book =>\r\n            book.formats['image/jpeg'] &&\r\n            book.title &&\r\n            !book.title.includes('[') &&\r\n            book.authors?.length,\r\n        )\r\n\r\n        setBooks(prev => (isNewSearch ? validBooks : [...prev, ...validBooks]))\r\n        setHasMore(data.next !== null && validBooks.length > 0)\r\n        setInitialLoad(false)\r\n      } catch (err) {\r\n        if (err.name === 'AbortError') return\r\n        setError('Failed to load books. Please try again.')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [searchTerm],\r\n  )\r\n\r\n  useEffect(() => {\r\n    // Chỉ thực hiện search khi searchTerm thực sự thay đổi\r\n    if (searchTerm !== prevSearchTermRef.current) {\r\n      prevSearchTermRef.current = searchTerm\r\n\r\n      if (searchTimeoutRef.current) {\r\n        clearTimeout(searchTimeoutRef.current)\r\n      }\r\n\r\n      setPage(1)\r\n      setBooks([])\r\n      setHasMore(true)\r\n      setInitialLoad(true)\r\n\r\n      // Chỉ search khi có searchTerm\r\n      if (searchTerm.trim()) {\r\n        searchTimeoutRef.current = setTimeout(() => {\r\n          fetchBooks(1, true)\r\n        }, 300)\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (searchTimeoutRef.current) {\r\n        clearTimeout(searchTimeoutRef.current)\r\n      }\r\n      if (abortControllerRef.current) {\r\n        abortControllerRef.current.abort()\r\n      }\r\n    }\r\n  }, [searchTerm])\r\n\r\n  useEffect(() => {\r\n    if (page > 1 && searchTerm.trim()) {\r\n      fetchBooks(page, false)\r\n    }\r\n  }, [page])\r\n\r\n  const handleBookClick = useCallback(\r\n    (bookId, bookTitle) => {\r\n      navigate('/description-book', {state: {bookId, bookTitle}})\r\n    },\r\n    [navigate],\r\n  )\r\n\r\n  if (error) {\r\n    return (\r\n      <div className='flex items-center justify-center p-8'>\r\n        <div className='bg-red-500/10 border border-red-500/20 rounded-lg p-4'>\r\n          <p className='text-red-500'>{error}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className='min-h-screen bg-gradient-to-br from-gray-50 to-white px-6 py-8'>\r\n      <div className='max-w-7xl mx-auto'>\r\n        <div className='grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8'>\r\n          {/* Results */}\r\n          {books.map((book, index) => (\r\n            <div\r\n              ref={index === books.length - 1 ? lastBookElementRef : null}\r\n              key={`${book.id}-${index}`}\r\n              onClick={() => handleBookClick(book.id, book.title)}\r\n              className='group relative transition-all duration-300 hover:scale-105'\r\n              style={{\r\n                width: '100%',\r\n              }}>\r\n              <div className='relative aspect-[2/3] rounded-2xl overflow-hidden bg-white/50 backdrop-blur-sm ring-1 ring-black/5 shadow-xl group-hover:shadow-2xl transition-all duration-300'>\r\n                <div\r\n                  className='absolute inset-0 bg-cover bg-center transition-all duration-300 group-hover:scale-110'\r\n                  style={{\r\n                    backgroundImage: `url('${book.formats['image/jpeg']}')`,\r\n                  }}\r\n                />\r\n                <div className='absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300' />\r\n                <div className='absolute bottom-0 left-0 right-0 p-4 transform translate-y-full group-hover:translate-y-0 transition-all duration-300'>\r\n                  <button className='w-full px-4 py-2 rounded-lg bg-white font-medium text-gray-900 hover:bg-blue-50 transition-colors duration-300 shadow-lg'>\r\n                    View Details\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='mt-4 p-3'>\r\n                <h3 className='text-center text-sm font-bold text-gray-900 line-clamp-2 group-hover:text-indigo-600 transition-colors duration-300'>\r\n                  {book.title}\r\n                </h3>\r\n                <p className='mt-2 text-center text-xs font-medium text-gray-600 group-hover:text-indigo-500 transition-colors duration-300'>\r\n                  {book.authors[0]?.name || 'Unknown Author'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {/* Loading skeletons - Only show on initial load */}\r\n          {loading &&\r\n            books.length === 0 &&\r\n            [...Array(10)].map((_, i) => (\r\n              <div key={`skeleton-${i}`} className='animate-pulse'>\r\n                <div className='relative aspect-[2/3] rounded-2xl overflow-hidden bg-gray-200'>\r\n                  <div className='absolute inset-0' />\r\n                </div>\r\n                <div className='mt-4 p-3'>\r\n                  <div className='h-4 bg-gray-200 rounded-full w-3/4 mx-auto mb-2' />\r\n                  <div className='h-3 bg-gray-200 rounded-full w-1/2 mx-auto' />\r\n                </div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n\r\n        {/* No Results */}\r\n        {!loading && searchTerm && books.length === 0 && (\r\n          <div className='text-center py-12'>\r\n            <p className='text-gray-600 text-lg'>\r\n              No books found for this search!\r\n            </p>\r\n            <p className='text-gray-500 mt-2'>\r\n              Try adjusting your search terms\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Loading more indicator */}\r\n        {loading && books.length > 0 && (\r\n          <div className='flex items-center justify-center mt-8'>\r\n            <div className='animate-spin rounded-full h-8 w-8 border-4 border-indigo-500 border-t-transparent' />\r\n            <span className='ml-3 text-gray-600'>Loading more books...</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* End of results message */}\r\n        {!loading && !hasMore && books.length > 0 && (\r\n          <div className='text-center py-8 mt-4 border-t border-gray-200'>\r\n            <p className='text-gray-500'>\r\n              No more books found for \"{searchTerm}\"\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default React.memo(ListBook)\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}