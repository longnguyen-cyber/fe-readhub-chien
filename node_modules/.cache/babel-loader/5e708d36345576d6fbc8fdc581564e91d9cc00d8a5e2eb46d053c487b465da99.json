{"ast":null,"code":"import { getDatabase, ref, onChildAdded } from \"firebase/database\";\nimport { toast } from \"react-toastify\";\nexport const NotificationService = {\n  subscribeToNotifications: userId => {\n    const db = getDatabase();\n    const notificationsRef = ref(db, `notifications/${userId}`);\n    onChildAdded(notificationsRef, snapshot => {\n      const notification = snapshot.val();\n      toast.info(notification.message, {\n        position: \"top-right\",\n        autoClose: 5000\n      });\n    });\n  }\n};\nexport const initializeFirebaseMessaging = async () => {\n  try {\n    console.log('Requesting notification permission...');\n    const permission = await Notification.requestPermission();\n    console.log('Permission:', permission);\n    if (permission === 'granted') {\n      console.log('Getting FCM token...');\n      const token = await getToken(messaging, {\n        vapidKey: process.env.REACT_APP_FIREBASE_VAPID_KEY\n      });\n      console.log('FCM Token:', token);\n      return token;\n    }\n  } catch (error) {\n    console.error('Firebase messaging error:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["getDatabase","ref","onChildAdded","toast","NotificationService","subscribeToNotifications","userId","db","notificationsRef","snapshot","notification","val","info","message","position","autoClose","initializeFirebaseMessaging","console","log","permission","Notification","requestPermission","token","getToken","messaging","vapidKey","process","env","REACT_APP_FIREBASE_VAPID_KEY","error"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/services/NotificationService.js"],"sourcesContent":["import { getDatabase, ref, onChildAdded } from \"firebase/database\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const NotificationService = {\r\n  subscribeToNotifications: (userId) => {\r\n    const db = getDatabase();\r\n    const notificationsRef = ref(db, `notifications/${userId}`);\r\n\r\n    onChildAdded(notificationsRef, (snapshot) => {\r\n      const notification = snapshot.val();\r\n      toast.info(notification.message, {\r\n        position: \"top-right\",\r\n        autoClose: 5000\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport const initializeFirebaseMessaging = async () => {\r\n  try {\r\n    console.log('Requesting notification permission...');\r\n    const permission = await Notification.requestPermission();\r\n    console.log('Permission:', permission);\r\n\r\n    if (permission === 'granted') {\r\n      console.log('Getting FCM token...');\r\n      const token = await getToken(messaging, {\r\n        vapidKey: process.env.REACT_APP_FIREBASE_VAPID_KEY\r\n      });\r\n      console.log('FCM Token:', token);\r\n      return token;\r\n    }\r\n  } catch (error) {\r\n    console.error('Firebase messaging error:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"AAAA,SAASA,WAAW,EAAEC,GAAG,EAAEC,YAAY,QAAQ,mBAAmB;AAClE,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,MAAMC,mBAAmB,GAAG;EACjCC,wBAAwB,EAAGC,MAAM,IAAK;IACpC,MAAMC,EAAE,GAAGP,WAAW,CAAC,CAAC;IACxB,MAAMQ,gBAAgB,GAAGP,GAAG,CAACM,EAAE,EAAE,iBAAiBD,MAAM,EAAE,CAAC;IAE3DJ,YAAY,CAACM,gBAAgB,EAAGC,QAAQ,IAAK;MAC3C,MAAMC,YAAY,GAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC;MACnCR,KAAK,CAACS,IAAI,CAACF,YAAY,CAACG,OAAO,EAAE;QAC/BC,QAAQ,EAAE,WAAW;QACrBC,SAAS,EAAE;MACb,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMC,2BAA2B,GAAG,MAAAA,CAAA,KAAY;EACrD,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpD,MAAMC,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;IACzDJ,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEC,UAAU,CAAC;IAEtC,IAAIA,UAAU,KAAK,SAAS,EAAE;MAC5BF,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMI,KAAK,GAAG,MAAMC,QAAQ,CAACC,SAAS,EAAE;QACtCC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC;MACxB,CAAC,CAAC;MACFX,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,KAAK,CAAC;MAChC,OAAOA,KAAK;IACd;EACF,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdZ,OAAO,CAACY,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACjD,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}