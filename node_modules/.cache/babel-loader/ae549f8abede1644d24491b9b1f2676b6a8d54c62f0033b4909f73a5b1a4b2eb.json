{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Heart,Share2,Bookmark}from'lucide-react';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForumInteractionButtons=_ref=>{let{forumId,user}=_ref;const[interactions,setInteractions]=useState({isLiked:false,isSaved:false,likeCount:0,saveCount:0});const[isLoading,setIsLoading]=useState(false);useEffect(()=>{fetchInteractions();},[forumId]);const fetchInteractions=async()=>{try{const response=await fetch(`http://localhost:8080/api/v1/forums/${forumId}/interactions`,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();if(data.success){setInteractions(data.data);}}}catch(error){console.error('Error fetching interactions:',error);}};const handleLike=async()=>{if(!user){toast.error('Please login to like this forum');return;}if(isLoading)return;try{setIsLoading(true);const response=await fetch(`http://localhost:8080/api/v1/forums/${forumId}/like`,{method:'POST',headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();if(data.success){setInteractions(data.data);toast.success(interactions.isLiked?'Removed like':'Added like');}}}catch(error){console.error('Error toggling like:',error);toast.error('Failed to update like');}finally{setIsLoading(false);}};const handleSave=async()=>{if(!user){toast.error('Please login to save this forum');return;}if(isLoading)return;try{setIsLoading(true);const response=await fetch(`http://localhost:8080/api/v1/forums/${forumId}/save`,{method:'POST',headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();if(data.success){setInteractions(data.data);toast.success(interactions.isSaved?'Removed from saved':'Added to saved');}}}catch(error){console.error('Error toggling save:',error);toast.error('Failed to update save');}finally{setIsLoading(false);}};const handleShare=async()=>{try{await navigator.clipboard.writeText(window.location.href);toast.success('Forum link copied to clipboard!');}catch(error){console.error('Error sharing forum:',error);toast.error('Failed to copy link');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleLike,disabled:isLoading,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${interactions.isLiked?'bg-red-500 text-white':'bg-white/10 hover:bg-white/20 text-white'}`,children:[/*#__PURE__*/_jsx(Heart,{className:`w-5 h-5 ${interactions.isLiked?'fill-current':''}`}),/*#__PURE__*/_jsxs(\"span\",{children:[interactions.isLiked?'Liked':'Like',' ',interactions.likeCount>0&&`(${interactions.likeCount})`]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleShare,className:\"flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors text-white\",children:[/*#__PURE__*/_jsx(Share2,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Share\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,disabled:isLoading,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${interactions.isSaved?'bg-blue-500 text-white':'bg-white/10 hover:bg-white/20 text-white'}`,children:[/*#__PURE__*/_jsx(Bookmark,{className:`w-5 h-5 ${interactions.isSaved?'fill-current':''}`}),/*#__PURE__*/_jsx(\"span\",{children:interactions.isSaved?'Saved':'Save'})]})]});};export default ForumInteractionButtons;","map":{"version":3,"names":["React","useState","useEffect","Heart","Share2","Bookmark","toast","jsx","_jsx","jsxs","_jsxs","ForumInteractionButtons","_ref","forumId","user","interactions","setInteractions","isLiked","isSaved","likeCount","saveCount","isLoading","setIsLoading","fetchInteractions","response","fetch","headers","Authorization","localStorage","getItem","ok","data","json","success","error","console","handleLike","method","handleSave","handleShare","navigator","clipboard","writeText","window","location","href","className","children","onClick","disabled"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/forum_discussion/views/widgets/ForumInteractionButtons.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Heart, Share2, Bookmark } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ForumInteractionButtons = ({ forumId, user }) => {\r\n  const [interactions, setInteractions] = useState({\r\n    isLiked: false,\r\n    isSaved: false,\r\n    likeCount: 0,\r\n    saveCount: 0\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchInteractions();\r\n  }, [forumId]);\r\n\r\n  const fetchInteractions = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:8080/api/v1/forums/${forumId}/interactions`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setInteractions(data.data);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching interactions:', error);\r\n    }\r\n  };\r\n\r\n  const handleLike = async () => {\r\n    if (!user) {\r\n      toast.error('Please login to like this forum');\r\n      return;\r\n    }\r\n    if (isLoading) return;\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(\r\n        `http://localhost:8080/api/v1/forums/${forumId}/like`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setInteractions(data.data);\r\n          toast.success(interactions.isLiked ? 'Removed like' : 'Added like');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling like:', error);\r\n      toast.error('Failed to update like');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) {\r\n      toast.error('Please login to save this forum');\r\n      return;\r\n    }\r\n    if (isLoading) return;\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(\r\n        `http://localhost:8080/api/v1/forums/${forumId}/save`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setInteractions(data.data);\r\n          toast.success(interactions.isSaved ? 'Removed from saved' : 'Added to saved');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling save:', error);\r\n      toast.error('Failed to update save');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(window.location.href);\r\n      toast.success('Forum link copied to clipboard!');\r\n    } catch (error) {\r\n      console.error('Error sharing forum:', error);\r\n      toast.error('Failed to copy link');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-between mt-4\">\r\n      <button\r\n        onClick={handleLike}\r\n        disabled={isLoading}\r\n        className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\r\n          interactions.isLiked\r\n            ? 'bg-red-500 text-white'\r\n            : 'bg-white/10 hover:bg-white/20 text-white'\r\n        }`}\r\n      >\r\n        <Heart\r\n          className={`w-5 h-5 ${interactions.isLiked ? 'fill-current' : ''}`}\r\n        />\r\n        <span>\r\n          {interactions.isLiked ? 'Liked' : 'Like'}{' '}\r\n          {interactions.likeCount > 0 && `(${interactions.likeCount})`}\r\n        </span>\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleShare}\r\n        className=\"flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors text-white\"\r\n      >\r\n        <Share2 className=\"w-5 h-5\" />\r\n        <span>Share</span>\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleSave}\r\n        disabled={isLoading}\r\n        className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\r\n          interactions.isSaved\r\n            ? 'bg-blue-500 text-white'\r\n            : 'bg-white/10 hover:bg-white/20 text-white'\r\n        }`}\r\n      >\r\n        <Bookmark\r\n          className={`w-5 h-5 ${interactions.isSaved ? 'fill-current' : ''}`}\r\n        />\r\n        <span>{interactions.isSaved ? 'Saved' : 'Save'}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForumInteractionButtons;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}