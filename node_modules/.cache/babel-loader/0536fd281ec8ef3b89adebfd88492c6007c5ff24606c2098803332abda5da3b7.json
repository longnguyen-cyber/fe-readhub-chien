{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\read_book\\\\views\\\\ReadBookScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { ReactReader } from 'react-reader';\nimport { AppBar, Toolbar, Typography, Button, Select, MenuItem, Drawer, Popover, TextField, Divider } from '@mui/material';\nimport { ArrowBack, ColorLens } from '@mui/icons-material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst colors = ['#FFB3BA', '#FFDFBA', '#FFFFBA', '#BAFFC9', '#BAE1FF']; // Pastel colors\n\nfunction ReadBookScreen() {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    bookId,\n    bookTitle\n  } = location.state || {};\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [epubUrl, setEpubUrl] = useState(null);\n  const [selections, setSelections] = useState([]);\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [rendition, setRendition] = useState(null);\n  const [highlightColor, setHighlightColor] = useState(colors[0]);\n  const [comment, setComment] = useState('');\n  const [popoverAnchor, setPopoverAnchor] = useState(null);\n  const [selectedText, setSelectedText] = useState('');\n  const [selectedCfiRange, setSelectedCfiRange] = useState('');\n  const readerRef = useRef(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filter, setFilter] = useState('all'); // Filter state\n\n  const handleError = error => {\n    console.error('Error in ReactReader:', error);\n    setError('An error occurred while loading the book. Please try again later.');\n    setLoading(false);\n  };\n  const handleToggleDrawer = () => {\n    setDrawerOpen(!drawerOpen);\n  };\n  useEffect(() => {\n    const epubUrl = `https://www.gutenberg.org/cache/epub/${bookId}/pg${bookId}.epub`;\n    setEpubUrl(epubUrl);\n  }, [bookId]);\n  useEffect(() => {\n    if (rendition) {\n      const handleSelection = (cfiRange, contents) => {\n        const selection = contents.window.getSelection();\n        const range = selection.getRangeAt(0);\n        const text = selection.toString().trim();\n        if (text) {\n          setSelectedText(text);\n          setSelectedCfiRange(cfiRange);\n          const rect = range.getBoundingClientRect();\n          const viewportHeight = window.innerHeight;\n          const viewportWidth = window.innerWidth;\n          setPopoverAnchor({\n            top: rect.top < viewportHeight / 2 ? rect.bottom + window.scrollY + 115 : rect.top + window.scrollY - 60,\n            left: viewportWidth / 2 + 5\n          });\n        }\n      };\n      rendition.on('selected', handleSelection);\n      rendition.themes.default({\n        '::selection': {\n          background: 'rgba(0, 0, 255, 0.1)',\n          // Light blue on selection\n          color: 'inherit'\n        }\n      });\n      return () => {\n        rendition.off('selected', handleSelection);\n      };\n    }\n  }, [rendition]);\n  const handleSave = () => {\n    if (comment && selectedCfiRange) {\n      const newSelection = {\n        text: selectedText,\n        cfiRange: selectedCfiRange,\n        comment,\n        color: highlightColor,\n        timestamp: Date.now() // Add timestamp for sorting\n      };\n      setSelections(prev => [...prev, newSelection]);\n\n      // Remove old highlight if exists\n      rendition.annotations.remove(selectedCfiRange, 'highlight');\n\n      // Add new highlight with selected color\n      rendition.annotations.add('highlight', selectedCfiRange, {}, null, 'hl', {\n        fill: highlightColor,\n        'fill-opacity': '0.3',\n        'mix-blend-mode': 'multiply'\n      });\n\n      // Update styles for the highlight\n      rendition.views().forEach(view => {\n        const highlights = view.document.querySelectorAll('mark[data-epubjs-annotation=\"highlight\"]');\n        highlights.forEach(highlight => {\n          if (highlight.dataset.epubcfi === selectedCfiRange) {\n            highlight.style.backgroundColor = highlightColor; // Apply selected highlight color\n            highlight.style.opacity = '0.3'; // Set opacity\n          }\n        });\n      });\n      setPopoverAnchor(null);\n      setComment('');\n      setSelectedText('');\n      setSelectedCfiRange('');\n    }\n  };\n  const handleRemoveHighlight = cfiRange => {\n    rendition.annotations.remove(cfiRange, 'highlight');\n    setSelections(selections.filter(selection => selection.cfiRange !== cfiRange));\n  };\n\n  // Search and filter logic\n  const filteredSelections = selections.filter(selection => {\n    const isTextMatch = selection.text.toLowerCase().includes(searchTerm.toLowerCase());\n    const isColorMatch = filter === 'all' || selection.color === filter;\n    return isTextMatch && isColorMatch;\n  }).sort((a, b) => b.timestamp - a.timestamp); // Sort by latest first\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    style: {\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: () => navigate(-1),\n          children: [/*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), \"Back\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          style: {\n            flexGrow: 1,\n            textAlign: 'center'\n          },\n          children: bookTitle || 'Epub Reader'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: handleToggleDrawer,\n          children: [/*#__PURE__*/_jsxDEV(ColorLens, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), \"Notes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        position: 'relative'\n      },\n      ref: readerRef,\n      children: /*#__PURE__*/_jsxDEV(ReactReader, {\n        url: epubUrl,\n        epubOptions: {\n          allowPopups: true,\n          allowScriptedContent: true\n        },\n        location: location,\n        getRendition: _rendition => {\n          setRendition(_rendition);\n          _rendition.on('started', () => setLoading(false));\n        },\n        handleError: handleError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popover, {\n      open: Boolean(popoverAnchor),\n      anchorReference: \"anchorPosition\",\n      anchorPosition: popoverAnchor,\n      onClose: () => setPopoverAnchor(null),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px',\n            marginBottom: '10px'\n          },\n          children: colors.map((color, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setHighlightColor(color),\n            style: {\n              width: '20px',\n              height: '20px',\n              backgroundColor: color,\n              border: color === highlightColor ? '2px solid black' : '',\n              cursor: 'pointer'\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Comment\",\n          fullWidth: true,\n          multiline: true,\n          rows: 2,\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          style: {\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSave,\n          disabled: !comment,\n          color: \"primary\",\n          variant: \"contained\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      anchor: \"right\",\n      open: drawerOpen,\n      onClose: handleToggleDrawer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 350\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingTop: '20px',\n            paddingLeft: '20px',\n            paddingRight: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            style: {\n              marginBottom: '10px'\n            },\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Search Notes\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            fullWidth: true,\n            style: {\n              marginBottom: '10px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: filter,\n            onChange: e => setFilter(e.target.value),\n            fullWidth: true,\n            style: {\n              marginBottom: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"all\",\n              style: {\n                paddingLeft: '20px',\n                paddingRight: '20px'\n              },\n              children: \"All Colors\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), colors.map((color, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: color,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  backgroundColor: color,\n                  padding: '2px 10px',\n                  borderRadius: '5px',\n                  color: color\n                },\n                children: `ColorColorColorColorColorColori`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          style: {\n            margin: '10px 0'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: 'calc(100vh - 205px)',\n            overflowY: 'auto',\n            paddingLeft: '20px'\n          },\n          children: filteredSelections.map((note, i) => {\n            const {\n              text,\n              cfiRange,\n              comment,\n              color,\n              timestamp\n            } = note;\n            const isLastNote = i === filteredSelections.length - 1; // Check if it's the last note\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '15px',\n                paddingBottom: '10px',\n                paddingRight: '10px',\n                borderBottom: isLastNote ? 'none' : '1px solid #eee' // Conditional border\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                style: {\n                  backgroundColor: color,\n                  padding: '7px',\n                  borderRadius: '5px',\n                  marginBottom: '7px'\n                },\n                children: text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                style: {\n                  textAlign: 'right',\n                  display: 'block',\n                  marginTop: '7px'\n                },\n                children: new Date(timestamp).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"small\",\n                onClick: () => rendition.display(cfiRange),\n                style: {\n                  marginRight: '5px'\n                },\n                variant: \"outlined\",\n                children: \"Show\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"small\",\n                onClick: () => handleRemoveHighlight(cfiRange),\n                variant: \"outlined\",\n                color: \"secondary\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n}\n_s(ReadBookScreen, \"ln0k0dpZgJu/CJxwZfPq82XD6ms=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = ReadBookScreen;\nexport default ReadBookScreen;\nvar _c;\n$RefreshReg$(_c, \"ReadBookScreen\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","useNavigate","ReactReader","AppBar","Toolbar","Typography","Button","Select","MenuItem","Drawer","Popover","TextField","Divider","ArrowBack","ColorLens","jsxDEV","_jsxDEV","colors","ReadBookScreen","_s","navigate","location","bookId","bookTitle","state","error","setError","loading","setLoading","epubUrl","setEpubUrl","selections","setSelections","drawerOpen","setDrawerOpen","rendition","setRendition","highlightColor","setHighlightColor","comment","setComment","popoverAnchor","setPopoverAnchor","selectedText","setSelectedText","selectedCfiRange","setSelectedCfiRange","readerRef","searchTerm","setSearchTerm","filter","setFilter","handleError","console","handleToggleDrawer","handleSelection","cfiRange","contents","selection","window","getSelection","range","getRangeAt","text","toString","trim","rect","getBoundingClientRect","viewportHeight","innerHeight","viewportWidth","innerWidth","top","bottom","scrollY","left","on","themes","default","background","color","off","handleSave","newSelection","timestamp","Date","now","prev","annotations","remove","add","fill","views","forEach","view","highlights","document","querySelectorAll","highlight","dataset","epubcfi","style","backgroundColor","opacity","handleRemoveHighlight","filteredSelections","isTextMatch","toLowerCase","includes","isColorMatch","sort","a","b","className","height","display","flexDirection","children","position","onClick","fileName","_jsxFileName","lineNumber","columnNumber","variant","flexGrow","textAlign","flex","ref","url","epubOptions","allowPopups","allowScriptedContent","getRendition","_rendition","open","Boolean","anchorReference","anchorPosition","onClose","anchorOrigin","vertical","horizontal","transformOrigin","padding","gap","marginBottom","map","i","width","border","cursor","label","fullWidth","multiline","rows","value","onChange","e","target","disabled","anchor","paddingTop","paddingLeft","paddingRight","index","borderRadius","margin","maxHeight","overflowY","note","isLastNote","length","paddingBottom","borderBottom","marginTop","toLocaleString","size","marginRight","_c","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/read_book/views/ReadBookScreen.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\r\nimport {useLocation, useNavigate} from 'react-router-dom'\r\nimport {ReactReader} from 'react-reader'\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Button,\r\n  Select,\r\n  MenuItem,\r\n  Drawer,\r\n  Popover,\r\n  TextField,\r\n  Divider,\r\n} from '@mui/material'\r\nimport {ArrowBack, ColorLens} from '@mui/icons-material'\r\n\r\nconst colors = ['#FFB3BA', '#FFDFBA', '#FFFFBA', '#BAFFC9', '#BAE1FF'] // Pastel colors\r\n\r\nfunction ReadBookScreen() {\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const {bookId, bookTitle} = location.state || {}\r\n  const [error, setError] = useState(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [epubUrl, setEpubUrl] = useState(null)\r\n  const [selections, setSelections] = useState([])\r\n  const [drawerOpen, setDrawerOpen] = useState(false)\r\n  const [rendition, setRendition] = useState(null)\r\n  const [highlightColor, setHighlightColor] = useState(colors[0])\r\n  const [comment, setComment] = useState('')\r\n  const [popoverAnchor, setPopoverAnchor] = useState(null)\r\n  const [selectedText, setSelectedText] = useState('')\r\n  const [selectedCfiRange, setSelectedCfiRange] = useState('')\r\n  const readerRef = useRef(null)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [filter, setFilter] = useState('all') // Filter state\r\n\r\n  const handleError = error => {\r\n    console.error('Error in ReactReader:', error)\r\n    setError(\r\n      'An error occurred while loading the book. Please try again later.',\r\n    )\r\n    setLoading(false)\r\n  }\r\n\r\n  const handleToggleDrawer = () => {\r\n    setDrawerOpen(!drawerOpen)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const epubUrl = `https://www.gutenberg.org/cache/epub/${bookId}/pg${bookId}.epub`\r\n    setEpubUrl(epubUrl)\r\n  }, [bookId])\r\n\r\n  useEffect(() => {\r\n    if (rendition) {\r\n      const handleSelection = (cfiRange, contents) => {\r\n        const selection = contents.window.getSelection()\r\n        const range = selection.getRangeAt(0)\r\n        const text = selection.toString().trim()\r\n        if (text) {\r\n          setSelectedText(text)\r\n          setSelectedCfiRange(cfiRange)\r\n          const rect = range.getBoundingClientRect()\r\n          const viewportHeight = window.innerHeight\r\n          const viewportWidth = window.innerWidth\r\n          setPopoverAnchor({\r\n            top:\r\n              rect.top < viewportHeight / 2\r\n                ? rect.bottom + window.scrollY + 115\r\n                : rect.top + window.scrollY - 60,\r\n            left: viewportWidth / 2 + 5,\r\n          })\r\n        }\r\n      }\r\n\r\n      rendition.on('selected', handleSelection)\r\n\r\n      rendition.themes.default({\r\n        '::selection': {\r\n          background: 'rgba(0, 0, 255, 0.1)', // Light blue on selection\r\n          color: 'inherit',\r\n        },\r\n      })\r\n\r\n      return () => {\r\n        rendition.off('selected', handleSelection)\r\n      }\r\n    }\r\n  }, [rendition])\r\n\r\n  const handleSave = () => {\r\n    if (comment && selectedCfiRange) {\r\n      const newSelection = {\r\n        text: selectedText,\r\n        cfiRange: selectedCfiRange,\r\n        comment,\r\n        color: highlightColor,\r\n        timestamp: Date.now(), // Add timestamp for sorting\r\n      }\r\n      setSelections(prev => [...prev, newSelection])\r\n\r\n      // Remove old highlight if exists\r\n      rendition.annotations.remove(selectedCfiRange, 'highlight')\r\n\r\n      // Add new highlight with selected color\r\n      rendition.annotations.add('highlight', selectedCfiRange, {}, null, 'hl', {\r\n        fill: highlightColor,\r\n        'fill-opacity': '0.3',\r\n        'mix-blend-mode': 'multiply',\r\n      })\r\n\r\n      // Update styles for the highlight\r\n      rendition.views().forEach(view => {\r\n        const highlights = view.document.querySelectorAll(\r\n          'mark[data-epubjs-annotation=\"highlight\"]',\r\n        )\r\n        highlights.forEach(highlight => {\r\n          if (highlight.dataset.epubcfi === selectedCfiRange) {\r\n            highlight.style.backgroundColor = highlightColor // Apply selected highlight color\r\n            highlight.style.opacity = '0.3' // Set opacity\r\n          }\r\n        })\r\n      })\r\n\r\n      setPopoverAnchor(null)\r\n      setComment('')\r\n      setSelectedText('')\r\n      setSelectedCfiRange('')\r\n    }\r\n  }\r\n\r\n  const handleRemoveHighlight = cfiRange => {\r\n    rendition.annotations.remove(cfiRange, 'highlight')\r\n    setSelections(\r\n      selections.filter(selection => selection.cfiRange !== cfiRange),\r\n    )\r\n  }\r\n\r\n  // Search and filter logic\r\n  const filteredSelections = selections\r\n    .filter(selection => {\r\n      const isTextMatch = selection.text\r\n        .toLowerCase()\r\n        .includes(searchTerm.toLowerCase())\r\n      const isColorMatch = filter === 'all' || selection.color === filter\r\n      return isTextMatch && isColorMatch\r\n    })\r\n    .sort((a, b) => b.timestamp - a.timestamp) // Sort by latest first\r\n\r\n  return (\r\n    <div\r\n      className='App'\r\n      style={{height: '100vh', display: 'flex', flexDirection: 'column'}}>\r\n      <AppBar position='static'>\r\n        <Toolbar>\r\n          <Button color='inherit' onClick={() => navigate(-1)}>\r\n            <ArrowBack />\r\n            Back\r\n          </Button>\r\n          <Typography variant='h6' style={{flexGrow: 1, textAlign: 'center'}}>\r\n            {bookTitle || 'Epub Reader'}\r\n          </Typography>\r\n          <Button color='inherit' onClick={handleToggleDrawer}>\r\n            <ColorLens />\r\n            Notes\r\n          </Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p style={{color: 'red'}}>{error}</p>}\r\n      <div style={{flex: 1, position: 'relative'}} ref={readerRef}>\r\n        <ReactReader\r\n          url={epubUrl}\r\n          epubOptions={{\r\n            allowPopups: true,\r\n            allowScriptedContent: true,\r\n          }}\r\n          location={location}\r\n          getRendition={_rendition => {\r\n            setRendition(_rendition)\r\n            _rendition.on('started', () => setLoading(false))\r\n          }}\r\n          handleError={handleError}\r\n        />\r\n      </div>\r\n      <Popover\r\n        open={Boolean(popoverAnchor)}\r\n        anchorReference='anchorPosition'\r\n        anchorPosition={popoverAnchor}\r\n        onClose={() => setPopoverAnchor(null)}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'center',\r\n        }}>\r\n        <div style={{padding: '10px'}}>\r\n          <div style={{display: 'flex', gap: '10px', marginBottom: '10px'}}>\r\n            {colors.map((color, i) => (\r\n              <div\r\n                key={i}\r\n                onClick={() => setHighlightColor(color)}\r\n                style={{\r\n                  width: '20px',\r\n                  height: '20px',\r\n                  backgroundColor: color,\r\n                  border: color === highlightColor ? '2px solid black' : '',\r\n                  cursor: 'pointer',\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n          <TextField\r\n            label='Comment'\r\n            fullWidth\r\n            multiline\r\n            rows={2}\r\n            value={comment}\r\n            onChange={e => setComment(e.target.value)}\r\n            style={{marginBottom: '10px'}}\r\n          />\r\n          <Button\r\n            onClick={handleSave}\r\n            disabled={!comment}\r\n            color='primary'\r\n            variant='contained'>\r\n            Save\r\n          </Button>\r\n        </div>\r\n      </Popover>\r\n      <Drawer anchor='right' open={drawerOpen} onClose={handleToggleDrawer}>\r\n        <div style={{width: 350}}>\r\n          <div\r\n            style={{\r\n              paddingTop: '20px',\r\n              paddingLeft: '20px',\r\n              paddingRight: '20px',\r\n            }}>\r\n            <Typography variant='h6' style={{marginBottom: '10px'}}>\r\n              Notes\r\n            </Typography>\r\n            <TextField\r\n              label='Search Notes'\r\n              value={searchTerm}\r\n              onChange={e => setSearchTerm(e.target.value)}\r\n              fullWidth\r\n              style={{\r\n                marginBottom: '10px',\r\n              }}\r\n            />\r\n            <Select\r\n              value={filter}\r\n              onChange={e => setFilter(e.target.value)}\r\n              fullWidth\r\n              style={{\r\n                marginBottom: '10px',\r\n              }}>\r\n              <MenuItem\r\n                value='all'\r\n                style={{paddingLeft: '20px', paddingRight: '20px'}}>\r\n                All Colors\r\n              </MenuItem>\r\n              {colors.map((color, index) => (\r\n                <MenuItem key={index} value={color}>\r\n                  <span\r\n                    style={{\r\n                      backgroundColor: color,\r\n                      padding: '2px 10px',\r\n                      borderRadius: '5px',\r\n                      color: color,\r\n                    }}>\r\n                    {`ColorColorColorColorColorColori`}\r\n                  </span>\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n          <Divider style={{margin: '10px 0'}} />\r\n          <div\r\n            style={{\r\n              maxHeight: 'calc(100vh - 205px)',\r\n              overflowY: 'auto',\r\n              paddingLeft: '20px',\r\n            }}>\r\n            {filteredSelections.map((note, i) => {\r\n              const {text, cfiRange, comment, color, timestamp} = note\r\n              const isLastNote = i === filteredSelections.length - 1 // Check if it's the last note\r\n              return (\r\n                <div\r\n                  key={i}\r\n                  style={{\r\n                    marginBottom: '15px',\r\n                    paddingBottom: '10px',\r\n                    paddingRight: '10px',\r\n                    borderBottom: isLastNote ? 'none' : '1px solid #eee', // Conditional border\r\n                  }}>\r\n                  <Typography\r\n                    variant='body2'\r\n                    style={{\r\n                      backgroundColor: color,\r\n                      padding: '7px',\r\n                      borderRadius: '5px',\r\n                      marginBottom: '7px',\r\n                    }}>\r\n                    {text}\r\n                  </Typography>\r\n                  <Typography variant='body2'>{comment}</Typography>\r\n                  <Typography\r\n                    variant='caption'\r\n                    style={{\r\n                      textAlign: 'right',\r\n                      display: 'block',\r\n                      marginTop: '7px',\r\n                    }}>\r\n                    {new Date(timestamp).toLocaleString()}\r\n                  </Typography>\r\n                  <Button\r\n                    size='small'\r\n                    onClick={() => rendition.display(cfiRange)}\r\n                    style={{marginRight: '5px'}}\r\n                    variant='outlined'>\r\n                    Show\r\n                  </Button>\r\n                  <Button\r\n                    size='small'\r\n                    onClick={() => handleRemoveHighlight(cfiRange)}\r\n                    variant='outlined'\r\n                    color='secondary'>\r\n                    Remove\r\n                  </Button>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ReadBookScreen\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAO,OAAO;AACxD,SAAQC,WAAW,EAAEC,WAAW,QAAO,kBAAkB;AACzD,SAAQC,WAAW,QAAO,cAAc;AACxC,SACEC,MAAM,EACNC,OAAO,EACPC,UAAU,EACVC,MAAM,EACNC,MAAM,EACNC,QAAQ,EACRC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,OAAO,QACF,eAAe;AACtB,SAAQC,SAAS,EAAEC,SAAS,QAAO,qBAAqB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAExD,MAAMC,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,EAAC;;AAEvE,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAGnB,WAAW,CAAC,CAAC;EAC9B,MAAMoB,QAAQ,GAAGrB,WAAW,CAAC,CAAC;EAC9B,MAAM;IAACsB,MAAM;IAAEC;EAAS,CAAC,GAAGF,QAAQ,CAACG,KAAK,IAAI,CAAC,CAAC;EAChD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC6B,OAAO,EAAEC,UAAU,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC+B,OAAO,EAAEC,UAAU,CAAC,GAAGhC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiC,UAAU,EAAEC,aAAa,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACmC,UAAU,EAAEC,aAAa,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACqC,SAAS,EAAEC,YAAY,CAAC,GAAGtC,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACuC,cAAc,EAAEC,iBAAiB,CAAC,GAAGxC,QAAQ,CAACmB,MAAM,CAAC,CAAC,CAAC,CAAC;EAC/D,MAAM,CAACsB,OAAO,EAAEC,UAAU,CAAC,GAAG1C,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC2C,aAAa,EAAEC,gBAAgB,CAAC,GAAG5C,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAAC6C,YAAY,EAAEC,eAAe,CAAC,GAAG9C,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC+C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAMiD,SAAS,GAAGhD,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACiD,UAAU,EAAEC,aAAa,CAAC,GAAGnD,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACoD,MAAM,EAAEC,SAAS,CAAC,GAAGrD,QAAQ,CAAC,KAAK,CAAC,EAAC;;EAE5C,MAAMsD,WAAW,GAAG3B,KAAK,IAAI;IAC3B4B,OAAO,CAAC5B,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7CC,QAAQ,CACN,mEACF,CAAC;IACDE,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAED,MAAM0B,kBAAkB,GAAGA,CAAA,KAAM;IAC/BpB,aAAa,CAAC,CAACD,UAAU,CAAC;EAC5B,CAAC;EAEDpC,SAAS,CAAC,MAAM;IACd,MAAMgC,OAAO,GAAG,wCAAwCP,MAAM,MAAMA,MAAM,OAAO;IACjFQ,UAAU,CAACD,OAAO,CAAC;EACrB,CAAC,EAAE,CAACP,MAAM,CAAC,CAAC;EAEZzB,SAAS,CAAC,MAAM;IACd,IAAIsC,SAAS,EAAE;MACb,MAAMoB,eAAe,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;QAC9C,MAAMC,SAAS,GAAGD,QAAQ,CAACE,MAAM,CAACC,YAAY,CAAC,CAAC;QAChD,MAAMC,KAAK,GAAGH,SAAS,CAACI,UAAU,CAAC,CAAC,CAAC;QACrC,MAAMC,IAAI,GAAGL,SAAS,CAACM,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;QACxC,IAAIF,IAAI,EAAE;UACRnB,eAAe,CAACmB,IAAI,CAAC;UACrBjB,mBAAmB,CAACU,QAAQ,CAAC;UAC7B,MAAMU,IAAI,GAAGL,KAAK,CAACM,qBAAqB,CAAC,CAAC;UAC1C,MAAMC,cAAc,GAAGT,MAAM,CAACU,WAAW;UACzC,MAAMC,aAAa,GAAGX,MAAM,CAACY,UAAU;UACvC7B,gBAAgB,CAAC;YACf8B,GAAG,EACDN,IAAI,CAACM,GAAG,GAAGJ,cAAc,GAAG,CAAC,GACzBF,IAAI,CAACO,MAAM,GAAGd,MAAM,CAACe,OAAO,GAAG,GAAG,GAClCR,IAAI,CAACM,GAAG,GAAGb,MAAM,CAACe,OAAO,GAAG,EAAE;YACpCC,IAAI,EAAEL,aAAa,GAAG,CAAC,GAAG;UAC5B,CAAC,CAAC;QACJ;MACF,CAAC;MAEDnC,SAAS,CAACyC,EAAE,CAAC,UAAU,EAAErB,eAAe,CAAC;MAEzCpB,SAAS,CAAC0C,MAAM,CAACC,OAAO,CAAC;QACvB,aAAa,EAAE;UACbC,UAAU,EAAE,sBAAsB;UAAE;UACpCC,KAAK,EAAE;QACT;MACF,CAAC,CAAC;MAEF,OAAO,MAAM;QACX7C,SAAS,CAAC8C,GAAG,CAAC,UAAU,EAAE1B,eAAe,CAAC;MAC5C,CAAC;IACH;EACF,CAAC,EAAE,CAACpB,SAAS,CAAC,CAAC;EAEf,MAAM+C,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI3C,OAAO,IAAIM,gBAAgB,EAAE;MAC/B,MAAMsC,YAAY,GAAG;QACnBpB,IAAI,EAAEpB,YAAY;QAClBa,QAAQ,EAAEX,gBAAgB;QAC1BN,OAAO;QACPyC,KAAK,EAAE3C,cAAc;QACrB+C,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE;MACzB,CAAC;MACDtD,aAAa,CAACuD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,YAAY,CAAC,CAAC;;MAE9C;MACAhD,SAAS,CAACqD,WAAW,CAACC,MAAM,CAAC5C,gBAAgB,EAAE,WAAW,CAAC;;MAE3D;MACAV,SAAS,CAACqD,WAAW,CAACE,GAAG,CAAC,WAAW,EAAE7C,gBAAgB,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;QACvE8C,IAAI,EAAEtD,cAAc;QACpB,cAAc,EAAE,KAAK;QACrB,gBAAgB,EAAE;MACpB,CAAC,CAAC;;MAEF;MACAF,SAAS,CAACyD,KAAK,CAAC,CAAC,CAACC,OAAO,CAACC,IAAI,IAAI;QAChC,MAAMC,UAAU,GAAGD,IAAI,CAACE,QAAQ,CAACC,gBAAgB,CAC/C,0CACF,CAAC;QACDF,UAAU,CAACF,OAAO,CAACK,SAAS,IAAI;UAC9B,IAAIA,SAAS,CAACC,OAAO,CAACC,OAAO,KAAKvD,gBAAgB,EAAE;YAClDqD,SAAS,CAACG,KAAK,CAACC,eAAe,GAAGjE,cAAc,EAAC;YACjD6D,SAAS,CAACG,KAAK,CAACE,OAAO,GAAG,KAAK,EAAC;UAClC;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MAEF7D,gBAAgB,CAAC,IAAI,CAAC;MACtBF,UAAU,CAAC,EAAE,CAAC;MACdI,eAAe,CAAC,EAAE,CAAC;MACnBE,mBAAmB,CAAC,EAAE,CAAC;IACzB;EACF,CAAC;EAED,MAAM0D,qBAAqB,GAAGhD,QAAQ,IAAI;IACxCrB,SAAS,CAACqD,WAAW,CAACC,MAAM,CAACjC,QAAQ,EAAE,WAAW,CAAC;IACnDxB,aAAa,CACXD,UAAU,CAACmB,MAAM,CAACQ,SAAS,IAAIA,SAAS,CAACF,QAAQ,KAAKA,QAAQ,CAChE,CAAC;EACH,CAAC;;EAED;EACA,MAAMiD,kBAAkB,GAAG1E,UAAU,CAClCmB,MAAM,CAACQ,SAAS,IAAI;IACnB,MAAMgD,WAAW,GAAGhD,SAAS,CAACK,IAAI,CAC/B4C,WAAW,CAAC,CAAC,CACbC,QAAQ,CAAC5D,UAAU,CAAC2D,WAAW,CAAC,CAAC,CAAC;IACrC,MAAME,YAAY,GAAG3D,MAAM,KAAK,KAAK,IAAIQ,SAAS,CAACsB,KAAK,KAAK9B,MAAM;IACnE,OAAOwD,WAAW,IAAIG,YAAY;EACpC,CAAC,CAAC,CACDC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC5B,SAAS,GAAG2B,CAAC,CAAC3B,SAAS,CAAC,EAAC;;EAE7C,oBACEpE,OAAA;IACEiG,SAAS,EAAC,KAAK;IACfZ,KAAK,EAAE;MAACa,MAAM,EAAE,OAAO;MAAEC,OAAO,EAAE,MAAM;MAAEC,aAAa,EAAE;IAAQ,CAAE;IAAAC,QAAA,gBACnErG,OAAA,CAACb,MAAM;MAACmH,QAAQ,EAAC,QAAQ;MAAAD,QAAA,eACvBrG,OAAA,CAACZ,OAAO;QAAAiH,QAAA,gBACNrG,OAAA,CAACV,MAAM;UAAC0E,KAAK,EAAC,SAAS;UAACuC,OAAO,EAAEA,CAAA,KAAMnG,QAAQ,CAAC,CAAC,CAAC,CAAE;UAAAiG,QAAA,gBAClDrG,OAAA,CAACH,SAAS;YAAA2G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,QAEf;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3G,OAAA,CAACX,UAAU;UAACuH,OAAO,EAAC,IAAI;UAACvB,KAAK,EAAE;YAACwB,QAAQ,EAAE,CAAC;YAAEC,SAAS,EAAE;UAAQ,CAAE;UAAAT,QAAA,EAChE9F,SAAS,IAAI;QAAa;UAAAiG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eACb3G,OAAA,CAACV,MAAM;UAAC0E,KAAK,EAAC,SAAS;UAACuC,OAAO,EAAEjE,kBAAmB;UAAA+D,QAAA,gBAClDrG,OAAA,CAACF,SAAS;YAAA0G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,SAEf;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EACRhG,OAAO,iBAAIX,OAAA;MAAAqG,QAAA,EAAG;IAAU;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAC5BlG,KAAK,iBAAIT,OAAA;MAAGqF,KAAK,EAAE;QAACrB,KAAK,EAAE;MAAK,CAAE;MAAAqC,QAAA,EAAE5F;IAAK;MAAA+F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC/C3G,OAAA;MAAKqF,KAAK,EAAE;QAAC0B,IAAI,EAAE,CAAC;QAAET,QAAQ,EAAE;MAAU,CAAE;MAACU,GAAG,EAAEjF,SAAU;MAAAsE,QAAA,eAC1DrG,OAAA,CAACd,WAAW;QACV+H,GAAG,EAAEpG,OAAQ;QACbqG,WAAW,EAAE;UACXC,WAAW,EAAE,IAAI;UACjBC,oBAAoB,EAAE;QACxB,CAAE;QACF/G,QAAQ,EAAEA,QAAS;QACnBgH,YAAY,EAAEC,UAAU,IAAI;UAC1BlG,YAAY,CAACkG,UAAU,CAAC;UACxBA,UAAU,CAAC1D,EAAE,CAAC,SAAS,EAAE,MAAMhD,UAAU,CAAC,KAAK,CAAC,CAAC;QACnD,CAAE;QACFwB,WAAW,EAAEA;MAAY;QAAAoE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACN3G,OAAA,CAACN,OAAO;MACN6H,IAAI,EAAEC,OAAO,CAAC/F,aAAa,CAAE;MAC7BgG,eAAe,EAAC,gBAAgB;MAChCC,cAAc,EAAEjG,aAAc;MAC9BkG,OAAO,EAAEA,CAAA,KAAMjG,gBAAgB,CAAC,IAAI,CAAE;MACtCkG,YAAY,EAAE;QACZC,QAAQ,EAAE,QAAQ;QAClBC,UAAU,EAAE;MACd,CAAE;MACFC,eAAe,EAAE;QACfF,QAAQ,EAAE,KAAK;QACfC,UAAU,EAAE;MACd,CAAE;MAAAzB,QAAA,eACFrG,OAAA;QAAKqF,KAAK,EAAE;UAAC2C,OAAO,EAAE;QAAM,CAAE;QAAA3B,QAAA,gBAC5BrG,OAAA;UAAKqF,KAAK,EAAE;YAACc,OAAO,EAAE,MAAM;YAAE8B,GAAG,EAAE,MAAM;YAAEC,YAAY,EAAE;UAAM,CAAE;UAAA7B,QAAA,EAC9DpG,MAAM,CAACkI,GAAG,CAAC,CAACnE,KAAK,EAAEoE,CAAC,kBACnBpI,OAAA;YAEEuG,OAAO,EAAEA,CAAA,KAAMjF,iBAAiB,CAAC0C,KAAK,CAAE;YACxCqB,KAAK,EAAE;cACLgD,KAAK,EAAE,MAAM;cACbnC,MAAM,EAAE,MAAM;cACdZ,eAAe,EAAEtB,KAAK;cACtBsE,MAAM,EAAEtE,KAAK,KAAK3C,cAAc,GAAG,iBAAiB,GAAG,EAAE;cACzDkH,MAAM,EAAE;YACV;UAAE,GARGH,CAAC;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OASP,CACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACN3G,OAAA,CAACL,SAAS;UACR6I,KAAK,EAAC,SAAS;UACfC,SAAS;UACTC,SAAS;UACTC,IAAI,EAAE,CAAE;UACRC,KAAK,EAAErH,OAAQ;UACfsH,QAAQ,EAAEC,CAAC,IAAItH,UAAU,CAACsH,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC1CvD,KAAK,EAAE;YAAC6C,YAAY,EAAE;UAAM;QAAE;UAAA1B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC,eACF3G,OAAA,CAACV,MAAM;UACLiH,OAAO,EAAErC,UAAW;UACpB8E,QAAQ,EAAE,CAACzH,OAAQ;UACnByC,KAAK,EAAC,SAAS;UACf4C,OAAO,EAAC,WAAW;UAAAP,QAAA,EAAC;QAEtB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACV3G,OAAA,CAACP,MAAM;MAACwJ,MAAM,EAAC,OAAO;MAAC1B,IAAI,EAAEtG,UAAW;MAAC0G,OAAO,EAAErF,kBAAmB;MAAA+D,QAAA,eACnErG,OAAA;QAAKqF,KAAK,EAAE;UAACgD,KAAK,EAAE;QAAG,CAAE;QAAAhC,QAAA,gBACvBrG,OAAA;UACEqF,KAAK,EAAE;YACL6D,UAAU,EAAE,MAAM;YAClBC,WAAW,EAAE,MAAM;YACnBC,YAAY,EAAE;UAChB,CAAE;UAAA/C,QAAA,gBACFrG,OAAA,CAACX,UAAU;YAACuH,OAAO,EAAC,IAAI;YAACvB,KAAK,EAAE;cAAC6C,YAAY,EAAE;YAAM,CAAE;YAAA7B,QAAA,EAAC;UAExD;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACb3G,OAAA,CAACL,SAAS;YACR6I,KAAK,EAAC,cAAc;YACpBI,KAAK,EAAE5G,UAAW;YAClB6G,QAAQ,EAAEC,CAAC,IAAI7G,aAAa,CAAC6G,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAC7CH,SAAS;YACTpD,KAAK,EAAE;cACL6C,YAAY,EAAE;YAChB;UAAE;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACF3G,OAAA,CAACT,MAAM;YACLqJ,KAAK,EAAE1G,MAAO;YACd2G,QAAQ,EAAEC,CAAC,IAAI3G,SAAS,CAAC2G,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YACzCH,SAAS;YACTpD,KAAK,EAAE;cACL6C,YAAY,EAAE;YAChB,CAAE;YAAA7B,QAAA,gBACFrG,OAAA,CAACR,QAAQ;cACPoJ,KAAK,EAAC,KAAK;cACXvD,KAAK,EAAE;gBAAC8D,WAAW,EAAE,MAAM;gBAAEC,YAAY,EAAE;cAAM,CAAE;cAAA/C,QAAA,EAAC;YAEtD;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAU,CAAC,EACV1G,MAAM,CAACkI,GAAG,CAAC,CAACnE,KAAK,EAAEqF,KAAK,kBACvBrJ,OAAA,CAACR,QAAQ;cAAaoJ,KAAK,EAAE5E,KAAM;cAAAqC,QAAA,eACjCrG,OAAA;gBACEqF,KAAK,EAAE;kBACLC,eAAe,EAAEtB,KAAK;kBACtBgE,OAAO,EAAE,UAAU;kBACnBsB,YAAY,EAAE,KAAK;kBACnBtF,KAAK,EAAEA;gBACT,CAAE;gBAAAqC,QAAA,EACD;cAAiC;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9B;YAAC,GATM0C,KAAK;cAAA7C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAUV,CACX,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACN3G,OAAA,CAACJ,OAAO;UAACyF,KAAK,EAAE;YAACkE,MAAM,EAAE;UAAQ;QAAE;UAAA/C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACtC3G,OAAA;UACEqF,KAAK,EAAE;YACLmE,SAAS,EAAE,qBAAqB;YAChCC,SAAS,EAAE,MAAM;YACjBN,WAAW,EAAE;UACf,CAAE;UAAA9C,QAAA,EACDZ,kBAAkB,CAAC0C,GAAG,CAAC,CAACuB,IAAI,EAAEtB,CAAC,KAAK;YACnC,MAAM;cAACrF,IAAI;cAAEP,QAAQ;cAAEjB,OAAO;cAAEyC,KAAK;cAAEI;YAAS,CAAC,GAAGsF,IAAI;YACxD,MAAMC,UAAU,GAAGvB,CAAC,KAAK3C,kBAAkB,CAACmE,MAAM,GAAG,CAAC,EAAC;YACvD,oBACE5J,OAAA;cAEEqF,KAAK,EAAE;gBACL6C,YAAY,EAAE,MAAM;gBACpB2B,aAAa,EAAE,MAAM;gBACrBT,YAAY,EAAE,MAAM;gBACpBU,YAAY,EAAEH,UAAU,GAAG,MAAM,GAAG,gBAAgB,CAAE;cACxD,CAAE;cAAAtD,QAAA,gBACFrG,OAAA,CAACX,UAAU;gBACTuH,OAAO,EAAC,OAAO;gBACfvB,KAAK,EAAE;kBACLC,eAAe,EAAEtB,KAAK;kBACtBgE,OAAO,EAAE,KAAK;kBACdsB,YAAY,EAAE,KAAK;kBACnBpB,YAAY,EAAE;gBAChB,CAAE;gBAAA7B,QAAA,EACDtD;cAAI;gBAAAyD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACK,CAAC,eACb3G,OAAA,CAACX,UAAU;gBAACuH,OAAO,EAAC,OAAO;gBAAAP,QAAA,EAAE9E;cAAO;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CAAC,eAClD3G,OAAA,CAACX,UAAU;gBACTuH,OAAO,EAAC,SAAS;gBACjBvB,KAAK,EAAE;kBACLyB,SAAS,EAAE,OAAO;kBAClBX,OAAO,EAAE,OAAO;kBAChB4D,SAAS,EAAE;gBACb,CAAE;gBAAA1D,QAAA,EACD,IAAIhC,IAAI,CAACD,SAAS,CAAC,CAAC4F,cAAc,CAAC;cAAC;gBAAAxD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3B,CAAC,eACb3G,OAAA,CAACV,MAAM;gBACL2K,IAAI,EAAC,OAAO;gBACZ1D,OAAO,EAAEA,CAAA,KAAMpF,SAAS,CAACgF,OAAO,CAAC3D,QAAQ,CAAE;gBAC3C6C,KAAK,EAAE;kBAAC6E,WAAW,EAAE;gBAAK,CAAE;gBAC5BtD,OAAO,EAAC,UAAU;gBAAAP,QAAA,EAAC;cAErB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT3G,OAAA,CAACV,MAAM;gBACL2K,IAAI,EAAC,OAAO;gBACZ1D,OAAO,EAAEA,CAAA,KAAMf,qBAAqB,CAAChD,QAAQ,CAAE;gBAC/CoE,OAAO,EAAC,UAAU;gBAClB5C,KAAK,EAAC,WAAW;gBAAAqC,QAAA,EAAC;cAEpB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA,GAxCJyB,CAAC;cAAA5B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAyCH,CAAC;UAEV,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACxG,EAAA,CAnUQD,cAAc;EAAA,QACJjB,WAAW,EACXD,WAAW;AAAA;AAAAmL,EAAA,GAFrBjK,cAAc;AAqUvB,eAAeA,cAAc;AAAA,IAAAiK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}