{"ast":null,"code":"import React,{useState,useEffect}from'react';import{PlusCircle,MessageCircle,Users,Book,TrendingUp,Star,BookOpen,Clock,Heart}from'lucide-react';import{Box}from'@mui/material';import axios from'axios';import{toast}from'react-toastify';import ForumItemCard from'./widgets/ForumItemCard';import HeaderComponent from'../../../component/header/HeaderComponent';import{colors}from'../../../constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookForum=()=>{const[forums,setForums]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[user,setUser]=useState(null);// Get token from localStorage\nconst getAuthToken=()=>{return localStorage.getItem('token');// Assuming token is stored in localStorage\n};// Configure axios defaults\nconst api=axios.create({baseURL:'http://localhost:8080',headers:{'Content-Type':'application/json'}});// Add authentication interceptor\napi.interceptors.request.use(config=>{const token=getAuthToken();if(token){config.headers.Authorization=`Bearer ${token}`;}return config;},error=>{return Promise.reject(error);});const getUser=async()=>{try{const response=await fetch('http://localhost:8080/api/v1/user/profile',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();setUser(data);}}catch(error){console.error(error);}};useEffect(()=>{getUser();},[]);useEffect(()=>{const fetchForums=async()=>{try{const response=await api.get('/api/v1/forums');if(response.data.success){setForums(response.data.data);}else{setError('Failed to fetch forums');}}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===403){setError('You need to login to access this content');}else{setError(err.message);}}finally{setLoading(false);}};fetchForums();},[]);const readingChallenges=[{id:1,title:\"Summer Reading Challenge\",description:\"Read 5 classics in 3 months and earn your badge\",daysRemaining:15,gradient:\"from-blue-500 to-blue-600\",icon:Book},{id:2,title:\"Author Spotlight\",description:\"This month featuring: Haruki Murakami\",subtitle:\"Join the reading marathon\",gradient:\"from-purple-500 to-purple-600\",icon:Heart}];if(loading)return;/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:\"Loading...\"});if(error)return;/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(Box,{sx:{minHeight:'100vh',bgcolor:colors.themeLight.color060d13,display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(HeaderComponent,{centerContent:\"\",showSearch:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 mt-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-2\",children:\"Book Forums\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Join thoughtful discussions about books with fellow readers\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(PlusCircle,{className:\"w-5 h-5 mr-2\"}),\"Create New Forum\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\",children:forums.map(forum=>/*#__PURE__*/_jsx(ForumItemCard,{forum:forum,user:user},forum.discussionId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6\",children:\"Featured Reading Challenge\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:readingChallenges.map(challenge=>/*#__PURE__*/_jsxs(\"div\",{className:`bg-gradient-to-r ${challenge.gradient} text-white rounded-lg p-6`,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-2\",children:challenge.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-100 mb-4\",children:challenge.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(challenge.icon,{className:\"w-6 h-6 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:challenge.subtitle||`${challenge.daysRemaining} days remaining`})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-gray-100 transition-colors\",children:challenge.id===1?'Join Challenge':'View Collection'}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors\",children:challenge.id===1?'View Books':'Join Discussion'})]})]},challenge.id))})]})]})]});};export default BookForum;","map":{"version":3,"names":["React","useState","useEffect","PlusCircle","MessageCircle","Users","Book","TrendingUp","Star","BookOpen","Clock","Heart","Box","axios","toast","ForumItemCard","HeaderComponent","colors","jsx","_jsx","jsxs","_jsxs","BookForum","forums","setForums","loading","setLoading","error","setError","user","setUser","getAuthToken","localStorage","getItem","api","create","baseURL","headers","interceptors","request","use","config","token","Authorization","Promise","reject","getUser","response","fetch","ok","data","json","console","fetchForums","get","success","err","_err$response","status","message","readingChallenges","id","title","description","daysRemaining","gradient","icon","subtitle","className","children","sx","minHeight","bgcolor","themeLight","color060d13","display","flexDirection","centerContent","showSearch","map","forum","discussionId","challenge"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/book_forum/views/BookForum.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { PlusCircle, MessageCircle, Users, Book, TrendingUp, Star, BookOpen, Clock, Heart } from 'lucide-react';\r\nimport {\r\n  Box,\r\n} from '@mui/material'\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport ForumItemCard from './widgets/ForumItemCard';\r\nimport HeaderComponent from '../../../component/header/HeaderComponent';\r\nimport {colors} from '../../../constants'\r\n\r\nconst BookForum = () => {\r\n  const [forums, setForums] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Get token from localStorage\r\n  const getAuthToken = () => {\r\n    return localStorage.getItem('token'); // Assuming token is stored in localStorage\r\n  };\r\n\r\n  // Configure axios defaults\r\n  const api = axios.create({\r\n    baseURL: 'http://localhost:8080',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  });\r\n\r\n  // Add authentication interceptor\r\n  api.interceptors.request.use(\r\n    (config) => {\r\n      const token = getAuthToken();\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n      return config;\r\n    },\r\n    (error) => {\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  const getUser = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        'http://localhost:8080/api/v1/user/profile',\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setUser(data)\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getUser()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const fetchForums = async () => {\r\n      try {\r\n        const response = await api.get('/api/v1/forums');\r\n        if (response.data.success) {\r\n          setForums(response.data.data);\r\n        } else {\r\n          setError('Failed to fetch forums');\r\n        }\r\n      } catch (err) {\r\n        if (err.response?.status === 403) {\r\n          setError('You need to login to access this content');\r\n        } else {\r\n          setError(err.message);\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchForums();\r\n  }, []);\r\n\r\n\r\n  const readingChallenges = [\r\n    {\r\n      id: 1,\r\n      title: \"Summer Reading Challenge\",\r\n      description: \"Read 5 classics in 3 months and earn your badge\",\r\n      daysRemaining: 15,\r\n      gradient: \"from-blue-500 to-blue-600\",\r\n      icon: Book\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Author Spotlight\",\r\n      description: \"This month featuring: Haruki Murakami\",\r\n      subtitle: \"Join the reading marathon\",\r\n      gradient: \"from-purple-500 to-purple-600\",\r\n      icon: Heart\r\n    }\r\n  ];\r\n\r\n  if (loading) return\r\n  <div className='flex justify-center items-center min-h-screen'>\r\n  Loading...\r\n</div>;\r\n  if (error) return\r\n  <div className='flex justify-center items-center min-h-screen'>\r\n  Error: {error}\r\n</div>;\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        bgcolor: colors.themeLight.color060d13,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n      <HeaderComponent\r\n        centerContent=\"\"\r\n        showSearch={false}\r\n      />\r\n    <div className=\"container mx-auto px-4 py-8 mt-12\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div>\r\n          <h1 className=\"text-4xl font-bold mb-2\">Book Forums</h1>\r\n          <p className=\"text-gray-600\">Join thoughtful discussions about books with fellow readers</p>\r\n        </div>\r\n        <button className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\">\r\n          <PlusCircle className=\"w-5 h-5 mr-2\" />\r\n          Create New Forum\r\n        </button>\r\n      </div>\r\n\r\n      {/* Forums Grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n        {forums.map((forum) => (\r\n          <ForumItemCard key={forum.discussionId}\r\n          forum={forum}\r\n          user={user}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Featured Reading Challenge - Hardcoded Section */}\r\n      <div className=\"mt-12\">\r\n        <h2 className=\"text-3xl font-bold mb-6\">Featured Reading Challenge</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {readingChallenges.map((challenge) => (\r\n            <div key={challenge.id} className={`bg-gradient-to-r ${challenge.gradient} text-white rounded-lg p-6`}>\r\n              <h3 className=\"text-2xl font-bold mb-2\">{challenge.title}</h3>\r\n              <p className=\"text-blue-100 mb-4\">{challenge.description}</p>\r\n              <div className=\"flex items-center mb-6\">\r\n                <challenge.icon className=\"w-6 h-6 mr-2\" />\r\n                <span>{challenge.subtitle || `${challenge.daysRemaining} days remaining`}</span>\r\n              </div>\r\n              <div className=\"flex gap-4\">\r\n                <button className=\"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-gray-100 transition-colors\">\r\n                  {challenge.id === 1 ? 'Join Challenge' : 'View Collection'}\r\n                </button>\r\n                <button className=\"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors\">\r\n                  {challenge.id === 1 ? 'View Books' : 'Join Discussion'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BookForum;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}