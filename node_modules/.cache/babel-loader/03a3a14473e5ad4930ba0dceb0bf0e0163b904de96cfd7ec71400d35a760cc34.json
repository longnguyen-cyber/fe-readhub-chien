{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\description_book\\\\views\\\\ReviewItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Typography, Box, IconButton, Tooltip } from '@mui/material';\nimport { Star, ThumbsUp, Flag } from 'lucide-react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReviewItem = ({\n  review,\n  index,\n  isLast,\n  currentUser\n}) => {\n  _s();\n  const [isLiked, setIsLiked] = useState(review.liked);\n  const [isReported, setIsReported] = useState(review.reported);\n  const [likeCount, setLikeCount] = useState(review.likeCount);\n  const isOwnReview = currentUser && currentUser.userId === review.userId;\n  const handleLike = async () => {\n    if (isOwnReview) return;\n    try {\n      await axios.post(`http://localhost:8080/api/v1/review/${review.reviewId}/like/user/${currentUser.userId}`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (isLiked) {\n        setLikeCount(prev => prev - 1);\n      } else {\n        setLikeCount(prev => prev + 1);\n      }\n      setIsLiked(!isLiked);\n    } catch (error) {\n      console.error('Error liking review:', error);\n    }\n  };\n  const handleReport = async () => {\n    if (isOwnReview) return;\n    try {\n      await axios.post(`http://localhost:8080/api/v1/review/${review.reviewId}/report/user/${currentUser.userId}`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setIsReported(true);\n    } catch (error) {\n      console.error('Error reporting review:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mb: 1,\n      pb: !isLast ? 1 : 0,\n      borderBottom: !isLast ? '1px solid' : 'none',\n      borderColor: 'divider'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        mb: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        fontWeight: \"bold\",\n        children: review.fullname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"text.secondary\",\n        children: new Date(review.createdAt).toLocaleDateString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: 0.5,\n        mb: 1\n      },\n      children: [1, 2, 3, 4, 5].map(star => /*#__PURE__*/_jsxDEV(Star, {\n        size: 16,\n        className: star <= review.rating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'\n      }, star, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body1\",\n      sx: {\n        mb: 2\n      },\n      children: review.review\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), currentUser && !isReported && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: isOwnReview ? 'You cannot like your own review' : isLiked ? 'Unlike' : 'Like',\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: handleLike,\n              color: isLiked ? 'primary' : 'default',\n              disabled: isOwnReview,\n              children: /*#__PURE__*/_jsxDEV(ThumbsUp, {\n                size: 18,\n                className: isLiked ? 'fill-current' : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: isLiked ? 'primary' : 'text.secondary',\n          children: likeCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), !isOwnReview && /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: isReported ? 'Reported' : 'Report',\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          size: \"small\",\n          onClick: handleReport,\n          color: isReported ? 'error' : 'default',\n          disabled: isReported,\n          children: /*#__PURE__*/_jsxDEV(Flag, {\n            size: 18,\n            className: isReported ? 'fill-current' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(ReviewItem, \"ku4CSZfL1pQUGKJk75O5bA71Zv4=\");\n_c = ReviewItem;\nexport default ReviewItem;\nvar _c;\n$RefreshReg$(_c, \"ReviewItem\");","map":{"version":3,"names":["React","useState","Typography","Box","IconButton","Tooltip","Star","ThumbsUp","Flag","axios","jsxDEV","_jsxDEV","ReviewItem","review","index","isLast","currentUser","_s","isLiked","setIsLiked","liked","isReported","setIsReported","reported","likeCount","setLikeCount","isOwnReview","userId","handleLike","post","reviewId","headers","Authorization","localStorage","getItem","prev","error","console","handleReport","sx","mb","pb","borderBottom","borderColor","children","display","justifyContent","variant","fontWeight","fullname","fileName","_jsxFileName","lineNumber","columnNumber","color","Date","createdAt","toLocaleDateString","alignItems","gap","map","star","size","className","rating","title","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/description_book/views/ReviewItem.js"],"sourcesContent":["import React, {useState} from 'react'\r\nimport {Typography, Box, IconButton, Tooltip} from '@mui/material'\r\nimport {Star, ThumbsUp, Flag} from 'lucide-react'\r\nimport axios from 'axios'\r\n\r\nconst ReviewItem = ({review, index, isLast, currentUser}) => {\r\n  const [isLiked, setIsLiked] = useState(review.liked)\r\n  const [isReported, setIsReported] = useState(review.reported)\r\n  const [likeCount, setLikeCount] = useState(review.likeCount)\r\n\r\n  const isOwnReview = currentUser && currentUser.userId === review.userId\r\n\r\n  const handleLike = async () => {\r\n    if (isOwnReview) return\r\n    try {\r\n      await axios.post(\r\n        `http://localhost:8080/api/v1/review/${review.reviewId}/like/user/${currentUser.userId}`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n\r\n      if (isLiked) {\r\n        setLikeCount(prev => prev - 1)\r\n      } else {\r\n        setLikeCount(prev => prev + 1)\r\n      }\r\n      setIsLiked(!isLiked)\r\n    } catch (error) {\r\n      console.error('Error liking review:', error)\r\n    }\r\n  }\r\n\r\n  const handleReport = async () => {\r\n    if (isOwnReview) return\r\n    try {\r\n      await axios.post(\r\n        `http://localhost:8080/api/v1/review/${review.reviewId}/report/user/${currentUser.userId}`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      setIsReported(true)\r\n    } catch (error) {\r\n      console.error('Error reporting review:', error)\r\n    }\r\n  }\r\n  return (\r\n    <Box\r\n      sx={{\r\n        mb: 1,\r\n        pb: !isLast ? 1 : 0,\r\n        borderBottom: !isLast ? '1px solid' : 'none',\r\n        borderColor: 'divider',\r\n      }}>\r\n      <Box sx={{display: 'flex', justifyContent: 'space-between', mb: 1}}>\r\n        <Typography variant='subtitle1' fontWeight='bold'>\r\n          {review.fullname}\r\n        </Typography>\r\n        <Typography variant='body2' color='text.secondary'>\r\n          {new Date(review.createdAt).toLocaleDateString()}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Box sx={{display: 'flex', alignItems: 'center', gap: 0.5, mb: 1}}>\r\n        {[1, 2, 3, 4, 5].map(star => (\r\n          <Star\r\n            key={star}\r\n            size={16}\r\n            className={\r\n              star <= review.rating\r\n                ? 'text-yellow-400 fill-yellow-400'\r\n                : 'text-gray-300'\r\n            }\r\n          />\r\n        ))}\r\n      </Box>\r\n\r\n      <Typography variant='body1' sx={{mb: 2}}>\r\n        {review.review}\r\n      </Typography>\r\n\r\n      {currentUser && !isReported && (\r\n        <Box sx={{display: 'flex', alignItems: 'center', gap: 2}}>\r\n          <Box sx={{display: 'flex', alignItems: 'center', gap: 1}}>\r\n            <Tooltip\r\n              title={\r\n                isOwnReview\r\n                  ? 'You cannot like your own review'\r\n                  : isLiked\r\n                  ? 'Unlike'\r\n                  : 'Like'\r\n              }>\r\n              <span>\r\n                <IconButton\r\n                  size='small'\r\n                  onClick={handleLike}\r\n                  color={isLiked ? 'primary' : 'default'}\r\n                  disabled={isOwnReview}>\r\n                  <ThumbsUp\r\n                    size={18}\r\n                    className={isLiked ? 'fill-current' : ''}\r\n                  />\r\n                </IconButton>\r\n              </span>\r\n            </Tooltip>\r\n            <Typography\r\n              variant='body2'\r\n              color={isLiked ? 'primary' : 'text.secondary'}>\r\n              {likeCount}\r\n            </Typography>\r\n          </Box>\r\n\r\n          {!isOwnReview && (\r\n            <Tooltip title={isReported ? 'Reported' : 'Report'}>\r\n              <IconButton\r\n                size='small'\r\n                onClick={handleReport}\r\n                color={isReported ? 'error' : 'default'}\r\n                disabled={isReported}>\r\n                <Flag size={18} className={isReported ? 'fill-current' : ''} />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default ReviewItem\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}