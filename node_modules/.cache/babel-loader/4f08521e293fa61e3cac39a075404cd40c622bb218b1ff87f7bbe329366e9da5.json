{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{getToken,onMessage}from'firebase/messaging';import{messaging}from'../../../config/firebase';// Import từ file config\nimport{Bell,Flag,AlertTriangle,Ban,MessageCircle,UserPlus,X,Check,ExternalLink}from'lucide-react';import{format}from'date-fns';import{Link}from'react-router-dom';import{motion,AnimatePresence}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationDropdown=()=>{const[notifications,setNotifications]=useState([]);const[isOpen,setIsOpen]=useState(false);const[unreadCount,setUnreadCount]=useState(0);const dropdownRef=useRef(null);const[loading,setLoading]=useState(false);const userId=localStorage.getItem('userId');useEffect(()=>{const initializeNotifications=async()=>{try{setLoading(true);// Request notification permission\nconst permission=await Notification.requestPermission();if(permission==='granted'){// Get FCM token\nconst token=await getToken(messaging,{vapidKey:process.env.REACT_APP_FIREBASE_VAPID_KEY});if(token){console.log('FCM Token:',token);// Register token with backend\nawait fetch('/api/v1/notifications/register-device',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({fcmToken:token})});}// Listen for foreground messages\nconst unsubscribe=onMessage(messaging,payload=>{var _payload$data,_payload$data2;console.log('Received foreground message:',payload);const newNotification={id:Date.now().toString(),title:payload.notification.title,message:payload.notification.body,type:((_payload$data=payload.data)===null||_payload$data===void 0?void 0:_payload$data.type)||'DEFAULT',data:JSON.parse(((_payload$data2=payload.data)===null||_payload$data2===void 0?void 0:_payload$data2.extraData)||'{}'),createdAt:new Date().toISOString(),read:false};setNotifications(prev=>[newNotification,...prev]);setUnreadCount(prev=>prev+1);});return()=>{unsubscribe();};}}catch(error){console.error('Error initializing notifications:',error);}finally{setLoading(false);}};initializeNotifications();},[]);useEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const markAsRead=async notificationId=>{setNotifications(prev=>prev.map(notification=>notification.id===notificationId?{...notification,read:true}:notification));setUnreadCount(prev=>Math.max(0,prev-1));};const markAllAsRead=()=>{setNotifications(prev=>prev.map(notification=>({...notification,read:true})));setUnreadCount(0);};const getNotificationIcon=type=>{switch(type){case'FORUM_REPORT':return/*#__PURE__*/_jsx(Flag,{className:\"w-5 h-5 text-red-500\"});case'WARNING':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-yellow-500\"});case'USER_BANNED':return/*#__PURE__*/_jsx(Ban,{className:\"w-5 h-5 text-purple-500\"});case'NEW_COMMENT':return/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5 text-blue-500\"});case'NEW_MEMBER':return/*#__PURE__*/_jsx(UserPlus,{className:\"w-5 h-5 text-green-500\"});default:return/*#__PURE__*/_jsx(Bell,{className:\"w-5 h-5 text-gray-500\"});}};const getNotificationLink=notification=>{switch(notification.type){case'FORUM_REPORT':return`/admin/forum-reports/${notification.data.reportId}`;case'USER_BANNED':return`/admin/users/${notification.data.userId}`;case'NEW_COMMENT':return`/forums/${notification.data.forumId}`;case'NEW_MEMBER':return`/forums/${notification.data.forumId}/members`;default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),className:\"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full\",children:[/*#__PURE__*/_jsx(Bell,{className:\"w-6 h-6\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs flex items-center justify-center rounded-full\",children:unreadCount>99?'99+':unreadCount})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-10,scale:0.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:0.95},transition:{duration:0.2},className:\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Th\\xF4ng b\\xE1o\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[unreadCount>0&&/*#__PURE__*/_jsx(\"button\",{onClick:markAllAsRead,className:\"text-sm text-blue-600 hover:text-blue-800\",title:\"\\u0110\\xE1nh d\\u1EA5u t\\u1EA5t c\\u1EA3 l\\xE0 \\u0111\\xE3 \\u0111\\u1ECDc\",children:/*#__PURE__*/_jsx(Check,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto max-h-96\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"})}):notifications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(Bell,{className:\"w-12 h-12 mb-2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ch\\u01B0a c\\xF3 th\\xF4ng b\\xE1o n\\xE0o\"})]}):notifications.map(notification=>{const notificationLink=getNotificationLink(notification);const NotificationWrapper=notificationLink?Link:'div';const wrapperProps=notificationLink?{to:notificationLink}:{};return/*#__PURE__*/_jsx(NotificationWrapper,{...wrapperProps,className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors block\n                        ${!notification.read?'bg-blue-50':''}`,onClick:()=>!notification.read&&markAsRead(notification.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mt-1\",children:getNotificationIcon(notification.type)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-900\",children:notification.title}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:format(new Date(notification.createdAt),'dd/MM/yyyy HH:mm')})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:notification.message})]})]})},notification.id);})})]})})]});};export default NotificationDropdown;","map":{"version":3,"names":["React","useState","useEffect","useRef","getToken","onMessage","messaging","Bell","Flag","AlertTriangle","Ban","MessageCircle","UserPlus","X","Check","ExternalLink","format","Link","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","NotificationDropdown","notifications","setNotifications","isOpen","setIsOpen","unreadCount","setUnreadCount","dropdownRef","loading","setLoading","userId","localStorage","getItem","initializeNotifications","permission","Notification","requestPermission","token","vapidKey","process","env","REACT_APP_FIREBASE_VAPID_KEY","console","log","fetch","method","headers","body","JSON","stringify","fcmToken","unsubscribe","payload","_payload$data","_payload$data2","newNotification","id","Date","now","toString","title","notification","message","type","data","parse","extraData","createdAt","toISOString","read","prev","error","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","markAsRead","notificationId","map","Math","max","markAllAsRead","getNotificationIcon","className","getNotificationLink","reportId","forumId","ref","children","onClick","div","initial","opacity","y","scale","animate","exit","transition","duration","length","notificationLink","NotificationWrapper","wrapperProps","to"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/component/admin/ui/NotificationDropdown.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { getToken, onMessage } from 'firebase/messaging';\r\nimport { messaging } from '../../../config/firebase'; // Import từ file config\r\nimport {\r\n  Bell,\r\n  Flag,\r\n  AlertTriangle,\r\n  Ban,\r\n  MessageCircle,\r\n  UserPlus,\r\n  X,\r\n  Check,\r\n  ExternalLink\r\n} from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { Link } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst NotificationDropdown = () => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const dropdownRef = useRef(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(() => {\r\n    const initializeNotifications = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Request notification permission\r\n        const permission = await Notification.requestPermission();\r\n        if (permission === 'granted') {\r\n          // Get FCM token\r\n          const token = await getToken(messaging, {\r\n            vapidKey: process.env.REACT_APP_FIREBASE_VAPID_KEY\r\n          });\r\n\r\n          if (token) {\r\n            console.log('FCM Token:', token);\r\n            // Register token with backend\r\n            await fetch('/api/v1/notifications/register-device', {\r\n              method: 'POST',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n              },\r\n              body: JSON.stringify({ fcmToken: token })\r\n            });\r\n          }\r\n\r\n          // Listen for foreground messages\r\n          const unsubscribe = onMessage(messaging, (payload) => {\r\n            console.log('Received foreground message:', payload);\r\n            const newNotification = {\r\n              id: Date.now().toString(),\r\n              title: payload.notification.title,\r\n              message: payload.notification.body,\r\n              type: payload.data?.type || 'DEFAULT',\r\n              data: JSON.parse(payload.data?.extraData || '{}'),\r\n              createdAt: new Date().toISOString(),\r\n              read: false\r\n            };\r\n\r\n            setNotifications(prev => [newNotification, ...prev]);\r\n            setUnreadCount(prev => prev + 1);\r\n          });\r\n\r\n          return () => {\r\n            unsubscribe();\r\n          };\r\n        }\r\n      } catch (error) {\r\n        console.error('Error initializing notifications:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeNotifications();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const markAsRead = async (notificationId) => {\r\n    setNotifications(prev =>\r\n      prev.map(notification =>\r\n        notification.id === notificationId\r\n          ? { ...notification, read: true }\r\n          : notification\r\n      )\r\n    );\r\n    setUnreadCount(prev => Math.max(0, prev - 1));\r\n  };\r\n\r\n  const markAllAsRead = () => {\r\n    setNotifications(prev =>\r\n      prev.map(notification => ({ ...notification, read: true }))\r\n    );\r\n    setUnreadCount(0);\r\n  };\r\n\r\n  const getNotificationIcon = (type) => {\r\n    switch (type) {\r\n      case 'FORUM_REPORT':\r\n        return <Flag className=\"w-5 h-5 text-red-500\" />;\r\n      case 'WARNING':\r\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />;\r\n      case 'USER_BANNED':\r\n        return <Ban className=\"w-5 h-5 text-purple-500\" />;\r\n      case 'NEW_COMMENT':\r\n        return <MessageCircle className=\"w-5 h-5 text-blue-500\" />;\r\n      case 'NEW_MEMBER':\r\n        return <UserPlus className=\"w-5 h-5 text-green-500\" />;\r\n      default:\r\n        return <Bell className=\"w-5 h-5 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const getNotificationLink = (notification) => {\r\n    switch (notification.type) {\r\n      case 'FORUM_REPORT':\r\n        return `/admin/forum-reports/${notification.data.reportId}`;\r\n      case 'USER_BANNED':\r\n        return `/admin/users/${notification.data.userId}`;\r\n      case 'NEW_COMMENT':\r\n        return `/forums/${notification.data.forumId}`;\r\n      case 'NEW_MEMBER':\r\n        return `/forums/${notification.data.forumId}/members`;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full\"\r\n      >\r\n        <Bell className=\"w-6 h-6\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs flex items-center justify-center rounded-full\">\r\n            {unreadCount > 99 ? '99+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -10, scale: 0.95 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200\"\r\n          >\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Thông báo</h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                {unreadCount > 0 && (\r\n                  <button\r\n                    onClick={markAllAsRead}\r\n                    className=\"text-sm text-blue-600 hover:text-blue-800\"\r\n                    title=\"Đánh dấu tất cả là đã đọc\"\r\n                  >\r\n                    <Check className=\"w-5 h-5\" />\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => setIsOpen(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <X className=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"overflow-y-auto max-h-96\">\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\" />\r\n                </div>\r\n              ) : notifications.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center py-8 text-gray-500\">\r\n                  <Bell className=\"w-12 h-12 mb-2\" />\r\n                  <p>Chưa có thông báo nào</p>\r\n                </div>\r\n              ) : (\r\n                notifications.map((notification) => {\r\n                  const notificationLink = getNotificationLink(notification);\r\n                  const NotificationWrapper = notificationLink ? Link : 'div';\r\n                  const wrapperProps = notificationLink ? { to: notificationLink } : {};\r\n\r\n                  return (\r\n                    <NotificationWrapper\r\n                      key={notification.id}\r\n                      {...wrapperProps}\r\n                      className={`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors block\r\n                        ${!notification.read ? 'bg-blue-50' : ''}`}\r\n                      onClick={() => !notification.read && markAsRead(notification.id)}\r\n                    >\r\n                      <div className=\"flex gap-3\">\r\n                        <div className=\"flex-shrink-0 mt-1\">\r\n                          {getNotificationIcon(notification.type)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <p className=\"text-sm font-semibold text-gray-900\">\r\n                              {notification.title}\r\n                            </p>\r\n                            <span className=\"text-xs text-gray-500\">\r\n                              {format(new Date(notification.createdAt), 'dd/MM/yyyy HH:mm')}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"mt-1 text-sm text-gray-600\">\r\n                            {notification.message}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </NotificationWrapper>\r\n                  );\r\n                })\r\n              )}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationDropdown;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}