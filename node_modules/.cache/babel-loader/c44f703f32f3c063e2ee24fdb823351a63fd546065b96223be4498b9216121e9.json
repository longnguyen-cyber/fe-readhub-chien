{"ast":null,"code":"var _s = $RefreshSig$();\n// hooks/useBookmarks.js\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// hooks/useBookmarks.js\nexport const useBookmarks = (userId, bookId) => {\n  _s();\n  const [bookmarks, setBookmarks] = useState([]);\n  const fetchBookmarks = async () => {\n    if (!userId || !bookId) return;\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/bookmark/user/${userId}/book/${bookId}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.data.success) {\n        setBookmarks(response.data.data || []);\n      }\n    } catch (err) {\n      console.error('Error fetching bookmarks:', err);\n    }\n  };\n  const addBookmark = async location => {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/bookmark`, {\n        userId,\n        bookId,\n        location\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.data.success) {\n        await fetchBookmarks();\n      }\n    } catch (err) {\n      console.error('Error adding bookmark:', err);\n      throw err;\n    }\n  };\n  const removeBookmark = async bookmarkId => {\n    try {\n      const response = await axios.delete(`${process.env.REACT_APP_API_BASE_URL}/bookmark/${bookmarkId}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.data.success) {\n        setBookmarks(bookmarks.filter(b => b.bookmarkId !== bookmarkId));\n      }\n    } catch (err) {\n      console.error('Error removing bookmark:', err);\n      throw err;\n    }\n  };\n  useEffect(() => {\n    fetchBookmarks();\n  }, [userId, bookId]);\n  return {\n    bookmarks,\n    addBookmark,\n    removeBookmark\n  };\n};\n_s(useBookmarks, \"GYcTr9yW8Gu+CnWqN7rlwR8uEC0=\");","map":{"version":3,"names":["useState","useEffect","axios","useBookmarks","userId","bookId","_s","bookmarks","setBookmarks","fetchBookmarks","response","get","process","env","REACT_APP_API_BASE_URL","headers","Authorization","localStorage","getItem","data","success","err","console","error","addBookmark","location","post","removeBookmark","bookmarkId","delete","filter","b"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/read_book/useBookmarks.js"],"sourcesContent":["// hooks/useBookmarks.js\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\n// hooks/useBookmarks.js\r\nexport const useBookmarks = (userId, bookId) => {\r\n  const [bookmarks, setBookmarks] = useState([]);\r\n\r\n  const fetchBookmarks = async () => {\r\n    if (!userId || !bookId) return;\r\n    try {\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_BASE_URL}/bookmark/user/${userId}/book/${bookId}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n      \r\n      if (response.data.success) {\r\n        setBookmarks(response.data.data || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching bookmarks:', err);\r\n    }\r\n  };\r\n\r\n  const addBookmark = async (location) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_BASE_URL}/bookmark`,\r\n        {\r\n          userId,\r\n          bookId,\r\n          location\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n      if (response.data.success) {\r\n        await fetchBookmarks();\r\n      }\r\n    } catch (err) {\r\n      console.error('Error adding bookmark:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const removeBookmark = async (bookmarkId) => {\r\n    try {\r\n      const response = await axios.delete(\r\n        `${process.env.REACT_APP_API_BASE_URL}/bookmark/${bookmarkId}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        }\r\n      );\r\n      if (response.data.success) {\r\n        setBookmarks(bookmarks.filter(b => b.bookmarkId !== bookmarkId));\r\n      }\r\n    } catch (err) {\r\n      console.error('Error removing bookmark:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBookmarks();\r\n  }, [userId, bookId]);\r\n\r\n  return { bookmarks, addBookmark, removeBookmark };\r\n};\r\n"],"mappings":";AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAO,MAAMC,YAAY,GAAGA,CAACC,MAAM,EAAEC,MAAM,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMS,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACL,MAAM,IAAI,CAACC,MAAM,EAAE;IACxB,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAC9B,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,kBAAkBV,MAAM,SAASC,MAAM,EAAE,EAC9E;QACEU,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QACxD;MACF,CACF,CAAC;MAED,IAAIR,QAAQ,CAACS,IAAI,CAACC,OAAO,EAAE;QACzBZ,YAAY,CAACE,QAAQ,CAACS,IAAI,CAACA,IAAI,IAAI,EAAE,CAAC;MACxC;IACF,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IACjD;EACF,CAAC;EAED,MAAMG,WAAW,GAAG,MAAOC,QAAQ,IAAK;IACtC,IAAI;MACF,MAAMf,QAAQ,GAAG,MAAMR,KAAK,CAACwB,IAAI,CAC/B,GAAGd,OAAO,CAACC,GAAG,CAACC,sBAAsB,WAAW,EAChD;QACEV,MAAM;QACNC,MAAM;QACNoB;MACF,CAAC,EACD;QACEV,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QACxD;MACF,CACF,CAAC;MACD,IAAIR,QAAQ,CAACS,IAAI,CAACC,OAAO,EAAE;QACzB,MAAMX,cAAc,CAAC,CAAC;MACxB;IACF,CAAC,CAAC,OAAOY,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC5C,MAAMA,GAAG;IACX;EACF,CAAC;EAED,MAAMM,cAAc,GAAG,MAAOC,UAAU,IAAK;IAC3C,IAAI;MACF,MAAMlB,QAAQ,GAAG,MAAMR,KAAK,CAAC2B,MAAM,CACjC,GAAGjB,OAAO,CAACC,GAAG,CAACC,sBAAsB,aAAac,UAAU,EAAE,EAC9D;QACEb,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QACxD;MACF,CACF,CAAC;MACD,IAAIR,QAAQ,CAACS,IAAI,CAACC,OAAO,EAAE;QACzBZ,YAAY,CAACD,SAAS,CAACuB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACH,UAAU,KAAKA,UAAU,CAAC,CAAC;MAClE;IACF,CAAC,CAAC,OAAOP,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEF,GAAG,CAAC;MAC9C,MAAMA,GAAG;IACX;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdQ,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACL,MAAM,EAAEC,MAAM,CAAC,CAAC;EAEpB,OAAO;IAAEE,SAAS;IAAEiB,WAAW;IAAEG;EAAe,CAAC;AACnD,CAAC;AAACrB,EAAA,CAvEWH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}