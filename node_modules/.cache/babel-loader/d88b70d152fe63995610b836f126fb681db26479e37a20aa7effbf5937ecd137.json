{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\description_book\\\\views\\\\DescriptionBook.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { BookOpen, MessageCircle, Share2, BookmarkPlus } from 'lucide-react';\nimport { Card, CardContent, Button, Typography, Chip, Divider, Box, Container, Grid, CircularProgress } from '@mui/material';\nimport { colors } from '../../../constants';\nimport axios from 'axios';\nimport HeaderComponent from '../../../component/header/HeaderComponent';\nimport BookReviews from './BookReviews';\nimport LoginDialog from '../../../component/dialogs/LoginDialog';\nimport ReviewDialog from './ReviewDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DescriptionBook() {\n  _s();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [user, setUser] = useState(null);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    bookId,\n    bookTitle\n  } = location.state || {};\n  const [showLoginDialog, setShowLoginDialog] = useState(false);\n  const [showReviewDialog, setShowReviewDialog] = useState(false);\n  const [shouldRefreshReviews, setShouldRefreshReviews] = useState(0);\n  const [isSaved, setIsSaved] = useState(false);\n  const handleLogin = () => {\n    setShowLoginDialog(false);\n    navigate('/login');\n  };\n  const checkBookSaved = async () => {\n    if (!user) return;\n    try {\n      const response = await axios.get(`http://localhost:8080/api/v1/saved-books/user/${user.userId}/${bookId}/is-saved`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.data.success) {\n        setIsSaved(response.data.data);\n      }\n    } catch (error) {\n      console.error('Error checking saved status:', error);\n    }\n  };\n  const handleSaveBook = async () => {\n    if (!user) {\n      setShowLoginDialog(true);\n      return;\n    }\n    try {\n      if (isSaved) {\n        // Unsave book\n        const response = await axios.delete(`http://localhost:8080/api/v1/saved-books/user/${user.userId}/book/${bookId}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.data.success) {\n          setIsSaved(false);\n          // Có thể thêm toast hoặc notification ở đây\n        }\n      } else {\n        // Save book\n        const response = await axios.post(`http://localhost:8080/api/v1/saved-books/user/${user.userId}/book/${bookId}`, null, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.data.success) {\n          setIsSaved(true);\n          // Có thể thêm toast hoặc notification ở đây\n        }\n      }\n    } catch (error) {\n      console.error('Error saving/unsaving book:', error);\n      // Có thể thêm error toast ở đây\n    }\n  };\n  useEffect(() => {\n    const getUser = async () => {\n      if (!localStorage.getItem('token')) return;\n      try {\n        const response = await axios.get('http://localhost:8080/api/v1/user/profile', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        setUser(response.data);\n        // Kiểm tra trạng thái saved ngay sau khi có user data\n        try {\n          const savedResponse = await axios.get(`http://localhost:8080/api/v1/saved-books/user/${response.data.userId}/${bookId}/is-saved`, {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (savedResponse.data.success) {\n            setIsSaved(savedResponse.data.data);\n          }\n        } catch (error) {\n          console.error('Error checking saved status:', error);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const fetchBookDetails = async () => {\n      try {\n        const response = await fetch(`https://gutendex.com/books/${bookId}/`);\n        if (!response.ok) throw new Error('Failed to fetch book details');\n        const data = await response.json();\n        setBookDetails(data);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch book details');\n        setLoading(false);\n      }\n    };\n    const handleResize = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    fetchBookDetails();\n    getUser(); // Không cần .then nữa vì đã xử lý trong hàm getUser\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [bookId]); // Thêm bookId vào dependencies\n\n  if (loading) return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n      size: 24\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 7\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n      color: 'error.main'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      bgcolor: colors.themeLight.color060d13,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(HeaderComponent, {\n      centerContent: bookTitle,\n      showSearch: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        pt: 12,\n        pb: 6\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 4,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'sticky',\n              top: 24\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sx: {\n                bgcolor: 'background.paper',\n                boxShadow: theme => `0 8px 24px ${theme.palette.common.black}20`\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                sx: {\n                  p: 0,\n                  '&:last-child': {\n                    pb: 0\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    position: 'relative',\n                    '&:hover .overlay': {\n                      opacity: 1\n                    }\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: bookDetails.formats['image/jpeg'],\n                    alt: bookDetails.title,\n                    style: {\n                      width: '100%',\n                      height: 'auto',\n                      display: 'block'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    className: \"overlay\",\n                    sx: {\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      right: 0,\n                      bottom: 0,\n                      bgcolor: 'rgba(0,0,0,0.4)',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      opacity: 0,\n                      transition: 'opacity 0.3s'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      startIcon: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 36\n                      }, this),\n                      onClick: () => navigate('/read-book-screen', {\n                        state: {\n                          bookId,\n                          bookTitle\n                        }\n                      }),\n                      sx: {\n                        bgcolor: 'white',\n                        color: 'text.primary',\n                        '&:hover': {\n                          bgcolor: 'grey.100'\n                        }\n                      },\n                      children: \"Read Now\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            sx: {\n              bgcolor: 'background.paper',\n              boxShadow: theme => `0 8px 24px ${theme.palette.common.black}20`\n            },\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              sx: {\n                paddingLeft: 4,\n                paddingRight: 4\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h4\",\n                    component: \"h1\",\n                    gutterBottom: true,\n                    children: bookDetails.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    color: \"text.secondary\",\n                    children: [\"by\", ' ', bookDetails.authors.map(author => author.name).join(', ')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  startIcon: /*#__PURE__*/_jsxDEV(MessageCircle, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 32\n                  }, this),\n                  onClick: () => {\n                    if (!user) {\n                      setShowLoginDialog(true);\n                    } else navigate('/create-forum', {\n                      state: {\n                        bookId,\n                        bookTitle,\n                        authors: bookDetails.authors.map(author => author.name).join(', '),\n                        defaultCoverImage: bookDetails.formats['image/jpeg'],\n                        subjects: bookDetails.subjects\n                      }\n                    });\n                  },\n                  sx: {\n                    bgcolor: 'primary.main'\n                  },\n                  children: \"Create Forum\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 3,\n                sx: {\n                  mb: 3\n                },\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 8,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Genres\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 1\n                    },\n                    children: bookDetails.subjects.map((subject, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                      label: subject,\n                      sx: {\n                        bgcolor: 'white',\n                        color: 'primary.main',\n                        border: `1px solid`,\n                        borderColor: 'primary.main'\n                      }\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 324,\n                      columnNumber: 25\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 4,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Language\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    color: \"text.secondary\",\n                    children: bookDetails.languages.map(lang => lang.toUpperCase()).join(', ')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 8,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Publisher\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    color: \"text.secondary\",\n                    children: \"Project Gutenberg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 4,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Downloads\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    color: \"text.secondary\",\n                    children: bookDetails.download_count.toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 3\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 2,\n                  mt: 3\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  startIcon: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 32\n                  }, this),\n                  onClick: () => navigate('/read-book-screen', {\n                    state: {\n                      bookId,\n                      bookTitle\n                    }\n                  }),\n                  fullWidth: true,\n                  children: \"Read Book\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(BookmarkPlus, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 32\n                  }, this),\n                  onClick: handleSaveBook,\n                  fullWidth: true,\n                  children: isSaved ? 'Unsave Book' : 'Save for Later'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Share2, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 57\n                  }, this),\n                  fullWidth: true,\n                  children: \"Share\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookReviews, {\n        bookId: bookId,\n        onWriteReview: () => {\n          if (!user) {\n            setShowLoginDialog(true);\n          } else {\n            setShowReviewDialog(true);\n          }\n        },\n        refreshTrigger: shouldRefreshReviews,\n        currentUser: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoginDialog, {\n      open: showLoginDialog,\n      onClose: () => setShowLoginDialog(false),\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReviewDialog, {\n      open: showReviewDialog,\n      onClose: () => {\n        setShowReviewDialog(false);\n      },\n      onReviewSubmit: () => {\n        setShowReviewDialog(false);\n        setShouldRefreshReviews(prevState => prevState + 1); // Tăng giá trị để trigger refresh\n      },\n      bookId: bookId,\n      currentUser: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n}\n_s(DescriptionBook, \"25wGW5Pna2LjSnKlEfbec/6iC7I=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = DescriptionBook;\nvar _c;\n$RefreshReg$(_c, \"DescriptionBook\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","BookOpen","MessageCircle","Share2","BookmarkPlus","Card","CardContent","Button","Typography","Chip","Divider","Box","Container","Grid","CircularProgress","colors","axios","HeaderComponent","BookReviews","LoginDialog","ReviewDialog","jsxDEV","_jsxDEV","DescriptionBook","_s","windowSize","setWindowSize","width","window","innerWidth","height","innerHeight","user","setUser","bookDetails","setBookDetails","loading","setLoading","error","setError","navigate","location","bookId","bookTitle","state","showLoginDialog","setShowLoginDialog","showReviewDialog","setShowReviewDialog","shouldRefreshReviews","setShouldRefreshReviews","isSaved","setIsSaved","handleLogin","checkBookSaved","response","get","userId","headers","Authorization","localStorage","getItem","data","success","console","handleSaveBook","delete","post","getUser","savedResponse","fetchBookDetails","fetch","ok","Error","json","err","handleResize","addEventListener","removeEventListener","sx","display","alignItems","justifyContent","minHeight","children","size","fileName","_jsxFileName","lineNumber","columnNumber","color","bgcolor","themeLight","color060d13","flexDirection","centerContent","showSearch","pt","pb","container","spacing","item","xs","md","position","top","boxShadow","theme","palette","common","black","p","opacity","src","formats","alt","title","style","className","left","right","bottom","transition","variant","startIcon","onClick","paddingLeft","paddingRight","mb","component","gutterBottom","authors","map","author","name","join","defaultCoverImage","subjects","flexWrap","gap","subject","index","label","border","borderColor","languages","lang","toUpperCase","download_count","toLocaleString","my","mt","fullWidth","onWriteReview","refreshTrigger","currentUser","open","onClose","onLogin","onReviewSubmit","prevState","_c","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/description_book/views/DescriptionBook.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {useNavigate, useLocation} from 'react-router-dom'\r\nimport {BookOpen, MessageCircle, Share2, BookmarkPlus} from 'lucide-react'\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  Typography,\r\n  Chip,\r\n  Divider,\r\n  Box,\r\n  Container,\r\n  Grid,\r\n  CircularProgress,\r\n} from '@mui/material'\r\nimport {colors} from '../../../constants'\r\nimport axios from 'axios'\r\nimport HeaderComponent from '../../../component/header/HeaderComponent'\r\nimport BookReviews from './BookReviews'\r\nimport LoginDialog from '../../../component/dialogs/LoginDialog'\r\nimport ReviewDialog from './ReviewDialog'\r\n\r\nexport default function DescriptionBook() {\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  })\r\n  const [user, setUser] = useState(null)\r\n  const [bookDetails, setBookDetails] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const {bookId, bookTitle} = location.state || {}\r\n  const [showLoginDialog, setShowLoginDialog] = useState(false)\r\n  const [showReviewDialog, setShowReviewDialog] = useState(false)\r\n  const [shouldRefreshReviews, setShouldRefreshReviews] = useState(0)\r\n  const [isSaved, setIsSaved] = useState(false)\r\n\r\n  const handleLogin = () => {\r\n    setShowLoginDialog(false)\r\n    navigate('/login')\r\n  }\r\n  const checkBookSaved = async () => {\r\n    if (!user) return\r\n    try {\r\n      const response = await axios.get(\r\n        `http://localhost:8080/api/v1/saved-books/user/${user.userId}/${bookId}/is-saved`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      if (response.data.success) {\r\n        setIsSaved(response.data.data)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking saved status:', error)\r\n    }\r\n  }\r\n  const handleSaveBook = async () => {\r\n    if (!user) {\r\n      setShowLoginDialog(true)\r\n      return\r\n    }\r\n\r\n    try {\r\n      if (isSaved) {\r\n        // Unsave book\r\n        const response = await axios.delete(\r\n          `http://localhost:8080/api/v1/saved-books/user/${user.userId}/book/${bookId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        if (response.data.success) {\r\n          setIsSaved(false)\r\n          // Có thể thêm toast hoặc notification ở đây\r\n        }\r\n      } else {\r\n        // Save book\r\n        const response = await axios.post(\r\n          `http://localhost:8080/api/v1/saved-books/user/${user.userId}/book/${bookId}`,\r\n          null,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        if (response.data.success) {\r\n          setIsSaved(true)\r\n          // Có thể thêm toast hoặc notification ở đây\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving/unsaving book:', error)\r\n      // Có thể thêm error toast ở đây\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      if (!localStorage.getItem('token')) return\r\n      try {\r\n        const response = await axios.get(\r\n          'http://localhost:8080/api/v1/user/profile',\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        setUser(response.data)\r\n        // Kiểm tra trạng thái saved ngay sau khi có user data\r\n        try {\r\n          const savedResponse = await axios.get(\r\n            `http://localhost:8080/api/v1/saved-books/user/${response.data.userId}/${bookId}/is-saved`,\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n              },\r\n            },\r\n          )\r\n          if (savedResponse.data.success) {\r\n            setIsSaved(savedResponse.data.data)\r\n          }\r\n        } catch (error) {\r\n          console.error('Error checking saved status:', error)\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    }\r\n\r\n    const fetchBookDetails = async () => {\r\n      try {\r\n        const response = await fetch(`https://gutendex.com/books/${bookId}/`)\r\n        if (!response.ok) throw new Error('Failed to fetch book details')\r\n        const data = await response.json()\r\n        setBookDetails(data)\r\n        setLoading(false)\r\n      } catch (err) {\r\n        setError('Failed to fetch book details')\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    const handleResize = () => {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n\r\n    fetchBookDetails()\r\n    getUser() // Không cần .then nữa vì đã xử lý trong hàm getUser\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [bookId]) // Thêm bookId vào dependencies\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n        }}>\r\n        <CircularProgress size={24} />\r\n      </Box>\r\n    )\r\n\r\n  if (error)\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          color: 'error.main',\r\n        }}>\r\n        {error}\r\n      </Box>\r\n    )\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        bgcolor: colors.themeLight.color060d13,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n      <HeaderComponent\r\n        centerContent={bookTitle}\r\n        showSearch={false}\r\n      />\r\n\r\n      <Container sx={{pt: 12, pb: 6}}>\r\n        <Grid container spacing={4}>\r\n          <Grid item xs={12} md={4}>\r\n            <Box sx={{position: 'sticky', top: 24}}>\r\n              <Card\r\n                sx={{\r\n                  bgcolor: 'background.paper',\r\n                  boxShadow: theme =>\r\n                    `0 8px 24px ${theme.palette.common.black}20`,\r\n                }}>\r\n                <CardContent sx={{p: 0, '&:last-child': {pb: 0}}}>\r\n                  <Box\r\n                    sx={{\r\n                      position: 'relative',\r\n                      '&:hover .overlay': {opacity: 1},\r\n                    }}>\r\n                    <img\r\n                      src={bookDetails.formats['image/jpeg']}\r\n                      alt={bookDetails.title}\r\n                      style={{\r\n                        width: '100%',\r\n                        height: 'auto',\r\n                        display: 'block',\r\n                      }}\r\n                    />\r\n                    <Box\r\n                      className='overlay'\r\n                      sx={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        bgcolor: 'rgba(0,0,0,0.4)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        opacity: 0,\r\n                        transition: 'opacity 0.3s',\r\n                      }}>\r\n                      <Button\r\n                        variant='contained'\r\n                        startIcon={<BookOpen />}\r\n                        onClick={() =>\r\n                          navigate('/read-book-screen', {\r\n                            state: {bookId, bookTitle},\r\n                          })\r\n                        }\r\n                        sx={{\r\n                          bgcolor: 'white',\r\n                          color: 'text.primary',\r\n                          '&:hover': {bgcolor: 'grey.100'},\r\n                        }}>\r\n                        Read Now\r\n                      </Button>\r\n                    </Box>\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={8}>\r\n            <Card\r\n              sx={{\r\n                bgcolor: 'background.paper',\r\n                boxShadow: theme =>\r\n                  `0 8px 24px ${theme.palette.common.black}20`,\r\n              }}>\r\n              <CardContent sx={{paddingLeft: 4, paddingRight: 4}}>\r\n                <Box\r\n                  sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'flex-start',\r\n                    mb: 1,\r\n                  }}>\r\n                  <Box>\r\n                    <Typography variant='h4' component='h1' gutterBottom>\r\n                      {bookDetails.title}\r\n                    </Typography>\r\n                    <Typography variant='h6' color='text.secondary'>\r\n                      by{' '}\r\n                      {bookDetails.authors\r\n                        .map(author => author.name)\r\n                        .join(', ')}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Button\r\n                    variant='contained'\r\n                    startIcon={<MessageCircle />}\r\n                    onClick={() => {\r\n                      if (!user) {\r\n                        setShowLoginDialog(true)\r\n                      } else\r\n                        navigate('/create-forum', {\r\n                          state: {\r\n                            bookId,\r\n                            bookTitle,\r\n                            authors: bookDetails.authors\r\n                              .map(author => author.name)\r\n                              .join(', '),\r\n                            defaultCoverImage:\r\n                              bookDetails.formats['image/jpeg'],\r\n                            subjects: bookDetails.subjects,\r\n                          },\r\n                        })\r\n                    }}\r\n                    sx={{bgcolor: 'primary.main'}}>\r\n                    Create Forum\r\n                  </Button>\r\n                </Box>\r\n\r\n                <Grid container spacing={3} sx={{mb: 3}}>\r\n                  <Grid item xs={12} md={8}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Genres\r\n                    </Typography>\r\n                    <Box sx={{display: 'flex', flexWrap: 'wrap', gap: 1}}>\r\n                      {bookDetails.subjects.map((subject, index) => (\r\n                        <Chip\r\n                          key={index}\r\n                          label={subject}\r\n                          sx={{\r\n                            bgcolor: 'white',\r\n                            color: 'primary.main',\r\n                            border: `1px solid`,\r\n                            borderColor: 'primary.main',\r\n                          }}\r\n                        />\r\n                      ))}\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={4}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Language\r\n                    </Typography>\r\n                    <Typography color='text.secondary'>\r\n                      {bookDetails.languages\r\n                        .map(lang => lang.toUpperCase())\r\n                        .join(', ')}\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={8}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Publisher\r\n                    </Typography>\r\n                    <Typography color='text.secondary'>\r\n                      Project Gutenberg\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={4}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Downloads\r\n                    </Typography>\r\n                    <Typography color='text.secondary'>\r\n                      {bookDetails.download_count.toLocaleString()}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Divider sx={{my: 3}} />\r\n                <Box sx={{display: 'flex', gap: 2, mt: 3}}>\r\n                  <Button\r\n                    variant='contained'\r\n                    startIcon={<BookOpen />}\r\n                    onClick={() =>\r\n                      navigate('/read-book-screen', {\r\n                        state: {bookId, bookTitle},\r\n                      })\r\n                    }\r\n                    fullWidth>\r\n                    Read Book\r\n                  </Button>\r\n                  <Button\r\n                    variant='outlined'\r\n                    startIcon={<BookmarkPlus />}\r\n                    onClick={handleSaveBook}\r\n                    fullWidth>\r\n                    {isSaved ? 'Unsave Book' : 'Save for Later'}\r\n                  </Button>\r\n                  <Button variant='outlined' startIcon={<Share2 />} fullWidth>\r\n                    Share\r\n                  </Button>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <BookReviews\r\n          bookId={bookId}\r\n          onWriteReview={() => {\r\n            if (!user) {\r\n              setShowLoginDialog(true)\r\n            } else {\r\n              setShowReviewDialog(true)\r\n            }\r\n          }}\r\n          refreshTrigger={shouldRefreshReviews}\r\n          currentUser={user}\r\n        />\r\n      </Container>\r\n      <LoginDialog\r\n        open={showLoginDialog}\r\n        onClose={() => setShowLoginDialog(false)}\r\n        onLogin={handleLogin}\r\n      />\r\n\r\n      <ReviewDialog\r\n        open={showReviewDialog}\r\n        onClose={() => {\r\n          setShowReviewDialog(false)\r\n        }}\r\n        onReviewSubmit={() => {\r\n          setShowReviewDialog(false)\r\n          setShouldRefreshReviews(prevState => prevState + 1) // Tăng giá trị để trigger refresh\r\n        }}\r\n        bookId={bookId}\r\n        currentUser={user}\r\n      />\r\n    </Box>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}