{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\read_book\\\\views\\\\ReadBookScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { load } from 'cheerio';\nimport Box from '@mui/material/Box';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReadBookScreen() {\n  _s();\n  const [chapters, setChapters] = useState([]);\n  const [currentChapter, setCurrentChapter] = useState('');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Lấy nội dung HTML của trang\n    axios.get('/api/proxy?url=https://www.gutenberg.org/cache/epub/145/pg145-images.html').then(response => {\n      const $ = load(response.data);\n\n      // Trích xuất danh sách các chương từ các thẻ TR và TD\n      const chapterLinks = [];\n      $('table.autotable tr').each((index, element) => {\n        const $element = $(element);\n        const $td = $element.find('td');\n        const $a = $td.find('a');\n        const href = $a.attr('href');\n        const text = $a.text();\n        if (href && text) {\n          // Kiểm tra href và text không phải là undefined\n          chapterLinks.push({\n            href,\n            text\n          });\n        }\n      });\n      setChapters(chapterLinks);\n\n      // Lấy nội dung chương đầu tiên nếu chapterLinks không rỗng\n      if (chapterLinks.length > 0) {\n        fetchChapterContent(chapterLinks[0].href);\n      } else {\n        setLoading(false);\n      }\n    }).catch(error => {\n      console.error('Error fetching book content:', error);\n      setLoading(false);\n    });\n  }, []);\n  const fetchChapterContent = chapterHref => {\n    setLoading(true);\n    axios.get(`/api/proxy?url=https://www.gutenberg.org/cache/epub/145/pg145-images.html${chapterHref}`).then(response => {\n      const $ = load(response.data);\n      const chapterContent = [];\n      $('.chapter').each((index, element) => {\n        chapterContent.push($(element).html());\n      });\n      setCurrentChapter(chapterContent.join(''));\n      setLoading(false);\n    }).catch(error => {\n      console.error('Error fetching chapter content:', error);\n      setLoading(false);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...styles.header\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Book Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: chapters.map((chapter, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => fetchChapterContent(chapter.href),\n          children: chapter.text\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: currentChapter\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(ReadBookScreen, \"+Q/UHqTIyNXSTu8WSJ0/81nPJ3A=\");\n_c = ReadBookScreen;\nconst styles = {\n  header: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    width: '100%',\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    padding: '10px',\n    borderBottom: '1px solid #ddd',\n    zIndex: 1000\n  }\n};\nexport default ReadBookScreen;\nvar _c;\n$RefreshReg$(_c, \"ReadBookScreen\");","map":{"version":3,"names":["React","useState","useEffect","axios","load","Box","CircularProgress","jsxDEV","_jsxDEV","ReadBookScreen","_s","chapters","setChapters","currentChapter","setCurrentChapter","loading","setLoading","get","then","response","$","data","chapterLinks","each","index","element","$element","$td","find","$a","href","attr","text","push","length","fetchChapterContent","catch","error","console","chapterHref","chapterContent","html","join","children","style","styles","header","fileName","_jsxFileName","lineNumber","columnNumber","map","chapter","onClick","sx","display","justifyContent","alignItems","height","dangerouslySetInnerHTML","__html","_c","position","top","left","right","width","backgroundColor","padding","borderBottom","zIndex","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/read_book/views/ReadBookScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { load } from 'cheerio';\r\nimport Box from '@mui/material/Box';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nfunction ReadBookScreen() {\r\n  const [chapters, setChapters] = useState([]);\r\n  const [currentChapter, setCurrentChapter] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Lấy nội dung HTML của trang\r\n    axios.get('/api/proxy?url=https://www.gutenberg.org/cache/epub/145/pg145-images.html')\r\n      .then(response => {\r\n        const $ = load(response.data);\r\n\r\n        // Trích xuất danh sách các chương từ các thẻ TR và TD\r\n        const chapterLinks = [];\r\n        $('table.autotable tr').each((index, element) => {\r\n          const $element = $(element);\r\n          const $td = $element.find('td');\r\n          const $a = $td.find('a');\r\n          const href = $a.attr('href');\r\n          const text = $a.text();\r\n          if (href && text) { // Kiểm tra href và text không phải là undefined\r\n            chapterLinks.push({ href, text });\r\n          }\r\n        });\r\n        setChapters(chapterLinks);\r\n\r\n        // Lấy nội dung chương đầu tiên nếu chapterLinks không rỗng\r\n        if (chapterLinks.length > 0) {\r\n          fetchChapterContent(chapterLinks[0].href);\r\n        } else {\r\n          setLoading(false);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching book content:', error);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const fetchChapterContent = (chapterHref) => {\r\n    setLoading(true);\r\n    axios.get(`/api/proxy?url=https://www.gutenberg.org/cache/epub/145/pg145-images.html${chapterHref}`)\r\n      .then(response => {\r\n        const $ = load(response.data);\r\n        const chapterContent = [];\r\n        $('.chapter').each((index, element) => {\r\n          chapterContent.push($(element).html());\r\n        });\r\n        setCurrentChapter(chapterContent.join(''));\r\n        setLoading(false);\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching chapter content:', error);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ ...styles.header }}>\r\n        <h1>Book Title</h1>\r\n      </div>\r\n      <div>\r\n        <div>\r\n          {chapters.map((chapter, index) => (\r\n            <button key={index} onClick={() => fetchChapterContent(chapter.href)}>\r\n              {chapter.text}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        {loading ? (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\r\n            <CircularProgress />\r\n          </Box>\r\n        ) : (\r\n          <div dangerouslySetInnerHTML={{ __html: currentChapter }} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  header: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    width: '100%',\r\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n    padding: '10px',\r\n    borderBottom: '1px solid #ddd',\r\n    zIndex: 1000,\r\n  },\r\n};\r\n\r\nexport default ReadBookScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}