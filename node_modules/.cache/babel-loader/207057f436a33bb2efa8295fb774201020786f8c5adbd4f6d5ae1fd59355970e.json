{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import'./App.css';import{images,colors}from'./constants';import{ListBook}from'./pages';import BookshelfSection from'./component/bookshelf/BookshelfSection';import{listOptions}from'./component/set_data/SetData';import axios from'axios';import{Avatar,Button,Menu,MenuItem,ListItemIcon}from'@mui/material';import{AccountCircle,ExitToApp,Settings,Forum}from'@mui/icons-material';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import HeaderComponent from'./component/header/HeaderComponent';import BookRecommendations from'./component/recommendations/BookRecommendations';import Banner from'./component/banner/Banner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BOOKSHELVES=[{title:'Mystery & Detective',topic:'detective',backgroundColor:'#EF4444'},{title:'Science Fiction & Fantasy',topic:'science-fiction',backgroundColor:'#8B5CF6'},{title:\"Children's Literature\",topic:'children',backgroundColor:'#10B981'}];function App(){const[windowSize,setWindowSize]=useState({width:window.innerWidth,height:window.innerHeight});const[searchTerm,setSearchTerm]=useState('');const navigate=useNavigate();const[anchorEl,setAnchorEl]=useState(null);const[user,setUser]=useState(null);const open=Boolean(anchorEl);const handleSearchChange=newSearchTerm=>{setSearchTerm(newSearchTerm);};const handleClick=event=>{setAnchorEl(event.currentTarget);};const handleClose=()=>{setAnchorEl(null);};const handleLogout=()=>{handleClose();localStorage.removeItem('token');setUser(null);navigate('/');toast.success('Logout successfully');};const getUser=async()=>{try{const response=await axios.get('http://localhost:8080/api/v1/user/profile',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setUser(response.data);}catch(error){console.error(error);}};useEffect(()=>{const handleResize=()=>{setWindowSize({width:window.innerWidth,height:window.innerHeight});};getUser();window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App min-h-screen bg-[#060d13] flex flex-col\",children:[/*#__PURE__*/_jsx(HeaderComponent,{onSearchChange:handleSearchChange,searchTerm:searchTerm,showSearch:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto mt-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:searchTerm?'hidden':'block',children:[/*#__PURE__*/_jsx(Banner,{}),user&&/*#__PURE__*/_jsx(BookRecommendations,{windowSize:windowSize,user:user}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white\",children:BOOKSHELVES.map(shelf=>/*#__PURE__*/_jsx(BookshelfSection,{windowSize:windowSize,title:shelf.title,topic:shelf.topic,backgroundColor:shelf.backgroundColor},shelf.topic))})]}),searchTerm&&/*#__PURE__*/_jsx(\"div\",{className:searchTerm?'block':'hidden',children:/*#__PURE__*/_jsx(ListBook,{searchTerm:searchTerm,windowSize:windowSize})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","images","colors","ListBook","BookshelfSection","listOptions","axios","Avatar","Button","Menu","MenuItem","ListItemIcon","AccountCircle","ExitToApp","Settings","Forum","toast","HeaderComponent","BookRecommendations","Banner","jsx","_jsx","jsxs","_jsxs","BOOKSHELVES","title","topic","backgroundColor","App","windowSize","setWindowSize","width","window","innerWidth","height","innerHeight","searchTerm","setSearchTerm","navigate","anchorEl","setAnchorEl","user","setUser","open","Boolean","handleSearchChange","newSearchTerm","handleClick","event","currentTarget","handleClose","handleLogout","localStorage","removeItem","success","getUser","response","get","headers","Authorization","getItem","data","error","console","handleResize","addEventListener","removeEventListener","className","children","onSearchChange","showSearch","map","shelf"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {Link, useNavigate} from 'react-router-dom'\r\nimport './App.css'\r\nimport {images, colors} from './constants'\r\nimport {ListBook} from './pages'\r\nimport BookshelfSection from './component/bookshelf/BookshelfSection'\r\nimport {listOptions} from './component/set_data/SetData'\r\nimport axios from 'axios'\r\nimport {Avatar, Button, Menu, MenuItem, ListItemIcon} from '@mui/material'\r\nimport {AccountCircle, ExitToApp, Settings, Forum} from '@mui/icons-material'\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport HeaderComponent from './component/header/HeaderComponent'\r\nimport BookRecommendations from './component/recommendations/BookRecommendations'\r\nimport Banner from './component/banner/Banner'\r\n\r\nconst BOOKSHELVES = [\r\n  {\r\n    title: 'Mystery & Detective',\r\n    topic: 'detective',\r\n    backgroundColor: '#EF4444',\r\n  },\r\n  {\r\n    title: 'Science Fiction & Fantasy',\r\n    topic: 'science-fiction',\r\n    backgroundColor: '#8B5CF6',\r\n  },\r\n  {\r\n    title: \"Children's Literature\",\r\n    topic: 'children',\r\n    backgroundColor: '#10B981',\r\n  },\r\n]\r\n\r\nfunction App() {\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  })\r\n\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const navigate = useNavigate()\r\n  const [anchorEl, setAnchorEl] = useState(null)\r\n  const [user, setUser] = useState(null)\r\n  const open = Boolean(anchorEl)\r\n\r\n  const handleSearchChange = newSearchTerm => {\r\n    setSearchTerm(newSearchTerm)\r\n  }\r\n\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    handleClose()\r\n    localStorage.removeItem('token')\r\n    setUser(null)\r\n    navigate('/')\r\n    toast.success('Logout successfully')\r\n  }\r\n\r\n  const getUser = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        'http://localhost:8080/api/v1/user/profile',\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      setUser(response.data)\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n\r\n    getUser()\r\n\r\n    window.addEventListener('resize', handleResize)\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className='App min-h-screen bg-[#060d13] flex flex-col'>\r\n      <HeaderComponent\r\n        onSearchChange={handleSearchChange}\r\n        searchTerm={searchTerm}\r\n        showSearch ={true}\r\n      />\r\n      <div className='flex-1 overflow-y-auto mt-16'>\r\n        {/* Sử dụng hidden thay vì conditional rendering */}\r\n        <div className={searchTerm ? 'hidden' : 'block'}>\r\n          <Banner />\r\n          {user && <BookRecommendations windowSize={windowSize} user={user} />}\r\n          <div className='bg-white'>\r\n            {BOOKSHELVES.map(shelf => (\r\n              <BookshelfSection\r\n                key={shelf.topic}\r\n                windowSize={windowSize}\r\n                title={shelf.title}\r\n                topic={shelf.topic}\r\n                backgroundColor={shelf.backgroundColor}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ListBook chỉ render khi có searchTerm */}\r\n        {searchTerm && (\r\n          <div className={searchTerm ? 'block' : 'hidden'}>\r\n            <ListBook searchTerm={searchTerm} windowSize={windowSize} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}