{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\description_book\\\\DescriptionBook.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { BookOpen, MessageCircle, Share2, BookmarkPlus } from 'lucide-react';\nimport { Card, CardContent, Button, Typography, Chip, Divider, Box, Container, Grid, CircularProgress } from '@mui/material';\nimport { colors } from '../../constants';\nimport axios from 'axios';\nimport HeaderComponent from '../../component/header/HeaderComponent';\nimport BookReviews from './BookReviews';\nimport LoginDialog from '../../component/dialogs/LoginDialog';\nimport ReviewDialog from './ReviewDialog';\nimport { Download } from '@mui/icons-material';\nimport SimilarAuthorBooks from '../../component/recommendations/SimilarAuthorBooks';\nimport Footer from '../../component/footer/Footer';\nimport { languages } from '../../constants/searchData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DescriptionBook() {\n  _s();\n  var _bookDetails$formats;\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [user, setUser] = useState(null);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    bookId,\n    bookTitle\n  } = location.state || {};\n  const [ebook, setEbook] = useState(null);\n  const [showLoginDialog, setShowLoginDialog] = useState(false);\n  const [showReviewDialog, setShowReviewDialog] = useState(false);\n  const [shouldRefreshReviews, setShouldRefreshReviews] = useState(0);\n  const [isSaved, setIsSaved] = useState(false);\n  const handleLogin = () => {\n    setShowLoginDialog(false);\n    navigate('/login-account');\n  };\n  const checkBookSaved = async () => {\n    if (!user) return;\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/${bookId}/is-saved`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.data.success) {\n        setIsSaved(response.data.data);\n      }\n    } catch (error) {\n      console.error('Error checking saved status:', error);\n    }\n  };\n  const handleSaveBook = async () => {\n    if (!user) {\n      setShowLoginDialog(true);\n      return;\n    }\n    try {\n      if (isSaved) {\n        // Unsave book\n        const response = await axios.delete(`${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/book/${bookId}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.data.success) {\n          setIsSaved(false);\n          // Có thể thêm toast hoặc notification ở đây\n        }\n      } else {\n        // Save book\n        const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/book/${bookId}`, null, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.data.success) {\n          setIsSaved(true);\n          // Có thể thêm toast hoặc notification ở đây\n        }\n      }\n    } catch (error) {\n      console.error('Error saving/unsaving book:', error);\n      // Có thể thêm error toast ở đây\n    }\n  };\n  const isBanned = (user === null || user === void 0 ? void 0 : user.forumCreationBanned) && ((user === null || user === void 0 ? void 0 : user.forumCreationBanExpiresAt) === null || new Date(user === null || user === void 0 ? void 0 : user.forumCreationBanExpiresAt) > new Date());\n  useEffect(() => {\n    const getUser = async () => {\n      if (!localStorage.getItem('token')) return;\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/user/profile`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        setUser(response.data);\n        // Kiểm tra trạng thái saved ngay sau khi có user data\n        try {\n          const savedResponse = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${response.data.userId}/${bookId}/is-saved`, {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (savedResponse.data.success) {\n            setIsSaved(savedResponse.data.data);\n          }\n        } catch (error) {\n          console.error('Error checking saved status:', error);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const fetchBookDetails = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/book/${bookId}`);\n        if (!response.ok) throw new Error('Failed to fetch book details');\n        const data = await response.json();\n        setBookDetails(data);\n        setEbook(data.formats['application/epub+zip']);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch book details');\n        setLoading(false);\n      }\n    };\n    const handleResize = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    fetchBookDetails();\n    getUser(); // Không cần .then nữa vì đã xử lý trong hàm getUser\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [bookId]); // Thêm bookId vào dependencies\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n      size: 24\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 7\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n      color: 'error.main'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      bgcolor: colors.themeLight.color060d13,\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(HeaderComponent, {\n      centerContent: bookTitle,\n      showSearch: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        pt: 12,\n        pb: 6\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 4,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'sticky',\n              top: 24\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sx: {\n                bgcolor: 'background.paper',\n                boxShadow: theme => `0 8px 24px ${theme.palette.common.black}20`\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                sx: {\n                  p: 0,\n                  '&:last-child': {\n                    pb: 0\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    position: 'relative',\n                    '&:hover .overlay': {\n                      opacity: 1\n                    }\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: bookDetails === null || bookDetails === void 0 ? void 0 : (_bookDetails$formats = bookDetails.formats) === null || _bookDetails$formats === void 0 ? void 0 : _bookDetails$formats['image/jpeg'],\n                    alt: bookDetails.title,\n                    style: {\n                      width: '100%',\n                      height: 'auto',\n                      display: 'block'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    className: \"overlay\",\n                    sx: {\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      right: 0,\n                      bottom: 0,\n                      bgcolor: 'rgba(0,0,0,0.4)',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      opacity: 0,\n                      transition: 'opacity 0.3s'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      startIcon: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 36\n                      }, this),\n                      onClick: () => navigate('/read-book-screen', {\n                        state: {\n                          bookId,\n                          bookTitle,\n                          ebook\n                        }\n                      }),\n                      sx: {\n                        bgcolor: 'white',\n                        color: 'text.primary',\n                        '&:hover': {\n                          bgcolor: 'grey.100'\n                        }\n                      },\n                      children: \"Read Now\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            sx: {\n              bgcolor: 'background.paper',\n              boxShadow: theme => `0 8px 24px ${theme.palette.common.black}20`\n            },\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              sx: {\n                paddingLeft: 4,\n                paddingRight: 4\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h4\",\n                    component: \"h1\",\n                    gutterBottom: true,\n                    children: bookDetails.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    color: \"text.secondary\",\n                    children: [\"by\", ' ', bookDetails.authors.map(author => author.name).join(', ')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  startIcon: /*#__PURE__*/_jsxDEV(MessageCircle, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 32\n                  }, this),\n                  onClick: () => {\n                    if (!user) {\n                      setShowLoginDialog(true);\n                    } else if (isBanned) {\n                      // You could add a toast notification here to inform the user why they can't create a forum\n                      return;\n                    } else {\n                      var _bookDetails$formats2;\n                      navigate('/create-forum', {\n                        state: {\n                          bookId,\n                          bookTitle,\n                          authors: bookDetails.authors.map(author => author.name).join(', '),\n                          coverBook: bookDetails === null || bookDetails === void 0 ? void 0 : (_bookDetails$formats2 = bookDetails.formats) === null || _bookDetails$formats2 === void 0 ? void 0 : _bookDetails$formats2['image/jpeg'],\n                          subjects: bookDetails.subjects\n                        }\n                      });\n                    }\n                  },\n                  disabled: isBanned,\n                  sx: {\n                    bgcolor: isBanned ? 'grey.500' : 'primary.main',\n                    '&:hover': {\n                      bgcolor: isBanned ? 'grey.600' : 'primary.dark'\n                    },\n                    '&.Mui-disabled': {\n                      bgcolor: 'grey.500',\n                      color: 'white'\n                    }\n                  },\n                  children: isBanned ? 'Forum Creation Restricted' : 'Create Forum'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 3,\n                sx: {\n                  mb: 3\n                },\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 8,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Subjects\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: 1\n                    },\n                    children: bookDetails.subjects.map((subject, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                      label: subject,\n                      sx: {\n                        bgcolor: 'white',\n                        color: 'primary.main',\n                        border: `1px solid`,\n                        borderColor: 'primary.main'\n                      }\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 351,\n                      columnNumber: 25\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 349,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 4,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Language\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    color: \"text.secondary\",\n                    children: bookDetails.languages.map(langValue => {\n                      var _languages$find;\n                      return ((_languages$find = languages.find(lang => lang.value === langValue)) === null || _languages$find === void 0 ? void 0 : _languages$find.label) || langValue;\n                    }).join(', ')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 8,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    gutterBottom: true,\n                    children: \"Publisher\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    color: \"text.secondary\",\n                    children: \"Project Gutenberg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 3\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 2,\n                  mt: 3\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  startIcon: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 32\n                  }, this),\n                  onClick: () => navigate('/read-book-screen', {\n                    state: {\n                      bookId,\n                      bookTitle\n                    }\n                  }),\n                  fullWidth: true,\n                  children: \"Read Book\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(BookmarkPlus, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 32\n                  }, this),\n                  onClick: handleSaveBook,\n                  fullWidth: true,\n                  children: isSaved ? 'Unsave Book' : 'Save for Later'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Share2, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 57\n                  }, this),\n                  fullWidth: true,\n                  children: \"Share\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SimilarAuthorBooks, {\n        bookId: bookId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookReviews, {\n        bookId: bookId,\n        onWriteReview: () => {\n          if (!user) {\n            setShowLoginDialog(true);\n          } else {\n            setShowReviewDialog(true);\n          }\n        },\n        refreshTrigger: shouldRefreshReviews,\n        currentUser: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoginDialog, {\n      open: showLoginDialog,\n      onClose: () => setShowLoginDialog(false),\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReviewDialog, {\n      open: showReviewDialog,\n      onClose: () => {\n        setShowReviewDialog(false);\n      },\n      onReviewSubmit: () => {\n        setShowReviewDialog(false);\n        setShouldRefreshReviews(prevState => prevState + 1); // Tăng giá trị để trigger refresh\n      },\n      bookId: bookId,\n      currentUser: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n}\n_s(DescriptionBook, \"gXOfUEFnHHhqAgrhE0aZdi7nCeU=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = DescriptionBook;\nvar _c;\n$RefreshReg$(_c, \"DescriptionBook\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","BookOpen","MessageCircle","Share2","BookmarkPlus","Card","CardContent","Button","Typography","Chip","Divider","Box","Container","Grid","CircularProgress","colors","axios","HeaderComponent","BookReviews","LoginDialog","ReviewDialog","Download","SimilarAuthorBooks","Footer","languages","jsxDEV","_jsxDEV","DescriptionBook","_s","_bookDetails$formats","windowSize","setWindowSize","width","window","innerWidth","height","innerHeight","user","setUser","bookDetails","setBookDetails","loading","setLoading","error","setError","navigate","location","bookId","bookTitle","state","ebook","setEbook","showLoginDialog","setShowLoginDialog","showReviewDialog","setShowReviewDialog","shouldRefreshReviews","setShouldRefreshReviews","isSaved","setIsSaved","handleLogin","checkBookSaved","response","get","process","env","REACT_APP_API_BASE_URL","userId","headers","Authorization","localStorage","getItem","data","success","console","handleSaveBook","delete","post","isBanned","forumCreationBanned","forumCreationBanExpiresAt","Date","getUser","savedResponse","fetchBookDetails","fetch","ok","Error","json","formats","err","handleResize","addEventListener","removeEventListener","scrollTo","sx","display","alignItems","justifyContent","minHeight","children","size","fileName","_jsxFileName","lineNumber","columnNumber","color","bgcolor","themeLight","color060d13","flexDirection","centerContent","showSearch","pt","pb","container","spacing","item","xs","md","position","top","boxShadow","theme","palette","common","black","p","opacity","src","alt","title","style","className","left","right","bottom","transition","variant","startIcon","onClick","paddingLeft","paddingRight","mb","component","gutterBottom","authors","map","author","name","join","_bookDetails$formats2","coverBook","subjects","disabled","flexWrap","gap","subject","index","label","border","borderColor","langValue","_languages$find","find","lang","value","my","mt","fullWidth","onWriteReview","refreshTrigger","currentUser","open","onClose","onLogin","onReviewSubmit","prevState","_c","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/description_book/DescriptionBook.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {useNavigate, useLocation} from 'react-router-dom'\r\nimport {BookOpen, MessageCircle, Share2, BookmarkPlus} from 'lucide-react'\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  Typography,\r\n  Chip,\r\n  Divider,\r\n  Box,\r\n  Container,\r\n  Grid,\r\n  CircularProgress,\r\n} from '@mui/material'\r\nimport {colors} from '../../constants'\r\nimport axios from 'axios'\r\nimport HeaderComponent from '../../component/header/HeaderComponent'\r\nimport BookReviews from './BookReviews'\r\nimport LoginDialog from '../../component/dialogs/LoginDialog'\r\nimport ReviewDialog from './ReviewDialog'\r\nimport {Download} from '@mui/icons-material'\r\nimport SimilarAuthorBooks from '../../component/recommendations/SimilarAuthorBooks'\r\nimport Footer from '../../component/footer/Footer'\r\nimport {languages} from '../../constants/searchData'\r\n\r\nexport default function DescriptionBook() {\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  })\r\n  const [user, setUser] = useState(null)\r\n  const [bookDetails, setBookDetails] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const {bookId, bookTitle} = location.state || {}\r\n  const [ebook,setEbook] = useState(null)\r\n  const [showLoginDialog, setShowLoginDialog] = useState(false)\r\n  const [showReviewDialog, setShowReviewDialog] = useState(false)\r\n  const [shouldRefreshReviews, setShouldRefreshReviews] = useState(0)\r\n  const [isSaved, setIsSaved] = useState(false)\r\n\r\n  const handleLogin = () => {\r\n    setShowLoginDialog(false)\r\n    navigate('/login-account')\r\n  }\r\n  const checkBookSaved = async () => {\r\n    if (!user) return\r\n    try {\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/${bookId}/is-saved`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      if (response.data.success) {\r\n        setIsSaved(response.data.data)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking saved status:', error)\r\n    }\r\n  }\r\n  const handleSaveBook = async () => {\r\n    if (!user) {\r\n      setShowLoginDialog(true)\r\n      return\r\n    }\r\n\r\n    try {\r\n      if (isSaved) {\r\n        // Unsave book\r\n        const response = await axios.delete(\r\n          `${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/book/${bookId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        if (response.data.success) {\r\n          setIsSaved(false)\r\n          // Có thể thêm toast hoặc notification ở đây\r\n        }\r\n      } else {\r\n        // Save book\r\n        const response = await axios.post(\r\n          `${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${user.userId}/book/${bookId}`,\r\n          null,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        if (response.data.success) {\r\n          setIsSaved(true)\r\n          // Có thể thêm toast hoặc notification ở đây\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving/unsaving book:', error)\r\n      // Có thể thêm error toast ở đây\r\n    }\r\n  }\r\n\r\n  const isBanned =\r\n    user?.forumCreationBanned &&\r\n    (user?.forumCreationBanExpiresAt === null ||\r\n      new Date(user?.forumCreationBanExpiresAt) > new Date())\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      if (!localStorage.getItem('token')) return\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_API_BASE_URL}/user/profile`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          },\r\n        )\r\n        setUser(response.data)\r\n        // Kiểm tra trạng thái saved ngay sau khi có user data\r\n        try {\r\n          const savedResponse = await axios.get(\r\n            `${process.env.REACT_APP_API_BASE_URL}/saved-books/user/${response.data.userId}/${bookId}/is-saved`,\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n              },\r\n            },\r\n          )\r\n          if (savedResponse.data.success) {\r\n            setIsSaved(savedResponse.data.data)\r\n          }\r\n        } catch (error) {\r\n          console.error('Error checking saved status:', error)\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    }\r\n\r\n    const fetchBookDetails = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_API_BASE_URL}/book/${bookId}`,\r\n        )\r\n        if (!response.ok) throw new Error('Failed to fetch book details')\r\n        const data = await response.json()\r\n        setBookDetails(data)\r\n        setEbook(data.formats['application/epub+zip'])\r\n        setLoading(false)\r\n      } catch (err) {\r\n        setError('Failed to fetch book details')\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    const handleResize = () => {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n\r\n    fetchBookDetails()\r\n    getUser() // Không cần .then nữa vì đã xử lý trong hàm getUser\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [bookId]) // Thêm bookId vào dependencies\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n        }}>\r\n        <CircularProgress size={24} />\r\n      </Box>\r\n    )\r\n\r\n  if (error)\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          color: 'error.main',\r\n        }}>\r\n        {error}\r\n      </Box>\r\n    )\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        bgcolor: colors.themeLight.color060d13,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n      <HeaderComponent centerContent={bookTitle} showSearch={false} />\r\n\r\n      <Container sx={{pt: 12, pb: 6}}>\r\n        <Grid container spacing={4}>\r\n          <Grid item xs={12} md={4}>\r\n            <Box sx={{position: 'sticky', top: 24}}>\r\n              <Card\r\n                sx={{\r\n                  bgcolor: 'background.paper',\r\n                  boxShadow: theme =>\r\n                    `0 8px 24px ${theme.palette.common.black}20`,\r\n                }}>\r\n                <CardContent sx={{p: 0, '&:last-child': {pb: 0}}}>\r\n                  <Box\r\n                    sx={{\r\n                      position: 'relative',\r\n                      '&:hover .overlay': {opacity: 1},\r\n                    }}>\r\n                    <img\r\n                      src={bookDetails?.formats?.['image/jpeg']}\r\n                      alt={bookDetails.title}\r\n                      style={{\r\n                        width: '100%',\r\n                        height: 'auto',\r\n                        display: 'block',\r\n                      }}\r\n                    />\r\n                    <Box\r\n                      className='overlay'\r\n                      sx={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        bgcolor: 'rgba(0,0,0,0.4)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        opacity: 0,\r\n                        transition: 'opacity 0.3s',\r\n                      }}>\r\n                      <Button\r\n                        variant='contained'\r\n                        startIcon={<BookOpen />}\r\n                        onClick={() =>\r\n                          navigate('/read-book-screen', {\r\n                            state: {bookId, bookTitle, ebook},\r\n                          })\r\n                        }\r\n                        sx={{\r\n                          bgcolor: 'white',\r\n                          color: 'text.primary',\r\n                          '&:hover': {bgcolor: 'grey.100'},\r\n                        }}>\r\n                        Read Now\r\n                      </Button>\r\n                    </Box>\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={8}>\r\n            <Card\r\n              sx={{\r\n                bgcolor: 'background.paper',\r\n                boxShadow: theme =>\r\n                  `0 8px 24px ${theme.palette.common.black}20`,\r\n              }}>\r\n              <CardContent sx={{paddingLeft: 4, paddingRight: 4}}>\r\n                <Box\r\n                  sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'flex-start',\r\n                    mb: 1,\r\n                  }}>\r\n                  <Box>\r\n                    <Typography variant='h4' component='h1' gutterBottom>\r\n                      {bookDetails.title}\r\n                    </Typography>\r\n                    <Typography variant='h6' color='text.secondary'>\r\n                      by{' '}\r\n                      {bookDetails.authors\r\n                        .map(author => author.name)\r\n                        .join(', ')}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Button\r\n                    variant='contained'\r\n                    startIcon={<MessageCircle />}\r\n                    onClick={() => {\r\n                      if (!user) {\r\n                        setShowLoginDialog(true)\r\n                      } else if (isBanned) {\r\n                        // You could add a toast notification here to inform the user why they can't create a forum\r\n                        return\r\n                      } else {\r\n                        navigate('/create-forum', {\r\n                          state: {\r\n                            bookId,\r\n                            bookTitle,\r\n                            authors: bookDetails.authors\r\n                              .map(author => author.name)\r\n                              .join(', '),\r\n                            coverBook: bookDetails?.formats?.['image/jpeg'],\r\n                            subjects: bookDetails.subjects,\r\n                          },\r\n                        })\r\n                      }\r\n                    }}\r\n                    disabled={isBanned}\r\n                    sx={{\r\n                      bgcolor: isBanned ? 'grey.500' : 'primary.main',\r\n                      '&:hover': {\r\n                        bgcolor: isBanned ? 'grey.600' : 'primary.dark',\r\n                      },\r\n                      '&.Mui-disabled': {\r\n                        bgcolor: 'grey.500',\r\n                        color: 'white',\r\n                      },\r\n                    }}>\r\n                    {isBanned ? 'Forum Creation Restricted' : 'Create Forum'}\r\n                  </Button>\r\n                </Box>\r\n\r\n                <Grid container spacing={3} sx={{mb: 3}}>\r\n                  <Grid item xs={12} md={8}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Subjects\r\n                    </Typography>\r\n                    <Box sx={{display: 'flex', flexWrap: 'wrap', gap: 1}}>\r\n                      {bookDetails.subjects.map((subject, index) => (\r\n                        <Chip\r\n                          key={index}\r\n                          label={subject}\r\n                          sx={{\r\n                            bgcolor: 'white',\r\n                            color: 'primary.main',\r\n                            border: `1px solid`,\r\n                            borderColor: 'primary.main',\r\n                          }}\r\n                        />\r\n                      ))}\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={4}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Language\r\n                    </Typography>\r\n                    <Typography color='text.secondary'>\r\n                      {bookDetails.languages\r\n                        .map(\r\n                          langValue =>\r\n                            languages.find(lang => lang.value === langValue)\r\n                              ?.label || langValue,\r\n                        )\r\n                        .join(', ')}\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid item xs={12} md={8}>\r\n                    <Typography variant='h6' gutterBottom>\r\n                      Publisher\r\n                    </Typography>\r\n                    <Typography color='text.secondary'>\r\n                      Project Gutenberg\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <Divider sx={{my: 3}} />\r\n                <Box sx={{display: 'flex', gap: 2, mt: 3}}>\r\n                  <Button\r\n                    variant='contained'\r\n                    startIcon={<BookOpen />}\r\n                    onClick={() =>\r\n                      navigate('/read-book-screen', {\r\n                        state: {bookId, bookTitle},\r\n                      })\r\n                    }\r\n                    fullWidth>\r\n                    Read Book\r\n                  </Button>\r\n                  <Button\r\n                    variant='outlined'\r\n                    startIcon={<BookmarkPlus />}\r\n                    onClick={handleSaveBook}\r\n                    fullWidth>\r\n                    {isSaved ? 'Unsave Book' : 'Save for Later'}\r\n                  </Button>\r\n                  {/* <Button\r\n                    variant='outlined'\r\n                    startIcon={<Download />}\r\n                    fullWidth\r\n                    onClick={() => {\r\n                      window.open(\r\n                        bookDetails.formats['application/x-mobipocket-ebook'],\r\n                        `_blank`,\r\n                      )\r\n                    }}>\r\n                    Downloads\r\n                  </Button> */}\r\n                  <Button variant='outlined' startIcon={<Share2 />} fullWidth>\r\n                    Share\r\n                  </Button>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n        <SimilarAuthorBooks bookId={bookId} />\r\n\r\n        <BookReviews\r\n          bookId={bookId}\r\n          onWriteReview={() => {\r\n            if (!user) {\r\n              setShowLoginDialog(true)\r\n            } else {\r\n              setShowReviewDialog(true)\r\n            }\r\n          }}\r\n          refreshTrigger={shouldRefreshReviews}\r\n          currentUser={user}\r\n        />\r\n      </Container>\r\n      <LoginDialog\r\n        open={showLoginDialog}\r\n        onClose={() => setShowLoginDialog(false)}\r\n        onLogin={handleLogin}\r\n      />\r\n\r\n      <ReviewDialog\r\n        open={showReviewDialog}\r\n        onClose={() => {\r\n          setShowReviewDialog(false)\r\n        }}\r\n        onReviewSubmit={() => {\r\n          setShowReviewDialog(false)\r\n          setShouldRefreshReviews(prevState => prevState + 1) // Tăng giá trị để trigger refresh\r\n        }}\r\n        bookId={bookId}\r\n        currentUser={user}\r\n      />\r\n      <Footer />\r\n    </Box>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}