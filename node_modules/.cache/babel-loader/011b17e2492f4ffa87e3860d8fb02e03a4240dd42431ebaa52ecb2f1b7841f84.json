{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{ArrowLeft,Heart,Share2,MessageCircle,Users,ThumbsUp,Bookmark,MoreHorizontal,Send,Image}from'lucide-react';import{useNavigate,useParams}from'react-router-dom';import HeaderComponent from'../../../component/header/HeaderComponent';import{Avatar,Box}from'@mui/material';import{colors}from'../../../constants';import SockJS from'sockjs-client';import{Stomp,Client}from'@stomp/stompjs';import ForumCommentItem from'./widgets/ForumCommentItem';import ForumInteractionButtons from'./widgets/ForumInteractionButtons';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ForumDiscussion=()=>{var _forum$creator;const{forumId}=useParams();const navigate=useNavigate();const[forum,setForum]=useState(null);const[comments,setComments]=useState([]);const[loading,setLoading]=useState(true);const[newComment,setNewComment]=useState('');const[user,setUser]=useState(null);const[selectedImage,setSelectedImage]=useState(null);const[stompClient,setStompClient]=useState(null);const fileInputRef=useRef(null);const webSocketRef=useRef(null);const[isSending,setIsSending]=useState(false);const getUser=async()=>{try{const response=await fetch('http://localhost:8080/api/v1/user/profile',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();setUser(data);}}catch(error){console.error(error);}};const handleCommentDeleted=commentId=>{setComments(prevComments=>prevComments.filter(c=>c.id!==commentId));};const connectWebSocket=()=>{const socket=new SockJS('http://localhost:8080/ws');const client=Stomp.over(()=>socket);client.debug=()=>{};const token=localStorage.getItem('token');const headers={Authorization:`Bearer ${token}`,'Content-Type':'application/json'};client.connect(headers,()=>{console.log('Connected to WebSocket');setStompClient(client);webSocketRef.current=client;client.subscribe(`/topic/forum/${forumId}`,message=>{try{const newComment=JSON.parse(message.body);setComments(prevComments=>{const exists=prevComments.some(c=>c.id===newComment.id);if(!exists){return[newComment,...prevComments];}return prevComments;});}catch(error){console.error('Error processing comment:',error);}});},error=>{console.error('WebSocket connection error:',error);});return client;};const handleImageSelect=event=>{const file=event.target.files[0];if(file){setSelectedImage(file);}};const handleSubmitComment=async()=>{if(!newComment.trim()&&!selectedImage)return;if(isSending)return;try{let imageUrl=null;if(selectedImage){const formData=new FormData();setIsSending(true);formData.append('file',selectedImage);const response=await fetch('http://localhost:8080/api/v1/upload',{method:'POST',headers:{Authorization:`Bearer ${localStorage.getItem('token')}`},body:formData});if(response.ok){const result=await response.json();imageUrl=result.data.url;}}if(stompClient!==null&&stompClient!==void 0&&stompClient.connected){const token=localStorage.getItem('token');const commentData={content:newComment,discussionId:forumId,imageUrl:imageUrl};console.log('Posting comment:',commentData);stompClient.send('/app/comment',{Authorization:`Bearer ${token}`,'Content-Type':'application/json'},JSON.stringify(commentData));setNewComment('');setSelectedImage(null);if(fileInputRef.current){fileInputRef.current.value='';}}}catch(error){console.error('Error posting comment:',error);}finally{setIsSending(false);}};useEffect(()=>{const fetchForumData=async()=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/api/v1/forums/${forumId}`,{headers:{Authorization:`Bearer ${token}`}});const data=await response.json();if(data.success){setForum(data.data);}const commentsResponse=await fetch(`http://localhost:8080/api/v1/forums/${forumId}/comments`,{headers:{Authorization:`Bearer ${token}`}});const commentsData=await commentsResponse.json();if(commentsData.success){setComments(commentsData.data);}}catch(err){console.error(err);}finally{setLoading(false);}};connectWebSocket();getUser();fetchForumData();return()=>{if(webSocketRef.current){console.log('Disconnecting WebSocket');webSocketRef.current.disconnect();webSocketRef.current=null;}};},[forumId]);useEffect(()=>{if(stompClient){const commentDeleteSub=stompClient.subscribe(`/topic/forum/${forumId}/comment-delete`,message=>{const{commentId}=JSON.parse(message.body);setComments(prevComments=>prevComments.filter(c=>c.id!==commentId));});return()=>{commentDeleteSub.unsubscribe();};}},[stompClient,forumId]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(Box,{sx:{minHeight:'100vh',bgcolor:colors.themeLight.color060d13,display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(HeaderComponent,{centerContent:\"\",showSearch:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-purple-600 text-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-8 mt-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:w-1/3 lg:w-1/4\",children:[/*#__PURE__*/_jsx(\"img\",{src:(forum===null||forum===void 0?void 0:forum.imageUrl)||'/api/placeholder/300/450',alt:forum===null||forum===void 0?void 0:forum.forumTitle,className:\"w-full h-[450px] object-cover rounded-lg shadow-lg\"}),/*#__PURE__*/_jsx(ForumInteractionButtons,{forumId:forumId,user:user})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-4\",children:forum===null||forum===void 0?void 0:forum.forumTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-white/80 mb-6\",children:forum===null||forum===void 0?void 0:forum.forumDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white/60 text-sm mb-1\",children:\"Book Title\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:forum===null||forum===void 0?void 0:forum.bookTitle})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white/60 text-sm mb-1\",children:\"Author\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:forum===null||forum===void 0?void 0:forum.authors})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white/60 text-sm mb-1\",children:\"Created By\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[user.urlAvatar?/*#__PURE__*/_jsx(Avatar,{src:user.urlAvatar}):/*#__PURE__*/_jsx(Avatar,{children:user.username?user.username.toUpperCase().charAt(0):'U'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:forum===null||forum===void 0?void 0:(_forum$creator=forum.creator)===null||_forum$creator===void 0?void 0:_forum$creator.username})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsxs(\"span\",{children:[forum===null||forum===void 0?void 0:forum.totalMembers,\" members\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsxs(\"span\",{children:[comments.length,\" discussions\"]})]})]})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[user.urlAvatar?/*#__PURE__*/_jsx(Avatar,{src:user.urlAvatar}):/*#__PURE__*/_jsx(Avatar,{children:user.username?user.username.toUpperCase().charAt(0):'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Share your thoughts about this book...\",className:\"w-full p-4 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageSelect,ref:fileInputRef,className:\"hidden\",id:\"image-upload\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"image-upload\",className:\"cursor-pointer flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Image\"})]}),selectedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:selectedImage.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedImage(null);if(fileInputRef.current){fileInputRef.current.value='';}},className:\"text-red-500 hover:text-red-700\",children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitComment,disabled:isSending,className:`${isSending?'bg-gray-400 cursor-not-allowed':'bg-blue-600 hover:bg-blue-700'} text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2`,children:isSending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sending...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Post\"})]})})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:comments.map(comment=>/*#__PURE__*/_jsx(ForumCommentItem,{comment:comment,stompClient:stompClient,user:user,onCommentDeleted:handleCommentDeleted},comment.id))})]})})]})]});};export default ForumDiscussion;","map":{"version":3,"names":["React","useState","useEffect","useRef","ArrowLeft","Heart","Share2","MessageCircle","Users","ThumbsUp","Bookmark","MoreHorizontal","Send","Image","useNavigate","useParams","HeaderComponent","Avatar","Box","colors","SockJS","Stomp","Client","ForumCommentItem","ForumInteractionButtons","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ForumDiscussion","_forum$creator","forumId","navigate","forum","setForum","comments","setComments","loading","setLoading","newComment","setNewComment","user","setUser","selectedImage","setSelectedImage","stompClient","setStompClient","fileInputRef","webSocketRef","isSending","setIsSending","getUser","response","fetch","headers","Authorization","localStorage","getItem","ok","data","json","error","console","handleCommentDeleted","commentId","prevComments","filter","c","id","connectWebSocket","socket","client","over","debug","token","connect","log","current","subscribe","message","JSON","parse","body","exists","some","handleImageSelect","event","file","target","files","handleSubmitComment","trim","imageUrl","formData","FormData","append","method","result","url","connected","commentData","content","discussionId","send","stringify","value","fetchForumData","success","commentsResponse","commentsData","err","disconnect","commentDeleteSub","unsubscribe","className","children","sx","minHeight","bgcolor","themeLight","color060d13","display","flexDirection","centerContent","showSearch","src","alt","forumTitle","forumDescription","bookTitle","authors","urlAvatar","username","toUpperCase","charAt","creator","totalMembers","length","onChange","e","placeholder","rows","type","accept","ref","htmlFor","name","onClick","disabled","map","comment","onCommentDeleted"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/forum_discussion/views/ForumDiscussion.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\r\nimport {\r\n  ArrowLeft,\r\n  Heart,\r\n  Share2,\r\n  MessageCircle,\r\n  Users,\r\n  ThumbsUp,\r\n  Bookmark,\r\n  MoreHorizontal,\r\n  Send,\r\n  Image,\r\n} from 'lucide-react'\r\nimport {useNavigate, useParams} from 'react-router-dom'\r\nimport HeaderComponent from '../../../component/header/HeaderComponent'\r\nimport {Avatar, Box} from '@mui/material'\r\nimport {colors} from '../../../constants'\r\nimport SockJS from 'sockjs-client'\r\nimport {Stomp, Client} from '@stomp/stompjs'\r\nimport ForumCommentItem from './widgets/ForumCommentItem'\r\nimport ForumInteractionButtons from './widgets/ForumInteractionButtons'\r\n\r\nconst ForumDiscussion = () => {\r\n  const {forumId} = useParams()\r\n  const navigate = useNavigate()\r\n  const [forum, setForum] = useState(null)\r\n  const [comments, setComments] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [newComment, setNewComment] = useState('')\r\n  const [user, setUser] = useState(null)\r\n\r\n  const [selectedImage, setSelectedImage] = useState(null)\r\n  const [stompClient, setStompClient] = useState(null)\r\n  const fileInputRef = useRef(null)\r\n  const webSocketRef = useRef(null)\r\n  const [isSending, setIsSending] = useState(false);\r\n\r\n  const getUser = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        'http://localhost:8080/api/v1/user/profile',\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n        },\r\n      )\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setUser(data)\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  const handleCommentDeleted = (commentId) => {\r\n    setComments(prevComments => prevComments.filter(c => c.id !== commentId));\r\n  };\r\n\r\n  const connectWebSocket = () => {\r\n    const socket = new SockJS('http://localhost:8080/ws')\r\n    const client = Stomp.over(() => socket)\r\n\r\n    client.debug = () => {}\r\n\r\n    const token = localStorage.getItem('token')\r\n    const headers = {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    }\r\n\r\n    client.connect(\r\n      headers,\r\n      () => {\r\n        console.log('Connected to WebSocket')\r\n        setStompClient(client)\r\n        webSocketRef.current = client\r\n\r\n        client.subscribe(`/topic/forum/${forumId}`, message => {\r\n          try {\r\n            const newComment = JSON.parse(message.body)\r\n            setComments(prevComments => {\r\n              const exists = prevComments.some(c => c.id === newComment.id)\r\n              if (!exists) {\r\n                return [newComment, ...prevComments]\r\n              }\r\n              return prevComments\r\n            })\r\n          } catch (error) {\r\n            console.error('Error processing comment:', error)\r\n          }\r\n        })\r\n      },\r\n      error => {\r\n        console.error('WebSocket connection error:', error)\r\n      },\r\n    )\r\n\r\n    return client\r\n  }\r\n\r\n  const handleImageSelect = event => {\r\n    const file = event.target.files[0]\r\n    if (file) {\r\n      setSelectedImage(file)\r\n    }\r\n  }\r\n\r\n  const handleSubmitComment = async () => {\r\n    if (!newComment.trim() && !selectedImage) return\r\n    if (isSending) return;\r\n    try {\r\n      let imageUrl = null\r\n      if (selectedImage) {\r\n        const formData = new FormData()\r\n        setIsSending(true);\r\n        formData.append('file', selectedImage)\r\n        const response = await fetch('http://localhost:8080/api/v1/upload', {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          },\r\n          body: formData,\r\n        })\r\n\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          imageUrl = result.data.url;\r\n        }\r\n      }\r\n\r\n      if (stompClient?.connected) {\r\n\r\n        const token = localStorage.getItem('token')\r\n        const commentData = {\r\n          content: newComment,\r\n          discussionId: forumId,\r\n          imageUrl: imageUrl,\r\n        }\r\nconsole.log('Posting comment:', commentData)\r\n        stompClient.send(\r\n          '/app/comment',\r\n          {\r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          JSON.stringify(commentData),\r\n        )\r\n\r\n        setNewComment('')\r\n        setSelectedImage(null)\r\n        if (fileInputRef.current) {\r\n          fileInputRef.current.value = ''\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error posting comment:', error)\r\n    } finally {\r\n      setIsSending(false);\r\n  }\r\n  }\r\n  useEffect(() => {\r\n    const fetchForumData = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token')\r\n        const response = await fetch(\r\n          `http://localhost:8080/api/v1/forums/${forumId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          },\r\n        )\r\n        const data = await response.json()\r\n        if (data.success) {\r\n          setForum(data.data)\r\n        }\r\n\r\n        const commentsResponse = await fetch(\r\n          `http://localhost:8080/api/v1/forums/${forumId}/comments`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          },\r\n        )\r\n        const commentsData = await commentsResponse.json()\r\n        if (commentsData.success) {\r\n          setComments(commentsData.data)\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    connectWebSocket()\r\n    getUser()\r\n    fetchForumData()\r\n    return () => {\r\n      if (webSocketRef.current) {\r\n        console.log('Disconnecting WebSocket')\r\n        webSocketRef.current.disconnect()\r\n        webSocketRef.current = null\r\n      }\r\n    }\r\n  }, [forumId])\r\n\r\n  useEffect(() => {\r\n    if (stompClient) {\r\n      const commentDeleteSub = stompClient.subscribe(\r\n        `/topic/forum/${forumId}/comment-delete`,\r\n        message => {\r\n          const { commentId } = JSON.parse(message.body);\r\n          setComments(prevComments => prevComments.filter(c => c.id !== commentId));\r\n        }\r\n      );\r\n\r\n      return () => {\r\n        commentDeleteSub.unsubscribe();\r\n      };\r\n    }\r\n  }, [stompClient, forumId]);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className='flex justify-center items-center min-h-screen'>\r\n        Loading...\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        bgcolor: colors.themeLight.color060d13,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n      <HeaderComponent centerContent='' showSearch={false} />\r\n      <div className='min-h-screen bg-gray-50'>\r\n        <div className='bg-gradient-to-r from-blue-600 to-purple-600 text-white'>\r\n          <div className='container mx-auto px-4 py-8'>\r\n            <div className='flex flex-col md:flex-row gap-8 mt-12'>\r\n              <div className='w-full md:w-1/3 lg:w-1/4'>\r\n                <img\r\n                  src={forum?.imageUrl || '/api/placeholder/300/450'}\r\n                  alt={forum?.forumTitle}\r\n                  className='w-full h-[450px] object-cover rounded-lg shadow-lg'\r\n                />\r\n                <ForumInteractionButtons\r\n                  forumId={forumId}\r\n                  user={user}\r\n                />\r\n              </div>\r\n              {/* Forum Info */}\r\n              <div className='flex-1'>\r\n                <h1 className='text-4xl font-bold mb-4'>{forum?.forumTitle}</h1>\r\n                <p className='text-lg text-white/80 mb-6'>\r\n                  {forum?.forumDescription}\r\n                </p>\r\n\r\n                <div className='grid grid-cols-2 md:grid-cols-3 gap-6 mb-8'>\r\n                  <div>\r\n                    <h3 className='text-white/60 text-sm mb-1'>Book Title</h3>\r\n                    <p className='text-lg font-medium'>{forum?.bookTitle}</p>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className='text-white/60 text-sm mb-1'>Author</h3>\r\n                    <p className='text-lg font-medium'>{forum?.authors}</p>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className='text-white/60 text-sm mb-1'>Created By</h3>\r\n                    <div className='flex items-center gap-2'>\r\n                    {user.urlAvatar ? (\r\n                  <Avatar src={user.urlAvatar} />\r\n                ) : (\r\n                  <Avatar>\r\n                    {user.username\r\n                      ? user.username.toUpperCase().charAt(0)\r\n                      : 'U'}\r\n                  </Avatar>\r\n                )}\r\n                      <span className='text-lg font-medium'>\r\n                        {forum?.creator?.username}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='flex gap-6'>\r\n                  <div className='flex items-center gap-2'>\r\n                    <Users className='w-5 h-5' />\r\n                    <span>{forum?.totalMembers} members</span>\r\n                  </div>\r\n                  <div className='flex items-center gap-2'>\r\n                    <MessageCircle className='w-5 h-5' />\r\n                    <span>{comments.length} discussions</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='container mx-auto px-4 py-8'>\r\n          <div className='max-w-4xl mx-auto'>\r\n            <div className='bg-white rounded-lg shadow-md p-4 mb-8'>\r\n              <div className='flex gap-4'>\r\n              {user.urlAvatar ? (\r\n                  <Avatar src={user.urlAvatar} />\r\n                ) : (\r\n                  <Avatar>\r\n                    {user.username\r\n                      ? user.username.toUpperCase().charAt(0)\r\n                      : 'U'}\r\n                  </Avatar>\r\n                )}\r\n                <div className='flex-1'>\r\n                  <textarea\r\n                    value={newComment}\r\n                    onChange={e => setNewComment(e.target.value)}\r\n                    placeholder='Share your thoughts about this book...'\r\n                    className='w-full p-4 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none'\r\n                    rows='3'\r\n                  />\r\n                  <div className='flex justify-between items-center mt-4'>\r\n                    <div className='flex gap-2'>\r\n                      <input\r\n                        type='file'\r\n                        accept='image/*'\r\n                        onChange={handleImageSelect}\r\n                        ref={fileInputRef}\r\n                        className='hidden'\r\n                        id='image-upload'\r\n                      />\r\n                      <label\r\n                        htmlFor='image-upload'\r\n                        className='cursor-pointer flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors'>\r\n                        <Image className='w-5 h-5' />\r\n                        <span>Add Image</span>\r\n                      </label>\r\n                      {selectedImage && (\r\n                        <div className='flex items-center gap-2'>\r\n                          <span className='text-sm text-gray-500'>\r\n                            {selectedImage.name}\r\n                          </span>\r\n                          <button\r\n                            onClick={() => {\r\n                              setSelectedImage(null)\r\n                              if (fileInputRef.current) {\r\n                                fileInputRef.current.value = ''\r\n                              }\r\n                            }}\r\n                            className='text-red-500 hover:text-red-700'>\r\n                            Ã—\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <button\r\n    onClick={handleSubmitComment}\r\n    disabled={isSending}\r\n    className={`${\r\n        isSending\r\n            ? 'bg-gray-400 cursor-not-allowed'\r\n            : 'bg-blue-600 hover:bg-blue-700'\r\n    } text-white px-6 py-2 rounded-lg transition-colors flex items-center gap-2`}\r\n>\r\n    {isSending ? (\r\n        <>\r\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n            <span>Sending...</span>\r\n        </>\r\n    ) : (\r\n        <>\r\n            <Send className=\"w-4 h-4\" />\r\n            <span>Post</span>\r\n        </>\r\n    )}\r\n</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Comments List */}\r\n            <div className='space-y-6'>\r\n              {comments.map(comment => (\r\n                <ForumCommentItem\r\n                  key={comment.id}\r\n                  comment={comment}\r\n                  stompClient={stompClient}\r\n                  user={user}\r\n                  onCommentDeleted={handleCommentDeleted}\r\n               />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default ForumDiscussion\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}