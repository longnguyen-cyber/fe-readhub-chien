{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TTC\\\\OneDrive\\\\Documents\\\\GITHUB\\\\fe-readhub\\\\src\\\\pages\\\\read_book\\\\views\\\\ReadBookScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { images } from '../../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReadBookScreen() {\n  _s();\n  const location = useLocation();\n  const {\n    bookId\n  } = location.state || {};\n  const [bookData, setBookData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showNoteOption, setShowNoteOption] = useState(false);\n  const [notePosition, setNotePosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedText, setSelectedText] = useState('');\n  const [openDialog, setOpenDialog] = useState(false);\n  const [noteContent, setNoteContent] = useState('');\n  const iframeRef = useRef(null);\n\n  // Thêm hàm mới để xử lý việc chọn văn bản\n  const handleTextSelection = () => {\n    console.log('Text selected:', window.getSelection().toString());\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n    const selection = iframeDocument.getSelection();\n    const text = selection.toString().trim();\n    if (text) {\n      const range = selection.getRangeAt(0);\n      const rect = range.getBoundingClientRect();\n      const iframeRect = iframe.getBoundingClientRect();\n\n      // Tính toán vị trí hiển thị option\n      setNotePosition({\n        x: rect.left + iframeRect.left + window.scrollX,\n        y: rect.top + iframeRect.top + window.scrollY - 40\n      });\n      setSelectedText(text);\n      setShowNoteOption(true);\n    } else {\n      setShowNoteOption(false);\n    }\n  };\n\n  // Cập nhật hàm handleSaveNote\n  const handleSaveNote = async () => {\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n    const selection = iframeDocument.getSelection();\n    const range = selection.getRangeAt(0);\n\n    // Tạo một đối tượng note để lưu vào database\n    const noteData = {\n      bookId,\n      content: noteContent,\n      selectedText,\n      // Lưu thông tin về vị trí của note\n      location: {\n        startContainer: getXPath(range.startContainer),\n        startOffset: range.startOffset,\n        endContainer: getXPath(range.endContainer),\n        endOffset: range.endOffset\n      }\n    };\n    try {\n      const response = await fetch('http://localhost:8080/api/v1/notes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(noteData)\n      });\n      if (response.ok) {\n        // Đóng dialog và reset state\n        setOpenDialog(false);\n        setNoteContent('');\n        setShowNoteOption(false);\n\n        // Đánh dấu đoạn văn bản đã được ghi chú\n        highlightSavedNote(noteData);\n      }\n    } catch (error) {\n      console.error('Error saving note:', error);\n    }\n  };\n  const handleCreateNote = () => {\n    setOpenDialog(true);\n  };\n\n  // Hàm tạo XPath cho một node\n  const getXPath = node => {\n    if (node.nodeType === Node.TEXT_NODE) {\n      node = node.parentNode;\n    }\n    if (node.id) {\n      return `//*[@id=\"${node.id}\"]`;\n    }\n    let path = [];\n    while (node && node.nodeType === Node.ELEMENT_NODE) {\n      let position = 1;\n      let sibling = node.previousSibling;\n      while (sibling) {\n        if (sibling.nodeType === Node.ELEMENT_NODE && sibling.tagName === node.tagName) {\n          position++;\n        }\n        sibling = sibling.previousSibling;\n      }\n      path.unshift(`${node.tagName.toLowerCase()}[${position}]`);\n      node = node.parentNode;\n    }\n    return `/${path.join('/')}`;\n  };\n\n  // Load saved notes and highlight them\n  const loadSavedNotes = async () => {\n    try {\n      const response = await fetch(`http://localhost:8080/api/v1/notes/book/${bookId}`);\n      const notes = await response.json();\n      notes.forEach(note => {\n        highlightSavedNote(note);\n      });\n    } catch (error) {\n      console.error('Error loading notes:', error);\n    }\n  };\n\n  // Highlight saved note in the document\n  const highlightSavedNote = note => {\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n    const doc = iframe.contentDocument;\n    const startNode = getElementByXPath(doc, note.location.startContainer);\n    const endNode = getElementByXPath(doc, note.location.endContainer);\n    if (startNode && endNode) {\n      const range = doc.createRange();\n      range.setStart(startNode, note.location.startOffset);\n      range.setEnd(endNode, note.location.endOffset);\n      const highlight = doc.createElement('span');\n      highlight.className = 'highlighted-note';\n      highlight.style.backgroundColor = 'yellow';\n      highlight.title = note.content;\n      range.surroundContents(highlight);\n    }\n  };\n\n  // Helper function to get element by XPath\n  const getElementByXPath = (doc, xpath) => {\n    return doc.evaluate(xpath, doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n  };\n  useEffect(() => {\n    if (bookId) {\n      fetch(`https://gutendex.com/books/${bookId}`).then(response => response.json()).then(data => {\n        setBookData(data);\n        setLoading(false);\n      }).catch(error => {\n        console.error('Error fetching book data:', error);\n        setLoading(false);\n      });\n    }\n  }, [bookId]);\n  useEffect(() => {\n    console.log(\"Component mounted\");\n\n    // Kiểm tra sự tồn tại của iframe\n    const checkIframe = () => {\n      const iframe = iframeRef.current;\n      if (!iframe) {\n        console.log(\"Iframe ref does not exist yet\");\n        return;\n      }\n      console.log(\"Iframe ref exists\");\n      iframe.addEventListener('load', handleIframeLoad);\n    };\n\n    // Đăng ký sự kiện khi iframe thay đổi\n    if (iframeRef.current) {\n      checkIframe();\n    }\n\n    // Cleanup function to remove the event listener when component unmounts\n    return () => {\n      const iframe = iframeRef.current;\n      if (iframe) {\n        iframe.removeEventListener('load', handleIframeLoad);\n      }\n    };\n  }, [iframeRef]);\n  const handleIframeLoad = () => {\n    console.log(\"Iframe loaded\");\n    const iframe = iframeRef.current;\n    if (!iframe) {\n      console.log(\"Iframe ref is null in handleIframeLoad\");\n      return;\n    }\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n    console.log(\"Iframe document:\", iframeDocument);\n    if (iframeDocument) {\n      iframeDocument.addEventListener('mouseup', handleTextSelection);\n      iframeDocument.addEventListener('selectionchange', handleTextSelection);\n      console.log(\"Event listeners added to iframe document\");\n    } else {\n      console.log(\"Could not access iframe document\");\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this);\n  }\n  if (!bookData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No book data found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 12\n    }, this);\n  }\n  const {\n    title,\n    authors,\n    formats\n  } = bookData;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...styles.header\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Author:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), \" \", authors.map(author => author.name).join(', ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), showNoteOption && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        left: notePosition.x,\n        top: notePosition.y,\n        zIndex: 2000,\n        backgroundColor: 'white',\n        padding: '5px',\n        borderRadius: '4px',\n        boxShadow: '0 2px 5px rgba(0,0,0,0.2)'\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleCreateNote,\n        children: \"T\\u1EA1o ghi ch\\xFA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openDialog,\n      onClose: () => setOpenDialog(false),\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"T\\u1EA1o ghi ch\\xFA m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          margin: \"dense\",\n          label: \"N\\u1ED9i dung ghi ch\\xFA\",\n          fullWidth: true,\n          multiline: true,\n          rows: 4,\n          value: noteContent,\n          onChange: e => setNoteContent(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpenDialog(false),\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSaveNote,\n          children: \"L\\u01B0u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n      src: `http://localhost:8080/api/v1/book/book-content?url=${bookData.formats['text/html']}&urlImageCover=${bookData.formats['image/jpeg']}`,\n      style: styles.bookContent,\n      title: \"Book Content\",\n      onLoad: handleIframeLoad\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        bottom: 0,\n        height: '9vh',\n        width: '100%',\n        backgroundColor: 'rgba(255, 255, 255, 0.0)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: styles.chapterLabel,\n        children: \"C\\xE1c Ch\\u01B0\\u01A1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {},\n        style: styles.button,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: images.icRightArrow,\n          alt: \"Next\",\n          style: styles.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 5\n  }, this);\n}\n_s(ReadBookScreen, \"dZB8Y7o6KEGmZsOqrf1/f4k0mA0=\", false, function () {\n  return [useLocation];\n});\n_c = ReadBookScreen;\nconst styles = {\n  icon: {\n    width: '30px',\n    height: '30px'\n  },\n  button: {\n    padding: '10px 20px',\n    cursor: 'pointer'\n  },\n  chapterLabel: {\n    fontSize: '18px',\n    fontWeight: 'bold'\n  },\n  header: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    width: '19%',\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    padding: '10px',\n    borderBottom: '1px solid #ddd',\n    zIndex: 1000,\n    transition: 'opacity 0.3s ease'\n  },\n  bookContent: {\n    width: '81%',\n    marginLeft: '19%',\n    height: '100vh',\n    border: 'none'\n  }\n};\nexport default ReadBookScreen;\nvar _c;\n$RefreshReg$(_c, \"ReadBookScreen\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","CircularProgress","Box","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","images","jsxDEV","_jsxDEV","ReadBookScreen","_s","location","bookId","state","bookData","setBookData","loading","setLoading","showNoteOption","setShowNoteOption","notePosition","setNotePosition","x","y","selectedText","setSelectedText","openDialog","setOpenDialog","noteContent","setNoteContent","iframeRef","handleTextSelection","console","log","window","getSelection","toString","iframe","current","iframeDocument","contentDocument","contentWindow","document","selection","text","trim","range","getRangeAt","rect","getBoundingClientRect","iframeRect","left","scrollX","top","scrollY","handleSaveNote","noteData","content","startContainer","getXPath","startOffset","endContainer","endOffset","response","fetch","method","headers","body","JSON","stringify","ok","highlightSavedNote","error","handleCreateNote","node","nodeType","Node","TEXT_NODE","parentNode","id","path","ELEMENT_NODE","position","sibling","previousSibling","tagName","unshift","toLowerCase","join","loadSavedNotes","notes","json","forEach","note","doc","startNode","getElementByXPath","endNode","createRange","setStart","setEnd","highlight","createElement","className","style","backgroundColor","title","surroundContents","xpath","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","then","data","catch","checkIframe","addEventListener","handleIframeLoad","removeEventListener","sx","display","justifyContent","alignItems","height","children","fileName","_jsxFileName","lineNumber","columnNumber","authors","formats","styles","header","map","author","name","zIndex","padding","borderRadius","boxShadow","onClick","open","onClose","autoFocus","margin","label","fullWidth","multiline","rows","value","onChange","e","target","src","bookContent","onLoad","bottom","width","chapterLabel","button","icRightArrow","alt","icon","_c","cursor","fontSize","fontWeight","right","borderBottom","transition","marginLeft","border","$RefreshReg$"],"sources":["C:/Users/TTC/OneDrive/Documents/GITHUB/fe-readhub/src/pages/read_book/views/ReadBookScreen.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Box from '@mui/material/Box';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport { images } from '../../../constants';\r\n\r\nfunction ReadBookScreen() {\r\n  const location = useLocation();\r\n  const { bookId } = location.state || {};\r\n  const [bookData, setBookData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showNoteOption, setShowNoteOption] = useState(false);\r\n  const [notePosition, setNotePosition] = useState({ x: 0, y: 0 });\r\n  const [selectedText, setSelectedText] = useState('');\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [noteContent, setNoteContent] = useState('');\r\n  const iframeRef = useRef(null);\r\n\r\n  // Thêm hàm mới để xử lý việc chọn văn bản\r\n  const handleTextSelection = () => {\r\n    console.log('Text selected:', window.getSelection().toString());\r\n    const iframe = iframeRef.current;\r\n    if (!iframe) return;\r\n\r\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\r\n    const selection = iframeDocument.getSelection();\r\n    const text = selection.toString().trim();\r\n\r\n    if (text) {\r\n      const range = selection.getRangeAt(0);\r\n      const rect = range.getBoundingClientRect();\r\n      const iframeRect = iframe.getBoundingClientRect();\r\n\r\n      // Tính toán vị trí hiển thị option\r\n      setNotePosition({\r\n        x: rect.left + iframeRect.left + window.scrollX,\r\n        y: rect.top + iframeRect.top + window.scrollY - 40\r\n      });\r\n      setSelectedText(text);\r\n      setShowNoteOption(true);\r\n    } else {\r\n      setShowNoteOption(false);\r\n    }\r\n  };\r\n\r\n  // Cập nhật hàm handleSaveNote\r\n  const handleSaveNote = async () => {\r\n    const iframe = iframeRef.current;\r\n    if (!iframe) return;\r\n\r\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\r\n    const selection = iframeDocument.getSelection();\r\n    const range = selection.getRangeAt(0);\r\n\r\n    // Tạo một đối tượng note để lưu vào database\r\n    const noteData = {\r\n      bookId,\r\n      content: noteContent,\r\n      selectedText,\r\n      // Lưu thông tin về vị trí của note\r\n      location: {\r\n        startContainer: getXPath(range.startContainer),\r\n        startOffset: range.startOffset,\r\n        endContainer: getXPath(range.endContainer),\r\n        endOffset: range.endOffset\r\n      }\r\n    };\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:8080/api/v1/notes', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(noteData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Đóng dialog và reset state\r\n        setOpenDialog(false);\r\n        setNoteContent('');\r\n        setShowNoteOption(false);\r\n\r\n        // Đánh dấu đoạn văn bản đã được ghi chú\r\n        highlightSavedNote(noteData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving note:', error);\r\n    }\r\n  };\r\n  const handleCreateNote = () => {\r\n    setOpenDialog(true);\r\n  };\r\n\r\n\r\n  // Hàm tạo XPath cho một node\r\n  const getXPath = (node) => {\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      node = node.parentNode;\r\n    }\r\n\r\n    if (node.id) {\r\n      return `//*[@id=\"${node.id}\"]`;\r\n    }\r\n\r\n    let path = [];\r\n    while (node && node.nodeType === Node.ELEMENT_NODE) {\r\n      let position = 1;\r\n      let sibling = node.previousSibling;\r\n\r\n      while (sibling) {\r\n        if (sibling.nodeType === Node.ELEMENT_NODE &&\r\n            sibling.tagName === node.tagName) {\r\n          position++;\r\n        }\r\n        sibling = sibling.previousSibling;\r\n      }\r\n\r\n      path.unshift(`${node.tagName.toLowerCase()}[${position}]`);\r\n      node = node.parentNode;\r\n    }\r\n\r\n    return `/${path.join('/')}`;\r\n  };\r\n\r\n  // Load saved notes and highlight them\r\n  const loadSavedNotes = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/api/v1/notes/book/${bookId}`);\r\n      const notes = await response.json();\r\n\r\n      notes.forEach(note => {\r\n        highlightSavedNote(note);\r\n      });\r\n    } catch (error) {\r\n      console.error('Error loading notes:', error);\r\n    }\r\n  };\r\n\r\n  // Highlight saved note in the document\r\n  const highlightSavedNote = (note) => {\r\n    const iframe = iframeRef.current;\r\n    if (!iframe) return;\r\n\r\n    const doc = iframe.contentDocument;\r\n    const startNode = getElementByXPath(doc, note.location.startContainer);\r\n    const endNode = getElementByXPath(doc, note.location.endContainer);\r\n\r\n    if (startNode && endNode) {\r\n      const range = doc.createRange();\r\n      range.setStart(startNode, note.location.startOffset);\r\n      range.setEnd(endNode, note.location.endOffset);\r\n\r\n      const highlight = doc.createElement('span');\r\n      highlight.className = 'highlighted-note';\r\n      highlight.style.backgroundColor = 'yellow';\r\n      highlight.title = note.content;\r\n\r\n      range.surroundContents(highlight);\r\n    }\r\n  };\r\n\r\n  // Helper function to get element by XPath\r\n  const getElementByXPath = (doc, xpath) => {\r\n    return doc.evaluate(xpath, doc, null,\r\n      XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (bookId) {\r\n      fetch(`https://gutendex.com/books/${bookId}`)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setBookData(data);\r\n          setLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching book data:', error);\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [bookId]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Component mounted\");\r\n\r\n    // Kiểm tra sự tồn tại của iframe\r\n    const checkIframe = () => {\r\n      const iframe = iframeRef.current;\r\n      if (!iframe) {\r\n        console.log(\"Iframe ref does not exist yet\");\r\n        return;\r\n      }\r\n\r\n      console.log(\"Iframe ref exists\");\r\n      iframe.addEventListener('load', handleIframeLoad);\r\n    };\r\n\r\n    // Đăng ký sự kiện khi iframe thay đổi\r\n    if (iframeRef.current) {\r\n      checkIframe();\r\n    }\r\n\r\n    // Cleanup function to remove the event listener when component unmounts\r\n    return () => {\r\n      const iframe = iframeRef.current;\r\n      if (iframe) {\r\n        iframe.removeEventListener('load', handleIframeLoad);\r\n      }\r\n    };\r\n  }, [iframeRef]);\r\n\r\n  const handleIframeLoad = () => {\r\n    console.log(\"Iframe loaded\");\r\n    const iframe = iframeRef.current;\r\n    if (!iframe) {\r\n      console.log(\"Iframe ref is null in handleIframeLoad\");\r\n      return;\r\n    }\r\n\r\n    const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\r\n    console.log(\"Iframe document:\", iframeDocument);\r\n\r\n    if (iframeDocument) {\r\n      iframeDocument.addEventListener('mouseup', handleTextSelection);\r\n      iframeDocument.addEventListener('selectionchange', handleTextSelection);\r\n      console.log(\"Event listeners added to iframe document\");\r\n    } else {\r\n      console.log(\"Could not access iframe document\");\r\n    }\r\n  };\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!bookData) {\r\n    return <div>No book data found</div>;\r\n  }\r\n\r\n  const { title, authors, formats } = bookData;\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ ...styles.header }}>\r\n        <h1>{title}</h1>\r\n        <p>\r\n          <strong>Author:</strong> {authors.map((author) => author.name).join(', ')}\r\n        </p>\r\n      </div>\r\n      {showNoteOption && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: notePosition.x,\r\n          top: notePosition.y,\r\n          zIndex: 2000,\r\n          backgroundColor: 'white',\r\n          padding: '5px',\r\n          borderRadius: '4px',\r\n          boxShadow: '0 2px 5px rgba(0,0,0,0.2)'\r\n        }}>\r\n          <Button onClick={handleCreateNote}>\r\n            Tạo ghi chú\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Note creation dialog */}\r\n      <Dialog open={openDialog} onClose={() => setOpenDialog(false)}>\r\n        <DialogTitle>Tạo ghi chú mới</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Nội dung ghi chú\"\r\n            fullWidth\r\n            multiline\r\n            rows={4}\r\n            value={noteContent}\r\n            onChange={(e) => setNoteContent(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenDialog(false)}>Hủy</Button>\r\n          <Button onClick={handleSaveNote}>Lưu</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <iframe\r\n        src={`http://localhost:8080/api/v1/book/book-content?url=${bookData.formats['text/html']}&urlImageCover=${bookData.formats['image/jpeg']}`}\r\n        style={styles.bookContent}\r\n        title=\"Book Content\"\r\n        onLoad={handleIframeLoad}\r\n      />\r\n      <div style={{\r\n        position: 'fixed',\r\n        bottom: 0,\r\n        height: '9vh', width: '100%',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.0)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        }}>\r\n      <span style={styles.chapterLabel}>Các Chương</span>\r\n      <button\r\n      onClick={()=>{}} style={styles.button}>\r\n        <img src={images.icRightArrow}\r\n          alt=\"Next\" style={styles.icon} />\r\n      </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  icon: {\r\n    width: '30px',\r\n    height: '30px',\r\n  },\r\n  button: {\r\n    padding: '10px 20px',\r\n    cursor: 'pointer',\r\n  },\r\n  chapterLabel: {\r\n    fontSize: '18px',\r\n    fontWeight: 'bold',\r\n  },\r\n  header: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    width: '19%',\r\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n    padding: '10px',\r\n    borderBottom: '1px solid #ddd',\r\n    zIndex: 1000,\r\n    transition: 'opacity 0.3s ease',\r\n  },\r\n  bookContent: {\r\n    width: '81%',\r\n    marginLeft: '19%',\r\n    height: '100vh',\r\n    border: 'none',\r\n  },\r\n};\r\n\r\nexport default ReadBookScreen;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,gBAAgB,MAAM,gCAAgC;AAC7D,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,MAAM,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEe;EAAO,CAAC,GAAGD,QAAQ,CAACE,KAAK,IAAI,CAAC,CAAC;EACvC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACuB,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACyB,YAAY,EAAEC,eAAe,CAAC,GAAG1B,QAAQ,CAAC;IAAE2B,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAChE,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC+B,UAAU,EAAEC,aAAa,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACiC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAMmC,SAAS,GAAGlC,MAAM,CAAC,IAAI,CAAC;;EAE9B;EACA,MAAMmC,mBAAmB,GAAGA,CAAA,KAAM;IAChCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,MAAM,CAACC,YAAY,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC;IAC/D,MAAMC,MAAM,GAAGP,SAAS,CAACQ,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAME,cAAc,GAAGF,MAAM,CAACG,eAAe,IAAIH,MAAM,CAACI,aAAa,CAACC,QAAQ;IAC9E,MAAMC,SAAS,GAAGJ,cAAc,CAACJ,YAAY,CAAC,CAAC;IAC/C,MAAMS,IAAI,GAAGD,SAAS,CAACP,QAAQ,CAAC,CAAC,CAACS,IAAI,CAAC,CAAC;IAExC,IAAID,IAAI,EAAE;MACR,MAAME,KAAK,GAAGH,SAAS,CAACI,UAAU,CAAC,CAAC,CAAC;MACrC,MAAMC,IAAI,GAAGF,KAAK,CAACG,qBAAqB,CAAC,CAAC;MAC1C,MAAMC,UAAU,GAAGb,MAAM,CAACY,qBAAqB,CAAC,CAAC;;MAEjD;MACA5B,eAAe,CAAC;QACdC,CAAC,EAAE0B,IAAI,CAACG,IAAI,GAAGD,UAAU,CAACC,IAAI,GAAGjB,MAAM,CAACkB,OAAO;QAC/C7B,CAAC,EAAEyB,IAAI,CAACK,GAAG,GAAGH,UAAU,CAACG,GAAG,GAAGnB,MAAM,CAACoB,OAAO,GAAG;MAClD,CAAC,CAAC;MACF7B,eAAe,CAACmB,IAAI,CAAC;MACrBzB,iBAAiB,CAAC,IAAI,CAAC;IACzB,CAAC,MAAM;MACLA,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAMoC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,MAAMlB,MAAM,GAAGP,SAAS,CAACQ,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAME,cAAc,GAAGF,MAAM,CAACG,eAAe,IAAIH,MAAM,CAACI,aAAa,CAACC,QAAQ;IAC9E,MAAMC,SAAS,GAAGJ,cAAc,CAACJ,YAAY,CAAC,CAAC;IAC/C,MAAMW,KAAK,GAAGH,SAAS,CAACI,UAAU,CAAC,CAAC,CAAC;;IAErC;IACA,MAAMS,QAAQ,GAAG;MACf5C,MAAM;MACN6C,OAAO,EAAE7B,WAAW;MACpBJ,YAAY;MACZ;MACAb,QAAQ,EAAE;QACR+C,cAAc,EAAEC,QAAQ,CAACb,KAAK,CAACY,cAAc,CAAC;QAC9CE,WAAW,EAAEd,KAAK,CAACc,WAAW;QAC9BC,YAAY,EAAEF,QAAQ,CAACb,KAAK,CAACe,YAAY,CAAC;QAC1CC,SAAS,EAAEhB,KAAK,CAACgB;MACnB;IACF,CAAC;IAED,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,EAAE;QACjEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAIO,QAAQ,CAACO,EAAE,EAAE;QACf;QACA3C,aAAa,CAAC,KAAK,CAAC;QACpBE,cAAc,CAAC,EAAE,CAAC;QAClBV,iBAAiB,CAAC,KAAK,CAAC;;QAExB;QACAoD,kBAAkB,CAACf,QAAQ,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACdxC,OAAO,CAACwC,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF,CAAC;EACD,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7B9C,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;;EAGD;EACA,MAAMgC,QAAQ,GAAIe,IAAI,IAAK;IACzB,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;MACpCH,IAAI,GAAGA,IAAI,CAACI,UAAU;IACxB;IAEA,IAAIJ,IAAI,CAACK,EAAE,EAAE;MACX,OAAO,YAAYL,IAAI,CAACK,EAAE,IAAI;IAChC;IAEA,IAAIC,IAAI,GAAG,EAAE;IACb,OAAON,IAAI,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACK,YAAY,EAAE;MAClD,IAAIC,QAAQ,GAAG,CAAC;MAChB,IAAIC,OAAO,GAAGT,IAAI,CAACU,eAAe;MAElC,OAAOD,OAAO,EAAE;QACd,IAAIA,OAAO,CAACR,QAAQ,KAAKC,IAAI,CAACK,YAAY,IACtCE,OAAO,CAACE,OAAO,KAAKX,IAAI,CAACW,OAAO,EAAE;UACpCH,QAAQ,EAAE;QACZ;QACAC,OAAO,GAAGA,OAAO,CAACC,eAAe;MACnC;MAEAJ,IAAI,CAACM,OAAO,CAAC,GAAGZ,IAAI,CAACW,OAAO,CAACE,WAAW,CAAC,CAAC,IAAIL,QAAQ,GAAG,CAAC;MAC1DR,IAAI,GAAGA,IAAI,CAACI,UAAU;IACxB;IAEA,OAAO,IAAIE,IAAI,CAACQ,IAAI,CAAC,GAAG,CAAC,EAAE;EAC7B,CAAC;;EAED;EACA,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAM1B,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2CpD,MAAM,EAAE,CAAC;MACjF,MAAM8E,KAAK,GAAG,MAAM3B,QAAQ,CAAC4B,IAAI,CAAC,CAAC;MAEnCD,KAAK,CAACE,OAAO,CAACC,IAAI,IAAI;QACpBtB,kBAAkB,CAACsB,IAAI,CAAC;MAC1B,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACdxC,OAAO,CAACwC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF,CAAC;;EAED;EACA,MAAMD,kBAAkB,GAAIsB,IAAI,IAAK;IACnC,MAAMxD,MAAM,GAAGP,SAAS,CAACQ,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAMyD,GAAG,GAAGzD,MAAM,CAACG,eAAe;IAClC,MAAMuD,SAAS,GAAGC,iBAAiB,CAACF,GAAG,EAAED,IAAI,CAAClF,QAAQ,CAAC+C,cAAc,CAAC;IACtE,MAAMuC,OAAO,GAAGD,iBAAiB,CAACF,GAAG,EAAED,IAAI,CAAClF,QAAQ,CAACkD,YAAY,CAAC;IAElE,IAAIkC,SAAS,IAAIE,OAAO,EAAE;MACxB,MAAMnD,KAAK,GAAGgD,GAAG,CAACI,WAAW,CAAC,CAAC;MAC/BpD,KAAK,CAACqD,QAAQ,CAACJ,SAAS,EAAEF,IAAI,CAAClF,QAAQ,CAACiD,WAAW,CAAC;MACpDd,KAAK,CAACsD,MAAM,CAACH,OAAO,EAAEJ,IAAI,CAAClF,QAAQ,CAACmD,SAAS,CAAC;MAE9C,MAAMuC,SAAS,GAAGP,GAAG,CAACQ,aAAa,CAAC,MAAM,CAAC;MAC3CD,SAAS,CAACE,SAAS,GAAG,kBAAkB;MACxCF,SAAS,CAACG,KAAK,CAACC,eAAe,GAAG,QAAQ;MAC1CJ,SAAS,CAACK,KAAK,GAAGb,IAAI,CAACpC,OAAO;MAE9BX,KAAK,CAAC6D,gBAAgB,CAACN,SAAS,CAAC;IACnC;EACF,CAAC;;EAED;EACA,MAAML,iBAAiB,GAAGA,CAACF,GAAG,EAAEc,KAAK,KAAK;IACxC,OAAOd,GAAG,CAACe,QAAQ,CAACD,KAAK,EAAEd,GAAG,EAAE,IAAI,EAClCgB,WAAW,CAACC,uBAAuB,EAAE,IAAI,CAAC,CAACC,eAAe;EAC9D,CAAC;EAEDtH,SAAS,CAAC,MAAM;IACd,IAAIkB,MAAM,EAAE;MACVoD,KAAK,CAAC,8BAA8BpD,MAAM,EAAE,CAAC,CAC1CqG,IAAI,CAAElD,QAAQ,IAAKA,QAAQ,CAAC4B,IAAI,CAAC,CAAC,CAAC,CACnCsB,IAAI,CAAEC,IAAI,IAAK;QACdnG,WAAW,CAACmG,IAAI,CAAC;QACjBjG,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,CAAC,CACDkG,KAAK,CAAE3C,KAAK,IAAK;QAChBxC,OAAO,CAACwC,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjDvD,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACL,MAAM,CAAC,CAAC;EAEZlB,SAAS,CAAC,MAAM;IACdsC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;;IAEhC;IACA,MAAMmF,WAAW,GAAGA,CAAA,KAAM;MACxB,MAAM/E,MAAM,GAAGP,SAAS,CAACQ,OAAO;MAChC,IAAI,CAACD,MAAM,EAAE;QACXL,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC5C;MACF;MAEAD,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAChCI,MAAM,CAACgF,gBAAgB,CAAC,MAAM,EAAEC,gBAAgB,CAAC;IACnD,CAAC;;IAED;IACA,IAAIxF,SAAS,CAACQ,OAAO,EAAE;MACrB8E,WAAW,CAAC,CAAC;IACf;;IAEA;IACA,OAAO,MAAM;MACX,MAAM/E,MAAM,GAAGP,SAAS,CAACQ,OAAO;MAChC,IAAID,MAAM,EAAE;QACVA,MAAM,CAACkF,mBAAmB,CAAC,MAAM,EAAED,gBAAgB,CAAC;MACtD;IACF,CAAC;EACH,CAAC,EAAE,CAACxF,SAAS,CAAC,CAAC;EAEf,MAAMwF,gBAAgB,GAAGA,CAAA,KAAM;IAC7BtF,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5B,MAAMI,MAAM,GAAGP,SAAS,CAACQ,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;MACXL,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;MACrD;IACF;IAEA,MAAMM,cAAc,GAAGF,MAAM,CAACG,eAAe,IAAIH,MAAM,CAACI,aAAa,CAACC,QAAQ;IAC9EV,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEM,cAAc,CAAC;IAE/C,IAAIA,cAAc,EAAE;MAClBA,cAAc,CAAC8E,gBAAgB,CAAC,SAAS,EAAEtF,mBAAmB,CAAC;MAC/DQ,cAAc,CAAC8E,gBAAgB,CAAC,iBAAiB,EAAEtF,mBAAmB,CAAC;MACvEC,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;IACzD,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;IACjD;EACF,CAAC;EAGD,IAAIjB,OAAO,EAAE;IACX,oBACER,OAAA,CAACT,GAAG;MAACyH,EAAE,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAEC,cAAc,EAAE,QAAQ;QAAEC,UAAU,EAAE,QAAQ;QAAEC,MAAM,EAAE;MAAQ,CAAE;MAAAC,QAAA,eAC5FrH,OAAA,CAACV,gBAAgB;QAAAgI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAEV;EAEA,IAAI,CAACnH,QAAQ,EAAE;IACb,oBAAON,OAAA;MAAAqH,QAAA,EAAK;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACtC;EAEA,MAAM;IAAEvB,KAAK;IAAEwB,OAAO;IAAEC;EAAQ,CAAC,GAAGrH,QAAQ;EAE5C,oBACEN,OAAA;IAAAqH,QAAA,gBACErH,OAAA;MAAKgG,KAAK,EAAE;QAAE,GAAG4B,MAAM,CAACC;MAAO,CAAE;MAAAR,QAAA,gBAC/BrH,OAAA;QAAAqH,QAAA,EAAKnB;MAAK;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAChBzH,OAAA;QAAAqH,QAAA,gBACErH,OAAA;UAAAqH,QAAA,EAAQ;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACC,OAAO,CAACI,GAAG,CAAEC,MAAM,IAAKA,MAAM,CAACC,IAAI,CAAC,CAAChD,IAAI,CAAC,IAAI,CAAC;MAAA;QAAAsC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,EACL/G,cAAc,iBACbV,OAAA;MAAKgG,KAAK,EAAE;QACVtB,QAAQ,EAAE,UAAU;QACpB/B,IAAI,EAAE/B,YAAY,CAACE,CAAC;QACpB+B,GAAG,EAAEjC,YAAY,CAACG,CAAC;QACnBkH,MAAM,EAAE,IAAI;QACZhC,eAAe,EAAE,OAAO;QACxBiC,OAAO,EAAE,KAAK;QACdC,YAAY,EAAE,KAAK;QACnBC,SAAS,EAAE;MACb,CAAE;MAAAf,QAAA,eACArH,OAAA,CAACH,MAAM;QAACwI,OAAO,EAAEpE,gBAAiB;QAAAoD,QAAA,EAAC;MAEnC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,eAGDzH,OAAA,CAACR,MAAM;MAAC8I,IAAI,EAAEpH,UAAW;MAACqH,OAAO,EAAEA,CAAA,KAAMpH,aAAa,CAAC,KAAK,CAAE;MAAAkG,QAAA,gBAC5DrH,OAAA,CAACP,WAAW;QAAA4H,QAAA,EAAC;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAa,CAAC,eAC1CzH,OAAA,CAACN,aAAa;QAAA2H,QAAA,eACZrH,OAAA,CAACJ,SAAS;UACR4I,SAAS;UACTC,MAAM,EAAC,OAAO;UACdC,KAAK,EAAC,0BAAkB;UACxBC,SAAS;UACTC,SAAS;UACTC,IAAI,EAAE,CAAE;UACRC,KAAK,EAAE1H,WAAY;UACnB2H,QAAQ,EAAGC,CAAC,IAAK3H,cAAc,CAAC2H,CAAC,CAACC,MAAM,CAACH,KAAK;QAAE;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACW,CAAC,eAChBzH,OAAA,CAACL,aAAa;QAAA0H,QAAA,gBACZrH,OAAA,CAACH,MAAM;UAACwI,OAAO,EAAEA,CAAA,KAAMlH,aAAa,CAAC,KAAK,CAAE;UAAAkG,QAAA,EAAC;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACzDzH,OAAA,CAACH,MAAM;UAACwI,OAAO,EAAEtF,cAAe;UAAAsE,QAAA,EAAC;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eACTzH,OAAA;MACEkJ,GAAG,EAAE,sDAAsD5I,QAAQ,CAACqH,OAAO,CAAC,WAAW,CAAC,kBAAkBrH,QAAQ,CAACqH,OAAO,CAAC,YAAY,CAAC,EAAG;MAC3I3B,KAAK,EAAE4B,MAAM,CAACuB,WAAY;MAC1BjD,KAAK,EAAC,cAAc;MACpBkD,MAAM,EAAEtC;IAAiB;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1B,CAAC,eACFzH,OAAA;MAAKgG,KAAK,EAAE;QACVtB,QAAQ,EAAE,OAAO;QACjB2E,MAAM,EAAE,CAAC;QACTjC,MAAM,EAAE,KAAK;QAAEkC,KAAK,EAAE,MAAM;QAC5BrD,eAAe,EAAE,0BAA0B;QAC3CgB,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE;MACZ,CAAE;MAAAE,QAAA,gBACJrH,OAAA;QAAMgG,KAAK,EAAE4B,MAAM,CAAC2B,YAAa;QAAAlC,QAAA,EAAC;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACnDzH,OAAA;QACAqI,OAAO,EAAEA,CAAA,KAAI,CAAC,CAAE;QAACrC,KAAK,EAAE4B,MAAM,CAAC4B,MAAO;QAAAnC,QAAA,eACpCrH,OAAA;UAAKkJ,GAAG,EAAEpJ,MAAM,CAAC2J,YAAa;UAC5BC,GAAG,EAAC,MAAM;UAAC1D,KAAK,EAAE4B,MAAM,CAAC+B;QAAK;UAAArC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACvH,EAAA,CAtTQD,cAAc;EAAA,QACJZ,WAAW;AAAA;AAAAuK,EAAA,GADrB3J,cAAc;AAwTvB,MAAM2H,MAAM,GAAG;EACb+B,IAAI,EAAE;IACJL,KAAK,EAAE,MAAM;IACblC,MAAM,EAAE;EACV,CAAC;EACDoC,MAAM,EAAE;IACNtB,OAAO,EAAE,WAAW;IACpB2B,MAAM,EAAE;EACV,CAAC;EACDN,YAAY,EAAE;IACZO,QAAQ,EAAE,MAAM;IAChBC,UAAU,EAAE;EACd,CAAC;EACDlC,MAAM,EAAE;IACNnD,QAAQ,EAAE,OAAO;IACjB7B,GAAG,EAAE,CAAC;IACNF,IAAI,EAAE,CAAC;IACPqH,KAAK,EAAE,CAAC;IACRV,KAAK,EAAE,KAAK;IACZrD,eAAe,EAAE,0BAA0B;IAC3CiC,OAAO,EAAE,MAAM;IACf+B,YAAY,EAAE,gBAAgB;IAC9BhC,MAAM,EAAE,IAAI;IACZiC,UAAU,EAAE;EACd,CAAC;EACDf,WAAW,EAAE;IACXG,KAAK,EAAE,KAAK;IACZa,UAAU,EAAE,KAAK;IACjB/C,MAAM,EAAE,OAAO;IACfgD,MAAM,EAAE;EACV;AACF,CAAC;AAED,eAAenK,cAAc;AAAC,IAAA2J,EAAA;AAAAS,YAAA,CAAAT,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}